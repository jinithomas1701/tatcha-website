(()=>{"use strict";var e=[,(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var r=t(2),o=t.n(r),i=t(3),s=t.n(i),a=t(4),p=t.n(a),d=t(5),c=t.n(d),l=t(6),g=t.n(l),u=t(7),f=t.n(u),w=t(8),m={};m.styleTagTransform=f(),m.setAttributes=c(),m.insert=p().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=g();o()(w.default,m);const h=w.default&&w.default.locals?w.default.locals:void 0},e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},s=[],a=0;a<e.length;a++){var p=e[a],d=r.base?p[0]+r.base:p[0],c=i[d]||0,l="".concat(d," ").concat(c);i[d]=c+1;var g=t(l),u={css:p[1],media:p[2],sourceMap:p[3]};-1!==g?(n[g].references++,n[g].updater(u)):n.push({identifier:l,updater:o(u,r),references:1}),s.push(l)}return s}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=t(i[s]);n[a].references--}for(var p=r(e,o),d=0;d<i.length;d++){var c=t(i[d]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}i=p}}},e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r=t.css,o=t.media,i=t.sourceMap;o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n),n}},e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});var r=t(9),o=t.n(r)()((function(e){return e[1]}));o.push([e.id,'#gpds-widget-container,\r\n#gpds-widget-mobile-container {\r\n    --primary-background-color: #EEEEF6;\r\n    --primary-text-color: rgba(0, 0, 0, 1);\r\n    margin-top: 6px;\r\n}\r\n\r\n#gpds-widget-container > .gpds-widget-wrapper {\r\n    width: fit-content;\r\n    width: -moz-fit-content;\r\n    position: relative;\r\n}\r\n\r\n#gpds-widget-mobile-container > .gpds-widget-wrapper {\r\n    width: fit-content;\r\n    width: -moz-fit-content;\r\n    position: relative;\r\n}\r\n\r\n#gpds-widget-container .gpds-icon,\r\n#gpds-widget-mobile-container .gpds-icon {\r\n    cursor: pointer;\r\n    height: 27px;\r\n    width: 29px;\r\n    display: none;\r\n}\r\n\r\n#gpds-widget-container .gpds-close-icon,\r\n#gpds-widget-mobile-container .gpds-close-icon {\r\n    position: absolute;\r\n    right: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n#gpds-widget-container .gpds-product-wrapper .gpds-product-link,\r\n#gpds-widget-mobile-container .gpds-product-wrapper .gpds-product-link {\r\n    display: block;\r\n    color: var(--primary-text-color);\r\n    border-bottom: 1px solid var(--primary-text-color);\r\n    width: fit-content;\r\n    text-decoration: none;\r\n    font-size: 14px;\r\n    margin-bottom: 0;\r\n}\r\n\r\n#gpds-widget-container .gpds-widget-wrapper .gpds-widget-popover,\r\n#gpds-widget-mobile-container .gpds-widget-wrapper .gpds-widget-popover {\r\n    background-color: var(--primary-background-color);\r\n    width: calc(100vw - 40px);\r\n    display: none;\r\n    position: absolute;\r\n    top: 45px;\r\n    left: -32px;\r\n    border-radius: 8px;\r\n    padding: 12px 36px 14px 8px;\r\n    cursor: pointer;\r\n}\r\n\r\n#gpds-widget-container .gpds-widget-wrapper .gpds-widget-popover::before,\r\n#gpds-widget-mobile-container\r\n    .gpds-widget-wrapper\r\n    .gpds-widget-popover::before {\r\n    content: " ";\r\n    position: absolute;\r\n    left: 32px;\r\n    top: -15px;\r\n    border-bottom: 21px solid var(--primary-background-color);\r\n    border-left: 21px solid transparent;\r\n    border-right: 21px solid transparent;\r\n}\r\n\r\n#gpds-widget-container .gpds-product-wrapper,\r\n#gpds-widget-mobile-container .gpds-product-wrapper {\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n\r\n#gpds-widget-container .gpds-product-wrapper .gpds-product-text,\r\n#gpds-widget-mobile-container .gpds-product-wrapper .gpds-product-text {\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    line-height: 20px;\r\n    margin: 0;\r\n    width: 100%;\r\n    margin-bottom: 0;\r\n    margin-top: 5px;\r\n}\r\n\r\n#gpds-widget-container .gpds-product-image,\r\n#gpds-widget-mobile-container .gpds-product-image {\r\n    margin-right: 12px;\r\n    align-self: center;\r\n    min-width: 75px;\r\n    max-width: 75px;\r\n    max-height: 75px;\r\n}\r\n\r\n#gpds-widget-container .gpds-widget-popover .gpds-elements-wrapper,\r\n#gpds-widget-mobile-container .gpds-widget-popover .gpds-elements-wrapper {\r\n    display: flex;\r\n    width: 100%;\r\n    position: relative;\r\n}\r\n\r\n@media screen and (max-width: 1023px) {\r\n    #gpds-widget-container {\r\n        display: none;\r\n    }\r\n}\r\n@media screen and (min-width: 1024px) {\r\n    #gpds-widget-mobile-container {\r\n        display: none;\r\n    }\r\n}\r\n@media screen and (min-width: 480px) {\r\n    #gpds-widget-container .gpds-widget-wrapper .gpds-widget-popover,\r\n    #gpds-widget-mobile-container .gpds-widget-wrapper .gpds-widget-popover {\r\n        width: 361px;\r\n    }\r\n}\r\n',""]);const i=o},e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var p=[].concat(e[a]);r&&o[p[0]]||(t&&(p[2]?p[2]="".concat(t," and ").concat(p[2]):p[2]=t),n.push(p))}},n}},(e,n,t)=>{t.r(n),t.d(n,{initGPDSWidget:()=>h});var r=t(11);const o="https://tatchaassets.com/tatcha/images/gpds/",i=["/checkout/confirmation","/bag","/account/login"],s="_rsc_last_event_time",a="pcc",p="prf",d="ptl",c="pad",l="pnp",g="pbs",u="psa",f="pbl",w="pgs";function m(){let e=!1;const n=$("#rsc_gpds_option");return n.length&&"var_B"===n.val()||(e=!0),e}function h(){if(m&&!i.some((e=>{let n=!1,t=window.location.pathname,r=window.location.pathname.length;return r>=e.length&&t.substring(r-e.length,r)===e&&(n=!0),n}))){const e=$("#gpds-widget-container");e.length&&e.html(r.default);const n=$("#gpds-widget-mobile-container");n.length&&n.html(r.default)}}!function(){if(JSON.parse(localStorage.getItem("gpdsWidgetAutoScroll"))){let e=$(".compare-title")[0];e&&e.scrollIntoView({behavior:"smooth"}),localStorage.removeItem("gpdsWidgetAutoScroll")}}();const{RSC_LOGGING:v,RSC_TENANT_ID:b,RSC_QUEUE:S,RSC_SESSION_ID_TIMEOUT_SECONDS:y}=rsc.getGPDSConstants(),x=e=>rsc.getCookie(e);let _,C,I=y;"undefined"!=typeof window&&window,function(){h();var e=function(e,n){return e.bind?e.bind(n):e},n=v&&console?e(console.log,console):function(){},t=v&&console?e(console.info,console):function(){},r=v&&console?e(console.warn,console):function(){},i=v&&console?e(console.error,console):function(){};t("info"),r("warn"),i("error"),$((function(){let e=!0;function t(){if(n("handleSessionCheck"),e)if(N()){if(null!==localStorage.getItem(s)){let e=Date.parse(localStorage.getItem(s)),n=Math.abs((e-(new Date).getTime())/1e3);n<y&&(I=y-n,clearInterval(C),T())}}else C&&clearInterval(C);e=!1}$(document).on("click",".gpds-product-link, .gpds-product-text",(function(){let e,n=$(".gpds-elements-wrapper")[0].children[1],t=n.children[0].getAttribute("data-code"),r=n.children[1].getAttribute("data-code"),o=JSON.parse(decodeURIComponent(n.children[1].children[0].value)),i=!1;Object.keys(o).includes("category_name")&&(i=!0,e=o.category_name);let s={rule_id:t,link_name:U.get(r.toLowerCase())};i&&(s.category_name=e),adc.logRSCGPDSEvent("gpds_widget_click",r,s),_.actionCode&&_.actionCode===a.toUpperCase()&&localStorage.setItem("gpdsWidgetAutoScroll",JSON.stringify(!0)),window.location=_.link})),$(window).on("focus",(function(){n("focused"),e=!0,t()})),t(),$(".gpds-close-icon").click((()=>{A()})),$(".gpds-icon").click((function(){N()&&$(".gpds-widget-popover").css("display","flex")})),localStorage.getItem("gpdsResponse")&&$(".gpds-widget-popover").length&&window.displayRSCGPDS&&(D(),$(".gpds-icon").css("display","block"))}));let m=rsc.getSessionId(),k=rsc.webSocketConnect(m);function R(e,t){setTimeout((function(){null!=(e=rsc.webSocketConnect(m))?e.connected?(n("Connection is made"),null!=t&&t()):R(e,t):n("null found")}),5)}function N(){let e=!1;const t=JSON.parse(localStorage.getItem("gpdsResponse"));return n("check response"),n(t),t&&(t.gpdsSession&&t.gpdsSession==x("_rscs")?e=!0:(localStorage.removeItem("gpdsResponse"),E())),e}function O(e){let t,r;n("action-recieved");let o=JSON.parse(e.body);o.gpdsSession=x("_rscs"),localStorage.setItem("gpdsResponse",JSON.stringify(o)),window.displayRSCGPDS&&(clearInterval(C),$(".gpds-widget-wrapper").length&&(D(),$(".gpds-icon").show(),$(".gpds-widget-popover").css("display","flex")),$(".gpds-widget-wrapper").length&&(t=$(".gpds-elements-wrapper")[0].children[1].children[0].getAttribute("data-code"),r=$(".gpds-elements-wrapper")[0].children[1].children[1].getAttribute("data-code")),adc.logRSCGPDSEvent("gpds_activated",r,{rule_id:t}),T())}function T(){C=setInterval((function(){let e=JSON.parse(localStorage.getItem("gpdsResponse"));e&&e.gpdsSession!=x("_rscs")&&(E(),localStorage.removeItem("gpdsResponse"),clearInterval(C))}),I)}function E(){$(".gpds-widget-popover").hide(),$(".gpds-icon").fadeOut("slow")}function A(){$(".gpds-widget-popover").hide()}R(k,(function(){null!=k&&k&&k.connected&&1==k.ws.readyState&&k.subscribe(S+b+"."+m,(function(e){O(e)}),{"subscription-type":"ANYCAST"})}));const M=e=>{let n,t,r,i;_={};let s=null,a="";return e.options.map((e=>{s=encodeURIComponent(JSON.stringify(e.tagging_param_map)),$.each(e.elements,(function(e,s){switch(s.type){case"title":n=s.display_name;break;case"link":t=s.display_name,r=s.URL;break;case"image":i=o+s.image_name}}))})),_={link:r,actionCode:e.action_code},a+=`<img class="gpds-product-image" src=${i} alt="product image" />\n        <div class="gpds-product-wrapper"><p class="gpds-product-text handle-overflow" data-code=${e.rule_id}>${n} </p><a data-code=${e.action_code} class="gpds-product-link font-weight-bold">${t}<input class="gpds-event-data" type="hidden" value=${s}></a></div>`,a};var P=new Map([[a,M],[p,M],[d,M],["pos",M],["pgc",M],[c,M],["pco",M],[l,M],[g,M],["ptt",M],["pap",M],["pcs",M],["pts",M],["pgb",M],["ppp",M],[u,M],["pvc",M],["pgf",M],["prk",M],[f,M],[w,M]]),U=new Map([[a,"compare_products"],[p,"ritual_finder"],[d,"travel"],[c,"auto_delivery"],[l,"new_products"],[g,"best_sellers"],[u,"skin_advisor"],[f,"blog_viewall"],[w,"gift_sets"]]);function D(){let e;const t=JSON.parse(localStorage.getItem("gpdsResponse")).actions[0];P.has(t.action_code.toLowerCase())?e=P.get(t.action_code.toLowerCase())(t):n("Invalid/Unknown action code"),$(".gpds-elements-wrapper").html(e)}}()},(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});var r=t(12),o=t.n(r),i=new URL(t(13),t.b),s=new URL(t(14),t.b);const a='<div class="gpds-widget-wrapper">\r\n    <span class="gpds-icon"\r\n        ><img src="'+o()(i)+'" alt="Guided navigation icon"\r\n    /></span>\r\n    <div class="gpds-widget-popover">\r\n        <div class="gpds-elements-wrapper"></div>\r\n        <img class="gpds-close-icon" src="'+o()(s)+'" alt="" />\r\n    </div>\r\n</div>\r\n'},e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),n.hash&&(e+=n.hash),n.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},(e,n,t)=>{e.exports=t.p+"752084cf8c0afcebc528.svg"},(e,n,t)=>{e.exports=t.p+"6664376bff28f18638f9.svg"}],n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return e[r](i,i.exports,t),i.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;var r={};(()=>{t.r(r);t(1),t(10)})()})();