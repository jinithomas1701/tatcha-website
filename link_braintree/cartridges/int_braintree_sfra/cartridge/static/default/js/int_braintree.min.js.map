{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../storefront-reference-architecture/cartridges/app_storefront_base/cartridge/client/default/js/components/scrollAnimate.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/applepay/applepayHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeApplepay.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeCreditCard.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeGooglepay.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeLocal.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeMFRA.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreePaypal.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeSrc.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeUtils.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeVenmo.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardFields.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/googlepay/googlepayAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/googlepay/googlepayHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/googlepay/googlepayPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/helper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/loaderHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/local/localPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/minicartHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalSavedAccountHandler.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/src/srcAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/src/srcHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/src/srcPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/venmo/venmoAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/venmo/venmoHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/venmo/venmoPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/int_braintree.js"],"names":["module","exports","element","position","length","offset","top","$","animate","scrollTop","focus","applePay","require","isValidInputField","removeActiveSessionPayment","createPaymentFormData","showCartErrorMsg","updateBillingFormValues","$applePayButton","document","querySelector","$applepayButtonsWrap","$applepayDataMethod","$emailField","$phoneField","makeApplePayButtonDisabled","classList","add","hideApplePayButton","style","display","showApplePayButton","initApplepayButton","querySelectorAll","forEach","el","$btn","JSON","parse","getAttribute","config","console","error","addEventListener","isRequiredBillingContactFields","isRequiredShippingContactFields","applePayIns","init","startPayment","updateCartApplepayAmount","loader","show","ajax","url","getOrderInfoUrl","type","dataType","success","data","hide","updateAmount","amount","window","location","reload","on","e","responseData","detail","billingAddressData","billingAddress","paymentMethodName","$braintreeCartButtons","placeOrderUrl","checkoutFromCartUrl","checkoutFormFields","applePayCheckoutFormData","firstName","lastName","address1","streetAddress","address2","extendedAddress","city","locality","postalCode","stateCode","state","country","countryCodeAlpha2","email","phone","paymentMethod","csrfToken","append","name","value","nonce","deviceData","stringify","shippingAddress","contentType","processData","errorMessage","fieldErrors","index","keys","Object","replace","serverErrors","cartError","href","redirectUrl","err","setAttribute","applepayPayment","continueButton","applepayButton","authorizedApplePayPayment","applePayBillingData","storeFrontBillingData","dwfrm_billing_addressFields_firstName","dwfrm_billing_addressFields_lastName","dwfrm_billing_addressFields_address1","dwfrm_billing_addressFields_address2","dwfrm_billing_addressFields_city","dwfrm_billing_addressFields_postalCode","dwfrm_billing_addressFields_states_stateCode","dwfrm_billing_addressFields_country","dwfrm_billing_contactInfoFields_email","dwfrm_billing_contactInfoFields_phone","click","appleUpdateAmountData","removeSessionNonce","braintreeUtils","loaderInstance","bu","Constructor","initParams","$errorContainer","createElement","className","$loaderContainter","parentNode","insertBefore","nextSibling","params","er","createErrorInstance","prototype","createApplePay","that","$braintreeApplePayDeviceDataInput","braintree","client","create","authorization","clientToken","clientErr","clientInstance","isFraudToolsEnabled","dataCollector","paypal","dataCollectorErr","dataCollectorInstance","applePayInstance","createApplePaySession","paymentRequest","createPaymentRequest","total","label","options","displayName","requiredBillingContactFields","requiredShippingContactFields","session","ApplePaySession","onvalidatemerchant","event","performValidation","validationURL","eventError","merchantSession","abort","completeMerchantValidation","onpaymentauthorized","tokenize","token","payment","payload","completePayment","STATUS_FAILURE","STATUS_SUCCESS","shippingContact","addressLines","region","administrativeArea","toUpperCase","countryCode","givenName","familyName","phoneNumber","emailAddress","billingContact","dispatchEvent","CustomEvent","begin","promise","canMakePaymentsWithActiveCard","merchantIdentifier","then","ins","extend","messages","creditcardHelper","createHostedFields","kount","hostedFields","styles","hostedFieldsStyles","fields","hostedFieldsConfig","hostedFieldsInstance","isFormValid","$cardOwnerEl","validation","remove","clearHostedFields","clear","check3dSecureAndSubmit","response","startTokenizeCb","errorCode","is3dSecureEnabled","billingData","getBillingAddressFormValues","threeDSecure","version","btError","verifyCard","bin","details","surname","additionalInformation","shippingAdditionalInfo","onLookupComplete","next","liabilityShifted","isSkip3dSecureLiabilityResult","result","secure3DFailed","createTokenizationOptions","split","join","includes","startTokenize","cb","tokenizationOptions","convertCardTypeToDwFormat","cardType","lastFour","expirationMonth","expirationYear","substr","creditCardFieldsCardNumber","$cardOwner","textContent","selectedCard","initFields","$container","creditcardErrorContainer","cardOwnerEvents","getHostedFieldsStyles","input","color","getHostedFieldsConfig","number","selector","cvv","expirationDate","hostedFieldsAdvancedOptions","getHostedFieldInstance","updateData","paypalHelper","$googlepayCartButton","$googlepayBillingButton","createGooglepay","$braintreeGooglePayDeviceDataInput","paymentsClient","google","payments","api","PaymentsClient","environment","googlePayment","googlePayVersion","googlePaymentErr","googlePaymentInstance","allowedPaymentMethods","createPaymentDataRequest","isReadyToPay","apiVersion","apiVersionMinor","onGooglePaymentButtonClicked","isAccount","zeroAmountErrorMsg","showCheckoutErrorMsg","paymentDataRequest","transactionInfo","currencyCode","currency","totalPriceStatus","totalPrice","String","shippingAddressRequired","isShippingAddressRequired","shippingAddressParameters","allowedCountryCodes","phoneNumberRequired","emailRequired","cardPaymentMethod","parameters","billingAddressRequired","billingAddressParameters","format","loadPaymentData","paymentData","parseResponse","onTokenizePayment","catch","log","button","createButton","onClick","appendChild","scrollAnimate","errorText","createLocalPayment","localPayment","localPaymentInstance","createLocalPaymentClickListener","emailField","preventDefault","getJSON","reqData","assign","createRequestData","onPaymentStart","_","start","correlationId","processingMsg","finalProcessingMsg","paymentConfirmUrl","lpmName","jQuery","isEmptyObject","correlation_id","text","message","responseText","dataset","localPaymentMethodName","shippingData","recipientName","paymentType","fallback","fallbackUrl","buttonText","address","updateShippingData","localIns","updateShippingAddress","helper","applepayHelper","creditcardPayment","creditCardFields","creditCardAccount","minicartHelper","paypalAccount","paypalPayment","paypalSavedAccountHandler","local","orderStage","getElementById","pageState","sessionStorage","getItem","$form","$cartPage","$continueButton","$summaryDetails","$addCreditCardForm","$paypalContent","$creditCardContent","$applepayContent","$braintreePaypalNonce","$minicartPopover","$creditCardList","$staticPaypalButton","venmoAccount","venmoPayment","$venmoContent","googlePayAccount","googlepayPayment","$googlepayContent","$googlepayOnCart","$addGooglePayAccountForm","$braintreeGooglePayNonce","braintreeSrc","srcAccount","$addSrcAccountForm","$srcContent","$braintreeSrcNonce","$srcOnCart","NodeList","Array","bubbles","cancelable","undefined","evt","createEvent","initCustomEvent","Event","initWathcherCartUpdate","initAccountAddCreditCard","initAddGooglePayAccount","initAddSrcAccount","miniCartButton","observer","observe","childList","paymentMethodChangeHandle","makePaypalPayment","initCreditCardFields","initCardListAndSaveFunctionality","doNotAllowSubmitForm","continueButtonToggle","setTimeout","hide3DSecureContainer","isTrusted","makeCreditCardPayment","makeVenmoPayment","makeGooglepayPayment","initSrcButton","target","cardList","paypalList","changeEvent","hash","initEvent","updateCheckoutView","updatePaymentMethodTab","removeItem","paypalStaticPdpButtonHandler","staticImageHandler","initPayPalEvents","initVenmoEvents","initCardEvents","initPaypalButtonsEvents","initVenmoButtonsEvents","pid","uuid","removeFromCartUrl","$price","sdkUrlConfiguration","isZeroAmount","$braintreePDPButton","$miniCartQuantity","$addToCartButton","$paypalCartButton","$paypalBillingButton","$braintreePaypalRiskDataInput","$loaderContainer","riskData","parseInt","hidePDPButton","paypalCheckout","paypalCheckoutInstance","disabled","showPDPButton","res","pdpOnlickForAsignedPaypalPayment","cart","pliUUID","actionUrls","removeProductLineItemUrl","parseFloat","totals","grandTotal","Error","createPayment","paypalButtonConfig","locale","onApprove","intent","tokenizePayment","onCancel","a","b","urlParams","appendToUrl","spinner","stop","onError","productID","actions","reject","flow","createOrder","components","commit","createBillingAgreement","vault","paypalConfig","isPayPalSDKLoaded","loadPayPalSDK","Buttons","render","shippingAddressOverride","loadSrcButton","$braintreeSrcDeviceDataInput","visaCheckout","srcPaymentErr","visaCheckoutInstance","baseInitOptions","subtotal","settings","cardBrands","acceptCanadianVisaDebit","initOptions","createInitOptions","shipping","collectShipping","V","tokenizeErr","billingAddressString","userData","userEmail","isDebugMode","consoleLog","consoleError","apply","arguments","$bundleItem","getOptions","$productContainer","find","map","$elOption","urlValue","val","selectedValueId","optionId","toArray","closest","form","quantity","items","childProducts","method","async","responseJSON","getSelectedData","selectEl","getElementsByTagName","option","i","selected","attributes","postData","formData","FormData","key","errorInstances","containerElement","callback","push","containerEl","msg","code","innerHTML","$braintreeVenmoRiskDataInput","createVenmo","isBrowserSupported","venmo","allowNewBrowserTab","allowDesktop","ignoreHistoryChanges","venmoErr","venmoInstance","deviceNotSupportVenmo","venmoAccountPage","processResultsDelay","handleVenmoError","handleVenmoSuccess","creditCard","submitCreditCardForm","submit","addCreditCardForm","attr","serialize","getShippingAdditionalInfo","orderAddress","workPhoneNumber","shippingGivenName","slice","shippingSurname","shippingPhone","line1","line2","$saveCreditCard","errorIns","errorData","invalidFieldKeys","braintreeType","cardOwnerUpdateClasses","setCardFields","cacheCardFields","cardNumbeberPh","cardCvvPh","cardExpirationPh","cardOwnerPh","showCardElements","cardFields","hideCardElements","getCardFieldsPH","getCardFields","cardListChange","$cardOwnerPh","$cardNumbeber","$cardNumbeberPh","$cardCvv","$cardCvvPh","$cardExpiration","$cardExpirationPh","$braintreeSaveCardContainer","$creditCardFieldsContainer","$braintree3DSecureContainer","changeCardOwnerInput","isSaveCard","checked","selectedOptions","id","updateSessionAccount","sessionOption","getSessionAccountOption","defaultOption","getOptionByDataDefault","cardFieldsPH","ccAccount","call","updateAccountsList","sessionAccount","newCCAccount","contains","isSavedCard","removeAttribute","allowSubmitForm","isActiveCreditCardTab","getNonceUrl","cardUUID","get","stopPropagation","googlepay","submitAddGooglePayAccountForm","$btFormErrorContainer","post","done","fail","$googlepayNonce","$btGooglePayLoader","googlepayIns","saving_paypal_account_error","$btGooglepayAccountsList","$googlepayButton","$saveGooglePayAccountCheckbox","$googlepayTab","showGooglepayAccount","$sessionAccount","$gpAccount","hideShowButtons","createGooglepayBillingAddressData","paymentMethodData","info","createGooglepayShippingAddressData","$googlepayCardDescription","$braintreeGooglepayPaymentType","$googlePayBillingAddress","googlepayNonce","googlepayPaymentType","googlepayCardDescription","shippingAddressData","googlepayCheckoutFormData","setItem","newGPAccount","sessionGPAccount","googlepayUpdateAmount","$grantTotal","currentGrantTotalValue","newGrantTotalValue","updateCartTotals","flag","stage","substring","currentTab","$tabContent","tab","getPaymentMethodToLowerCase","charAt","toLocaleLowerCase","$paymentSummary","htmlToAppend","order","billing","selectedPaymentInstruments","maskedCreditCardNumber","braintreePaypalEmail","braintreeVenmoUserId","priceTotal","field","checkValidity","braintreePaymentMethod","content","toLowerCase","children","reduce","accumulator","item","elem","lastIndexOf","isNonceExist","$nonce","nonceValue","$tab","isActiveTab","accountsLoader","removeBtPayment","UUID","newDefaultAccount","fontWeight","paymentFields","fieldsData","paymentFieldsParsed","entries","entry","setDefaultProperty","paymentMethodID","newDefaultProperty","toRemoveDefaultProperty","onclick","activePaymentMethods","methodId","helpers","PayPal","Venmo","GooglePay","CreditCard","SRC","ApplePay","activePM","addClass","scrollTo","$billingFormFields","braintreeLocal","$lpmButton","updateAmountData","payPal","$paypalMinicartButton","btnInstance","paypalCheckoutFormFields","createBillingAddressData","paypalCheckoutFormData","createShippingAddressData","paypalHandle","paypalIns","updateCartPaypalAmount","$totalPrice","MutationObserver","mutations","mutation","addedNodes","initAddPaypalAccount","$paypalErrorContainer","$paypalLoader","accountPaypalButton","paypalAddAccountHandler","paypalAccountFormFields","paypalBillingAddressData","paypalAccountFormData","addresses","hidePaypalAccountBtn","renderAccountsUrl","tplData","showPaypalAccountBtn","$addPaypalAccountBtn","$paypalAccountWrapper","$savePaypalAccountCountainer","$savePaypalAccountCheckbox","$braintreePayPalNonce","formValidationConrol","validateActions","enable","disable","getOptionByEmail","sessionEmail","setSessionAccountOptionDefault","savedDefaultOption","initAccountListAndSaveFunctionality","$accountsList","$alertInfo","accountsListChange","isSameSessionAccount","removeEventListener","inpShippingAddress","inpBillingAddress","param","newUrl","indexOf","encodeURIComponent","showPayPalAccount","braintreePaypalNonce","braintreePaypalAccount","$braintreePaypalAccountsList","customerAuthenticated","$paypalButton","$braintreePaypalNonceInput","$braintreePaypalEmail","$braintreePaypalBillingAddressInput","isSessionAccount","paypalBillingData","newPPAccount","validate","updateAmountAndShippingData","$paypalAddress","newPayPalAddress","ppAccountData","ppAccountAddressData","src","submitAddSrcAccountForm","$btSrcFormErrorContainer","srcIns","$srcNonce","$btSrcLoader","$srcSessionAccount","$srcAccountList","$srcButton","$accoutnListBlock","$saveSRCAccountCheckbox","srcUpdateAmount","setSessionAccountData","cardDescrition","updateSessionAccountDropdown","initSessionAccountDropdownState","createSrcShippingAddressData","srcHelper","$srcCardDescription","$srcBillingAddress","cardDescription","description","scrPayBillingData","srcCheckoutFormData","userFirstName","userLastName","bind","braintreeVenmo","venmoHelper","initAddVenmoAccount","$venmoErrorContainer","$venmoLoader","showVenmoAccountError","VENMO_BROWSER_NOT_SUPPORTED","accountVenmoButton","venmoAddAccountHandler","venmoAccountFormFields","venmoAccountFormData","hideVenmoAccountBtn","$addVenmoAccountBtn","showVenmoAccountBtn","$saveVenmoAccountCountainerEl","$saveVenmoAccountEl","$venmoButton","$braintreeVenmoAccount","$venmoAccount","$braintreeVenmoUserId","$venmoAccountWrapper","showVenmoAccount","createLoaderContainter","$target","hideVenmoButton","parentElement","firstElementChild","updateBillingAddressFormValues","inputNames","each","decodeURIComponent","$btVermoAccountsList","$braintreeVenmoNonce","$submitShippingBtn","$contactEmail","$hideVenmoButton","$billingForm","username","history","hashChange","attributeName","checkoutStage","oldValue","attributeOldValue"],"mappings":"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","file":"int_braintree.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./cartridges/int_braintree_sfra/cartridge/client/default/js/int_braintree.js\");\n","'use strict';\n\nmodule.exports = function (element) {\n    var position = element && element.length ? element.offset().top : 0;\n    $('html, body').animate({\n        scrollTop: position\n    }, 500);\n    if (!element) {\n        $('.logo-home').focus();\n    }\n};\n","'use strict';\nvar applePay = require('../braintreeApplepay');\nvar {\n    isValidInputField,\n    removeActiveSessionPayment,\n    createPaymentFormData,\n    showCartErrorMsg,\n    updateBillingFormValues\n} = require('./../helper');\n\n\nvar $applePayButton = document.querySelector('.js_braintree_applepay_button');\nvar $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\nvar $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\nvar $emailField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $phoneField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]');\n\nfunction makeApplePayButtonDisabled() {\n    $applePayButton.classList.add('js_braintree_applepay_button_disabled');\n}\n\nfunction hideApplePayButton() {\n    $applepayButtonsWrap.style.display = 'none'; // Remove the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'none';\n    }\n}\n\nfunction showApplePayButton() {\n    $applepayButtonsWrap.style.display = 'block'; // Show the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'block';\n    }\n}\n\nfunction initApplepayButton() {\n    document.querySelectorAll('.js_braintree_applepay_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        $btn.addEventListener('braintree:deviceNotSupportApplePay', function () {\n            hideApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:deviceSupportApplePay', function () {\n            showApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n            makeApplePayButtonDisabled();\n        }, false);\n\n        config.isRequiredBillingContactFields = true;\n        config.isRequiredShippingContactFields = true;\n        var applePayIns = applePay.init(config, $btn);\n\n        $btn.addEventListener('click', function () {\n            applePayIns.startPayment();\n        });\n\n        function updateCartApplepayAmount() {\n            if (!applePayIns) {\n                return;\n            }\n            applePayIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    applePayIns.loader.hide();\n                    applePayIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n            return;\n        }\n        $('body').on('braintree:updateCartTotals', updateCartApplepayAmount);\n\n        $btn.addEventListener('braintree:ApplePayPaymentAuthorized', function (e) {\n            applePayIns.loader.show();\n            var responseData = e.detail.data;\n            var billingAddressData = responseData.billingAddress;\n\n            var paymentMethodName = JSON.parse($applePayButton.getAttribute('data-braintree-config')).paymentMethodName;\n            var $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n            var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n            var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n            var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n            var applePayCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n                firstName: billingAddressData.firstName,\n                lastName: billingAddressData.lastName,\n                address1: billingAddressData.streetAddress,\n                address2: billingAddressData.extendedAddress || '',\n                city: billingAddressData.locality,\n                postalCode: billingAddressData.postalCode,\n                stateCode: billingAddressData.state,\n                country: billingAddressData.countryCodeAlpha2,\n                email: billingAddressData.email,\n                phone: billingAddressData.phone,\n                paymentMethod: paymentMethodName\n            });\n\n            var csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n            applePayCheckoutFormData.append(csrfToken.name, csrfToken.value);\n            applePayCheckoutFormData.append('braintreeApplePayNonce', responseData.nonce);\n            applePayCheckoutFormData.append('braintreeApplePayDeviceDataInput', responseData.deviceData);\n            applePayCheckoutFormData.append('braintreeApplePayShippingAddress',\n            JSON.stringify(responseData.shippingAddress) || '{}'\n            );\n\n            $.ajax({\n                type: 'POST',\n                url: checkoutFromCartUrl,\n                data: applePayCheckoutFormData,\n                contentType: false,\n                processData: false,\n                success: function (data) {\n                    if (data.error) {\n                        var errorMessage = '';\n                        if (data.fieldErrors.length) {\n                            data.fieldErrors.forEach(function (error, index) {\n                                var keys = Object.keys(error);\n                                if (keys.length) {\n                                    errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                                }\n                            });\n                            showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.serverErrors.length) {\n                            data.serverErrors.forEach(function (error) {\n                                errorMessage += `${error}. `;\n                            });\n                            showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.cartError) {\n                            window.location.href = data.redirectUrl;\n                        }\n                        return;\n                    }\n\n                    window.location.href = placeOrderUrl;\n                },\n                error: function (err) {\n                    if (err && err.redirectUrl) {\n                        window.location.href = err.redirectUrl;\n                    }\n                }\n            });\n        }, false);\n\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nfunction applepayPayment(continueButton) {\n    var config = JSON.parse($applePayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($applePayButton, 'not valid data-braintree-config');\n    }\n    var applepayButton = $('.js_braintree_applepay_button');\n    applepayButton.on('braintree:deviceNotSupportApplePay', function () {\n        hideApplePayButton();\n    });\n    applepayButton.on('braintree:deviceSupportApplePay', function () {\n        showApplePayButton();\n    });\n    applepayButton.on('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n        makeApplePayButtonDisabled();\n    });\n\n    config.isRequiredBillingContactFields = true;\n    var applePayIns = applePay.init(config, $applePayButton);\n\n    function authorizedApplePayPayment(e) {\n        removeActiveSessionPayment();\n        applePayIns.loader.show();\n        document.querySelector(('#braintreeApplePayNonce')).value = e.detail.data.nonce;\n\n        // Updating Storefront Billing Form data with ApplePay Billing\n        var applePayBillingData = e.detail.data.billingAddress;\n        var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n        storeFrontBillingData.dwfrm_billing_addressFields_firstName = applePayBillingData.firstName;\n        storeFrontBillingData.dwfrm_billing_addressFields_lastName = applePayBillingData.lastName;\n        storeFrontBillingData.dwfrm_billing_addressFields_address1 = applePayBillingData.streetAddress;\n        storeFrontBillingData.dwfrm_billing_addressFields_address2 = applePayBillingData.extendedAddress || '';\n        storeFrontBillingData.dwfrm_billing_addressFields_city = applePayBillingData.locality;\n        storeFrontBillingData.dwfrm_billing_addressFields_postalCode = applePayBillingData.postalCode;\n        storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = applePayBillingData.state;\n        storeFrontBillingData.dwfrm_billing_addressFields_country = applePayBillingData.countryCodeAlpha2;\n        storeFrontBillingData.dwfrm_billing_contactInfoFields_email = applePayBillingData.email;\n        storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = applePayBillingData.phone;\n\n        updateBillingFormValues(storeFrontBillingData);\n        continueButton.click();\n    }\n\n    if (!applePayIns) return;\n    $applePayButton.addEventListener('click', function () {\n        if (isValidInputField($emailField) && isValidInputField($phoneField)) {\n            return applePayIns.startPayment();\n        }\n    });\n\n    applepayButton.on('braintree:ApplePayPaymentAuthorized', authorizedApplePayPayment);\n\n    function appleUpdateAmountData() { // eslint-disable-line no-inner-declarations\n        applePayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                applePayIns.loader.hide();\n                applePayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n    $('body').on('checkout:updateCheckoutView', appleUpdateAmountData);\n    appleUpdateAmountData();\n}\n\n/*\n    Remove method was used and change appearance of applepay tab\n**/\nfunction removeSessionNonce() {\n    document.querySelector('#braintreeApplePayNonce').value = '';\n    document.querySelector('#braintreeApplePayDeviceData').value = '';\n}\n\nmodule.exports = {\n    initApplepayButton,\n    applepayPayment,\n    removeSessionNonce\n};\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n/* global braintreeUtils braintree $ ApplePaySession */\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeApplePayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createApplePay = function () {\n    var that = this;\n    var params = that.params;\n    this.$braintreeApplePayDeviceDataInput = document.querySelector('input[name=braintreeApplePayDeviceDataInput]');\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        if (params.isFraudToolsEnabled) {\n            braintree.dataCollector.create({\n                client: clientInstance,\n                paypal: true\n            }, function (dataCollectorErr, dataCollectorInstance) {\n                if (dataCollectorErr) {\n                    that.er.show(dataCollectorErr);\n                    return;\n                }\n\n                if (that.$braintreeApplePayDeviceDataInput) {\n                    that.$braintreeApplePayDeviceDataInput.value = dataCollectorInstance.deviceData;\n                }\n                that.loader.hide();\n            });\n        }\n\n        braintree.applePay.create({\n            client: clientInstance\n        }, function (error, applePayInstance) {\n            loader.hide();\n            if (error) {\n                that.er.show(error);\n                return;\n            }\n            that.createApplePaySession = function () {\n                var paymentRequest = applePayInstance.createPaymentRequest({\n                    total: {\n                        label: params.options.displayName,\n                        amount: params.options.amount\n                    }\n                });\n                if (params.isRequiredBillingContactFields) {\n                    paymentRequest.requiredBillingContactFields = ['postalAddress', 'name'];\n                }\n                if (params.isRequiredShippingContactFields) {\n                    paymentRequest.requiredShippingContactFields = ['postalAddress', 'name', 'phone', 'email'];\n                }\n\n                var session = new ApplePaySession(1, paymentRequest);\n\n                session.onvalidatemerchant = function (event) {\n                    loader.show();\n                    applePayInstance.performValidation({\n                        validationURL: event.validationURL,\n                        displayName: params.options.displayName\n                    }, function (eventError, merchantSession) {\n                        loader.hide();\n                        if (eventError) {\n                            that.er.show(eventError);\n                            session.abort();\n                            return;\n                        }\n                        session.completeMerchantValidation(merchantSession);\n                    });\n                };\n                session.onpaymentauthorized = function (event) {\n                    loader.show();\n                    applePayInstance.tokenize({\n                        token: event.payment.token\n                    }, function (eventError, payload) {\n                        loader.hide();\n                        if (eventError) {\n                            that.er.show(eventError);\n                            session.completePayment(ApplePaySession.STATUS_FAILURE);\n                            return;\n                        }\n\n                        session.completePayment(ApplePaySession.STATUS_SUCCESS);\n\n                        var data = {\n                            event: event,\n                            payload: payload,\n                            nonce: payload.nonce,\n                            deviceData: document.querySelector('input[name=braintreeApplePayDeviceDataInput]').value\n                        };\n                        var shippingContact = event.payment.shippingContact;\n                        if (shippingContact) {\n                            data.shippingAddress = {\n                                streetAddress: shippingContact.addressLines[0],\n                                extendedAddress: shippingContact.addressLines[1],\n                                locality: shippingContact.locality,\n                                region: shippingContact.administrativeArea.toUpperCase(),\n                                postalCode: shippingContact.postalCode,\n                                countryCodeAlpha2: shippingContact.countryCode.toUpperCase(),\n                                firstName: shippingContact.givenName,\n                                lastName: shippingContact.familyName,\n                                phone: shippingContact.phoneNumber,\n                                email: shippingContact.emailAddress\n                            };\n                        } else {\n                            shippingContact = {\n                                emailAddress: document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]').value,\n                                phoneNumber: document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]').value\n                            };\n                        }\n\n                        var billingContact = event.payment.billingContact;\n                        if (billingContact) {\n                            data.billingAddress = {\n                                streetAddress: billingContact.addressLines[0],\n                                extendedAddress: billingContact.addressLines[1],\n                                locality: billingContact.locality,\n                                region: billingContact.administrativeArea.toUpperCase(),\n                                postalCode: billingContact.postalCode,\n                                countryCodeAlpha2: billingContact.countryCode.toUpperCase(),\n                                firstName: billingContact.givenName,\n                                lastName: billingContact.familyName,\n                                email: shippingContact.emailAddress,\n                                phone: shippingContact.phoneNumber\n                            };\n                        }\n\n                        that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayPaymentAuthorized', {\n                            detail: {\n                                data: data\n                            }\n                        }));\n                    });\n                };\n                session.begin();\n            };\n            var promise = ApplePaySession.canMakePaymentsWithActiveCard(applePayInstance.merchantIdentifier);\n            promise.then(function (canMakePaymentsWithActiveCard) {\n                if (!canMakePaymentsWithActiveCard) {\n                    that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayCanNotMakePaymentWithActiveCard'));\n                    that.createApplePaySession = null;\n                    return;\n                }\n            });\n        });\n    });\n};\n\nConstructor.prototype.startPayment = function () {\n    this.er.hide();\n    if (this.createApplePaySession) {\n        this.createApplePaySession();\n    }\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        if (!window.ApplePaySession) {\n            $btn.dispatchEvent(new CustomEvent('braintree:deviceNotSupportApplePay'));\n            return false;\n        }\n        $btn.dispatchEvent(new CustomEvent('braintree:deviceSupportApplePay'));\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        ins.createApplePay();\n        return ins;\n    }\n};\n\n","/* eslint-disable block-scoped-var */\n'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar creditcardHelper = require('./creditcard/creditcardHelper');\n\n/* global braintreeUtils braintree $ */\n\nvar bu = braintreeUtils;\nvar er = null;\nvar loader;\nvar params;\n\nfunction createHostedFields() {\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            kount: true,\n            paypal: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                return;\n            }\n            document.querySelector('#braintreeDeviceData').value = data.deviceData;\n        });\n    }\n    loader.show();\n\n    braintree.hostedFields.create({\n        authorization: bu.clientToken,\n        styles: params.hostedFieldsStyles,\n        fields: params.hostedFieldsConfig\n    }, function (error, hostedFieldsInstance) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            return;\n        }\n        params.hostedFieldsInstance = hostedFieldsInstance;\n        hostedFieldsInstance.on('validityChange', function () {\n            if (params.continueButton && JSON.parse(params.continueButton.getAttribute('data-is-allow-submit-form'))) {\n                params.continueButton.setAttribute('data-is-allow-submit-form', false);\n            }\n        });\n    });\n}\n\nfunction isFormValid() {\n    if (params.data && params.data.amount === 0) {\n        er.show('Order total 0 is not allowed for Credit Card');\n        return false;\n    }\n    var $cardOwnerEl = document.querySelector('#braintreeCardOwner');\n    if ($cardOwnerEl.value.length === 0) {\n        $cardOwnerEl.parentNode.classList.add('braintree-hosted-fields-invalid');\n        er.show(params.messages.validation);\n        return false;\n    }\n    $cardOwnerEl.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    er.hide();\n\n    return true;\n}\n\nfunction clearHostedFields() {\n    params.hostedFieldsInstance.clear('number');\n    params.hostedFieldsInstance.clear('cvv');\n    params.hostedFieldsInstance.clear('expirationDate');\n}\n\nfunction check3dSecureAndSubmit(response, startTokenizeCb) {\n    if (!response.nonce || response.nonce === 'null') {\n        document.querySelector('#braintreeCreditCardNonce').value = 'null';\n        startTokenizeCb({\n            error: true,\n            errorCode: 'nonce_is_null'\n        });\n        return;\n    }\n    if (!params.is3dSecureEnabled) {\n        document.querySelector('#braintreeCreditCardNonce').value = response.nonce;\n        startTokenizeCb({\n            error: false,\n            errorCode: 'ok'\n        });\n        return;\n    }\n\n    loader.show();\n\n    var billingData = require('./helper').getBillingAddressFormValues();\n\n    braintree.threeDSecure.create({\n        authorization: bu.clientToken,\n        version: 2\n    }, function (error, threeDSecure) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            startTokenizeCb({\n                error: true,\n                errorCode: 'bt_3dsecure_create_error',\n                btError: error\n            });\n            return;\n        }\n        bu.threeDSecure = threeDSecure;\n        loader.show();\n        threeDSecure.verifyCard({\n            amount: params.data.amount,\n            nonce: response.nonce,\n            bin: response.details ? response.details.bin : '',\n            email: document.querySelector('#email').value,\n            billingAddress: {\n                givenName: billingData.firstName,\n                surname: billingData.lastName,\n                phoneNumber: billingData.phone,\n                streetAddress: billingData.address1,\n                extendedAddress: billingData.address2,\n                locality: billingData.city,\n                region: billingData.stateCode,\n                postalCode: billingData.postalCode,\n                countryCodeAlpha2: billingData.country\n            },\n            additionalInformation: params.data.shippingAdditionalInfo,\n            onLookupComplete: function (data, next) {\n                next();\n            }\n        }, function (err, data) {\n            loader.hide();\n            if (err) {\n                er.show(err);\n                startTokenizeCb({\n                    error: true,\n                    errorCode: 'bt_3dsecure_verify_error',\n                    btError: err\n                });\n                return;\n            }\n            if (data.liabilityShifted || params.isSkip3dSecureLiabilityResult) {\n                document.querySelector('#braintreeIs3dSecureRequired').value = 'true';\n                document.querySelector('#braintreeCreditCardNonce').value = data.nonce;\n                startTokenizeCb({\n                    error: false,\n                    result: 'ok'\n                });\n                return;\n            }\n            er.show(params.messages.secure3DFailed);\n            startTokenizeCb({\n                error: true,\n                result: 'secure3DFailed'\n            });\n            return;\n        });\n    });\n}\n/**\n * Creates tokenization options for 'tokenize' function.\n * @returns {Object} Object with tokenization options.\n */\nfunction createTokenizationOptions() {\n    var billingData = require('./helper').getBillingAddressFormValues();\n    return {\n        billingAddress: {\n            firstName: billingData.firstName,\n            lastName: billingData.lastName,\n            streetAddress: billingData.address1.split('%20').join(' '),\n            extendedAddress: billingData.address2 ? billingData.address2.split('%20').join(' ') : billingData.address2,\n            locality: billingData.city.includes('%20') ? billingData.city.split('%20').join(' ') : billingData.city,\n            region: billingData.stateCode,\n            postalCode: billingData.postalCode,\n            countryCodeAlpha2: billingData.country.includes('$20') ? billingData.country.split('%20').join(' ') : billingData.country\n        }\n    };\n}\n\nfunction startTokenize(cb, response) {\n    var tokenizationOptions;\n    if (response && response.nonce) {\n        check3dSecureAndSubmit(response, cb);\n        return;\n    }\n    if (!isFormValid()) {\n        cb({\n            error: true,\n            errorCode: 'fields_not_valid'\n        });\n        return;\n    }\n    loader.show();\n\n    if ($('#dwfrm_billing').length > 0) {\n        tokenizationOptions = createTokenizationOptions();\n    } else {\n        tokenizationOptions = {};\n    }\n\n    params.hostedFieldsInstance.tokenize(tokenizationOptions, function (error, data) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            cb({\n                error: true,\n                errorCode: 'bt_tokenize_error',\n                btError: error\n            });\n            return;\n        }\n        if (data.type === 'CreditCard') {\n            document.querySelector('#braintreeCardType').value = creditcardHelper.convertCardTypeToDwFormat(data.details.cardType);\n            document.querySelector('#braintreeCardMaskNumber').value = '************' + data.details.lastFour;\n            document.querySelector('#braintreeCardExpirationMonth').value = data.details.expirationMonth;\n            document.querySelector('#braintreeCardExpirationYear').value = data.details.expirationYear.substr(2);\n            var creditCardFieldsCardNumber = document.querySelector('input[name=dwfrm_billing_creditCardFields_cardNumber]');\n            if (creditCardFieldsCardNumber) {\n                creditCardFieldsCardNumber.value = '************' + data.details.lastFour;\n            }\n\n            if (document.querySelector('.form-group.braintree_used_creditcard_account')) {\n                var $cardOwner = document.querySelector('#braintreeCardOwner').getAttribute('data-new-cart-value');\n                document.querySelector('#braintreeCardOwnerPh').textContent = $cardOwner;\n                document.querySelector('#braintreeCardNumberPh').textContent = '************' + data.details.lastFour;\n                document.querySelector('#braintreeCvvPh').textContent = '***';\n                document.querySelector('#braintreeExpirationPh').textContent = data.details.expirationMonth + '/' + data.details.expirationYear.substr(2);\n\n                var selectedCard = document.querySelector('#braintreeSessionCreditAccount');\n                selectedCard.classList.remove('used-creditcard-account-hide');\n                selectedCard.setAttribute('data-number', '************' + data.details.lastFour);\n                selectedCard.setAttribute('data-expiration', data.details.expirationMonth + '/' + data.details.expirationYear.substr(2));\n                selectedCard.setAttribute('data-type', creditcardHelper.convertCardTypeToDwFormat(data.details.cardType));\n                selectedCard.setAttribute('data-owner', $cardOwner);\n                selectedCard.setAttribute('data-nonce', data.nonce);\n            }\n        }\n        check3dSecureAndSubmit(data, cb);\n    });\n}\n\nfunction init(initParams) {\n    params = initParams;\n    bu.clientToken = params.clientToken;\n}\n\nfunction initFields(initParams, $container) {\n    params = initParams;\n    params.$container = $container;\n\n    er = bu.createErrorInstance(document.querySelector('#braintreeCreditCardErrorContainer'), creditcardHelper.creditcardErrorContainer);\n    loader = loaderInstance(document.querySelector('#braintreeCreditCardLoader'));\n    bu.clientToken = params.clientToken;\n    $.extend(bu.messages, params.messages);\n\n    creditcardHelper.cardOwnerEvents();\n\n    function getHostedFieldsStyles() {\n        return {\n            input: {\n                'font-size': '12px',\n                color: '#b7802a'\n            },\n            ':focus': {\n                color: 'blue'\n            },\n            '.valid': {\n                color: 'green'\n            },\n            '.invalid': {\n                color: 'red'\n            }\n        };\n    }\n\n    function getHostedFieldsConfig() {\n        return {\n            number: {\n                selector: '#braintreeCardNumber'\n            },\n            cvv: {\n                selector: '#braintreeCvv'\n            },\n            expirationDate: {\n                selector: '#braintreeExpirationDate'\n            }\n        };\n    }\n\n    if (!params.hostedFieldsStyles) {\n        params.hostedFieldsStyles = getHostedFieldsStyles();\n    }\n\n    params.hostedFieldsConfig = getHostedFieldsConfig();\n\n    $.extend(params.hostedFieldsConfig, params.hostedFieldsAdvancedOptions);\n\n    createHostedFields();\n}\n\nmodule.exports = {\n    init,\n    initFields,\n    startTokenize,\n    isFormValid,\n    getHostedFieldInstance: function () {\n        return params ? params.hostedFieldsInstance : null;\n    },\n    updateData: function (data) {\n        params.data = data;\n    },\n    clearHostedFields\n};\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\nvar { showCartErrorMsg } = require('./helper');\n/* global braintreeUtils braintree $ Googlepay */\n\nvar bu = braintreeUtils;\nvar loader;\n\nvar $googlepayCartButton = document.querySelector('.braintree-cart-google-button');\nvar $googlepayBillingButton = document.querySelector('.braintree-billingpage-google-button');\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeGooglepayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createGooglepay = function () {\n    var that = this;\n    var params = that.params;\n    this.$braintreeGooglePayDeviceDataInput = document.querySelector('input[name=braintreeGooglePayDeviceDataInput]');\n\n    var paymentsClient = new google.payments.api.PaymentsClient({ // eslint-disable-line no-undef\n        environment: 'TEST' // Or 'PRODUCTION'\n    });\n\n    braintree.client.create({\n        authorization: params.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n        if (params.isFraudToolsEnabled) {\n            braintree.dataCollector.create({\n                client: clientInstance,\n                paypal: true\n            }, function (dataCollectorErr, dataCollectorInstance) {\n                if (dataCollectorErr) {\n                    that.er.show(dataCollectorErr);\n                    return;\n                }\n\n                if (that.$braintreeGooglePayDeviceDataInput) {\n                    that.$braintreeGooglePayDeviceDataInput.value = dataCollectorInstance.deviceData;\n                }\n                that.loader.hide();\n            });\n        }\n        braintree.googlePayment.create({\n            client: clientInstance,\n            googlePayVersion: 2\n        }, function (googlePaymentErr, googlePaymentInstance) {\n            if (googlePaymentErr) {\n                that.er.show(googlePaymentErr);\n                return;\n            }\n            var allowedPaymentMethods = googlePaymentInstance.createPaymentDataRequest().allowedPaymentMethods;\n            paymentsClient.isReadyToPay({\n                // see https://developers.google.com/pay/api/web/reference/object#IsReadyToPayRequest\n                apiVersion: 2,\n                apiVersionMinor: 0,\n                allowedPaymentMethods: allowedPaymentMethods\n            }).then(function (response) {\n                if (response.result) {\n                    function onGooglePaymentButtonClicked() { // eslint-disable-line no-inner-declarations\n                        if (params.options.amount === 0 && !params.options.isAccount) {\n                            var zeroAmountErrorMsg = 'Order total 0 is not allowed for GooglePay';\n                            if ($googlepayCartButton) showCartErrorMsg(zeroAmountErrorMsg);\n                            if ($googlepayBillingButton) paypalHelper.showCheckoutErrorMsg(zeroAmountErrorMsg);\n                            return;\n                        }\n                        loader.show();\n                        var paymentDataRequest = googlePaymentInstance.createPaymentDataRequest({\n                            transactionInfo: {\n                                currencyCode: params.options.currency,\n                                totalPriceStatus: 'FINAL',\n                                totalPrice: String(params.options.amount)\n                            },\n                            shippingAddressRequired: params.options.isShippingAddressRequired,\n                            shippingAddressParameters: {\n                                allowedCountryCodes: ['US'],\n                                phoneNumberRequired: true\n                            },\n                            emailRequired: true\n                        });\n                        var cardPaymentMethod = paymentDataRequest.allowedPaymentMethods[0];\n                        cardPaymentMethod.parameters.billingAddressRequired = true;\n                        cardPaymentMethod.parameters.billingAddressParameters = {\n                            format: 'FULL',\n                            phoneNumberRequired: true\n                        };\n                        paymentsClient.loadPaymentData(paymentDataRequest).then(function (paymentData) {\n                            googlePaymentInstance.parseResponse(paymentData, function (err, result) {\n                                if (err) {\n                                    loader.hide();\n                                    // Handle parsing error\n                                }\n                                params.onTokenizePayment(paymentData, result);\n                            });\n                            loader.hide();\n                        }).catch(function (err) {\n                            loader.hide();\n                            // eslint-disable-next-line no-console\n                            console.log(err);\n                        });\n                    }\n                    const button = paymentsClient.createButton({ onClick: onGooglePaymentButtonClicked });\n                    that.$btn.appendChild(button);\n                    loader.hide();\n                }\n            }).catch(function (err) {\n                loader.hide();\n                // eslint-disable-next-line no-console\n                console.log(err);\n            });\n        });\n        // Set up other Braintree components\n    });\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\nvar { isValidInputField } = require('./helper');\nvar scrollAnimate = require('base/components/scrollAnimate');\nconst errorText = 'An error occurred. Please try again later or choose different payment method.';\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'lpm-error';\n    var $loaderContainter = document.querySelector('.lpmLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createLocalPayment = function () {\n    var that = this;\n    var params = that.params;\n    // Create a client.\n    braintree.client.create({\n        authorization: params.clientToken\n    }).then(function (clientInstance) {\n        // Create a local payment component.\n        return braintree.localPayment.create({\n            client: clientInstance\n        });\n    }).then(function (localPaymentInstance) {\n        function createLocalPaymentClickListener(type) {\n            var emailField = document.querySelector('#email');\n            return function (event) {\n                event.preventDefault();\n                if (params.options.amount === 0) {\n                    paypalHelper.showCheckoutErrorMsg('Order total 0 is not allowed for ' + type);\n                    that.loader.hide();\n                    return;\n                }\n\n                if (emailField && emailField.value !== '' && !isValidInputField(emailField)) {\n                    that.loader.hide();\n                    return;\n                }\n\n                that.loader.show();\n                document.querySelector('.processingMsg').style.display = 'block';\n                $.getJSON(that.params.getOrderInfoUrl)\n                    .then(({ shippingAddress }) => {\n                        const reqData = Object.assign(createRequestData(\n                            shippingAddress, that.params, type),\n                            { onPaymentStart: (_, start) => start() });\n                        // Saving shippingAddress + email in a case if startPayment will return {} details object\n                        that.params.shippingAddress = shippingAddress;\n                        that.params.shippingAddress.email = emailField.value;\n\n                        localPaymentInstance.startPayment(reqData).then(({ nonce, details, correlationId }) => {\n                            var processingMsg = document.querySelector('.processingMsg');\n                            var finalProcessingMsg = document.querySelector('.finalProcessingMsg');\n                            processingMsg.style.display = 'none';\n                            finalProcessingMsg.style.display = 'block';\n                            return $.ajax({\n                                url: params.paymentConfirmUrl,\n                                type: 'POST',\n                                contentType: 'application/json',\n                                data: JSON.stringify({\n                                    nonce: nonce,\n                                    lpmName: type,\n                                    details: jQuery.isEmptyObject(details) ? that.params.shippingAddress : details,\n                                    deviceData: JSON.stringify({ correlation_id: correlationId })\n                                })\n                            });\n                        }).then(({ redirectUrl }) => {\n                            that.loader.hide();\n                            window.location.href = redirectUrl;\n                        }).catch(function (err) {\n                            that.loader.hide();\n                            $('.error-message').show();\n                            $('.error-message-text').text(err.message);\n                            scrollAnimate($('.error-message'));\n                        });\n                    })\n                    .catch(function (err) {\n                        if (err.responseText !== '') { errorText = err.responseText; }\n                        that.loader.hide();\n                        $('.error-message').show();\n                        $('.error-message-text').text(errorText);\n                        scrollAnimate($('.error-message'));\n                    });\n            };\n        }\n        var paymentMethod = that.$btn.dataset.localPaymentMethodName;\n        that.$btn.addEventListener('click', createLocalPaymentClickListener(paymentMethod));\n    });\n};\n\nfunction createRequestData(shippingData, params, type) {\n    var email = document.querySelector('#email').value;\n    var recipientName = shippingData.recipientName.split(' ');\n    shippingData.firstName = recipientName[0];\n    shippingData.lastName = recipientName[1];\n    return {\n        paymentType: type,\n        amount: params.options.amount,\n        fallback: {\n            url: params.fallbackUrl + '?lpmName=' + type + '&email=' + email,\n            buttonText: 'Complete Payment'\n        },\n        currencyCode: params.options.currency,\n        shippingAddressRequired: false,\n        email: email,\n        phone: shippingData && shippingData.phone,\n        givenName: shippingData && shippingData.firstName,\n        surname: shippingData && shippingData.lastName,\n        address: {\n            countryCode: shippingData && shippingData.countryCode\n        }\n    };\n}\nConstructor.prototype.updateShippingData = function () {\n    var localIns = this;\n    localIns.loader.show();\n    return $.getJSON(localIns.params.getOrderInfoUrl);\n};\n\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    if (data) {\n        var recipientName = data.recipientName.split(' ');\n        data.firstName = recipientName[0];\n        data.lastName = recipientName[1];\n        this.shippingData = data;\n    }\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","'use strict';\n\nmodule.exports = function () {\n    /* global braintreeUtils braintree $ */\n    var helper = require('./helper');\n    var applepayHelper = require('./applepay/applepayHelper');\n    var creditcardHelper = require('./creditcard/creditcardHelper');\n    var creditcardPayment = require('./creditcard/creditcardPayment');\n    var creditCardFields = require('./creditcard/creditcardFields');\n    var creditCardAccount = require('./creditcard/creditcardAccount');\n    var minicartHelper = require('./paypal/minicartHelper');\n    var paypalAccount = require('./paypal/paypalAccount');\n    var paypalPayment = require('./paypal/paypalPayment');\n    var paypalSavedAccountHandler = require('./paypal/paypalSavedAccountHandler');\n    var local = require('./local/localPayment'); // eslint-disable-line no-unused-vars\n    var orderStage = document.getElementById('checkout-main');\n    var pageState = sessionStorage.getItem('pageState');\n\n    var $form = document.querySelector('#dwfrm_billing'); // eslint-disable-line no-unused-vars\n    var $cartPage = document.querySelectorAll('.cart-page');\n    var $continueButton = document.querySelector('button.submit-payment');\n    var $summaryDetails = document.querySelector('.summary-details .payment-details');\n    var $addCreditCardForm = document.querySelector('.js_braintree_addCreditCardForm');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $creditCardContent = document.querySelector('.js_braintree_creditCardContent');\n    var $applepayContent = document.querySelector('.js_braintree_applepayContent');\n    var $braintreePaypalNonce = document.querySelector('#braintreePayPalNonce');\n    var $minicartPopover = document.querySelector('.minicart .popover');\n    var $creditCardList = document.querySelector('#braintreeCreditCardList');\n    var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n\n    var venmoAccount = require('./venmo/venmoAccount');\n    var venmoPayment = require('./venmo/venmoPayment');\n    var $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\n    var googlePayAccount = require('./googlepay/googlepayAccount');\n    var googlepayPayment = require('./googlepay/googlepayPayment');\n    var $googlepayContent = document.querySelector('.js_braintree_googlepayContent');\n    var $googlepayOnCart = document.querySelector('.braintree-cart-google-button');\n    var $addGooglePayAccountForm = document.querySelector('.js_braintree_addGooglePayAccountForm');\n    var $braintreeGooglePayNonce = document.querySelector('#braintreeGooglePayNonce');\n\n    var braintreeSrc = require('./src/srcPayment');\n    var srcAccount = require('./src/srcAccount');\n    var $addSrcAccountForm = document.querySelector('.js_braintree_addSrcAccountForm');\n    var $srcContent = document.querySelector('.js_braintree_srcContent');\n    var $braintreeSrcNonce = document.querySelector('#braintreeSRCNonce');\n    var $srcOnCart = document.querySelector('.braintree-cart-src-button');\n\n    if (window.NodeList && !NodeList.prototype.forEach) {\n        NodeList.prototype.forEach = Array.prototype.forEach;\n    }\n\n    (function () {\n        if (typeof window.CustomEvent === 'function') return false; // If not IE\n\n        function CustomEvent(event, params) {\n            // eslint-disable-next-line no-param-reassign\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n    }());\n\n    if ($cartPage) {\n        helper.initWathcherCartUpdate();\n    }\n\n    if ($addCreditCardForm) {\n        creditCardAccount.initAccountAddCreditCard();\n    }\n\n    if ($addGooglePayAccountForm) {\n        googlePayAccount.initAddGooglePayAccount();\n    }\n    if ($addSrcAccountForm) {\n        srcAccount.initAddSrcAccount();\n    }\n\n    document.addEventListener('DOMContentLoaded', function () {\n        minicartHelper.miniCartButton();\n    });\n\n    if ($minicartPopover) {\n        minicartHelper.observer.observe($minicartPopover, { childList: true });\n    }\n\n    helper.paymentMethodChangeHandle(document.querySelector('.payment-options[role=tablist] a.active[data-toggle=\"tab\"]'));\n\n    if ($cartPage.length) {\n        applepayHelper.initApplepayButton();\n    }\n\n    if ($paypalContent) {\n        paypalPayment.makePaypalPayment($continueButton);\n    }\n\n    if ($creditCardContent) {\n        creditCardFields.initCreditCardFields();\n        creditcardHelper.initCardListAndSaveFunctionality();\n\n        $('body').on('checkout:updateCheckoutView', creditCardFields.updateData);\n\n        creditCardFields.updateData();\n\n        if ($creditCardList) {\n            $creditCardList.addEventListener('change', function () {\n                creditcardPayment.doNotAllowSubmitForm();\n            });\n        }\n        $('body').on('braintree:3dSecure_content_shown', function () {\n            helper.continueButtonToggle(false);\n        });\n\n        $('body').on('braintree:3dSecure_content_removed', function () {\n            setTimeout(function () {\n                creditcardPayment.hide3DSecureContainer();\n            }, 2000);\n        });\n\n        $continueButton.addEventListener('click', function (event) {\n            if (!event.isTrusted) {\n                return;\n            }\n\n            helper.removeActiveSessionPayment();\n            creditcardPayment.makeCreditCardPayment(event);\n        });\n    }\n\n    if ($applepayContent) {\n        applepayHelper.applepayPayment($continueButton);\n    }\n\n    if ($venmoContent) {\n        venmoPayment.makeVenmoPayment($continueButton);\n    }\n\n    if ($googlepayContent || $googlepayOnCart) {\n        googlepayPayment.makeGooglepayPayment($continueButton);\n    }\n\n    if ($srcContent || $srcOnCart) {\n        braintreeSrc.initSrcButton($continueButton);\n    }\n\n    $('.payment-options[role=tablist] a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n        helper.paymentMethodChangeHandle(e.target);\n        const cardList = document.getElementById('braintreeCreditCardList');\n        const paypalList = document.getElementById('braintreePaypalAccountsList');\n        var changeEvent;\n\n        if (e.target.hash === '#creditcard-content' && cardList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                cardList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            cardList.dispatchEvent(changeEvent);\n        } else if (e.target.hash === '#paypal-content' && paypalList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                paypalList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            paypalList.dispatchEvent(changeEvent);\n        }\n    });\n\n    if ($summaryDetails) {\n        $summaryDetails.classList.add('braintree-payment-details');\n        $summaryDetails.classList.remove('payment-details');\n    }\n\n    $('body').on('checkout:updateCheckoutView', helper.updateCheckoutView);\n\n    if ((pageState && pageState === 'cart') &&\n        orderStage && orderStage.getAttribute('data-checkout-stage') === 'placeOrder') {\n        helper.updatePaymentMethodTab();\n        sessionStorage.removeItem('pageState');\n    }\n\n    if ($braintreePaypalNonce && $braintreePaypalNonce.value !== '') {\n        document.querySelector('.paypal-tab').click();\n    }\n\n    if ($braintreeGooglePayNonce && $braintreeGooglePayNonce.value !== '') {\n        document.querySelector('.googlepay-tab').click();\n    }\n\n    if ($braintreeSrcNonce && $braintreeSrcNonce.value !== '') {\n        document.querySelector('.src-tab').click();\n    }\n\n    if ($staticPaypalButton) {\n        paypalSavedAccountHandler.paypalStaticPdpButtonHandler();\n        $staticPaypalButton.addEventListener('click', paypalSavedAccountHandler.staticImageHandler);\n    }\n\n    // My account page\n    if (document.querySelector('.add-paypal-account')) {\n        paypalAccount.initPayPalEvents();\n    }\n    if (document.querySelector('.add-venmo-account')) {\n        venmoAccount.initVenmoEvents();\n    }\n    if (document.querySelector('.creditCard-accounts')) {\n        helper.initCardEvents();\n    }\n\n    if (document.querySelector('.paypal-accounts')) {\n        paypalAccount.initPaypalButtonsEvents();\n    }\n    if (document.querySelector('.venmo-accounts')) {\n        venmoAccount.initVenmoButtonsEvents();\n    }\n};\n","/* eslint-disable no-inner-declarations */\n/* eslint-disable new-cap */\n'use strict';\n\n/* global braintreeUtils braintree paypal $ */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\nvar { showCartErrorMsg } = require('./helper');\n\nvar bu = braintreeUtils;\nvar console = bu.console;\n\nvar pid;\nvar uuid;\nvar removeFromCartUrl;\nvar loader;\nvar $price;\nvar sdkUrlConfiguration;\nvar isZeroAmount = false;\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\nvar $miniCartQuantity = document.querySelector('.minicart-quantity');\nvar $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\nvar $paypalCartButton = document.querySelector('.js_braintree_paypal_cart_button');\nvar $paypalBillingButton = document.querySelector('.js_braintree_paypal_billing_button');\n\nfunction Constructor(initParams, $btn) {\n    var params = initParams;\n    this.params = initParams;\n    params.options = params.options || {};\n\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n\n    if (params.$errorContainer) {\n        $errorContainer = params.$errorContainer;\n        delete params.$errorContainer;\n    }\n\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var $braintreePaypalRiskDataInput = document.querySelector('input[name=braintreePaypalRiskData]');\n\n    if (params.$loaderContainer) {\n        $loaderContainter = params.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    var that = this;\n\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            paypal: true,\n            kount: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                console.log(error);\n                return;\n            }\n            if ($braintreePaypalRiskDataInput) {\n                $braintreePaypalRiskDataInput.value = data.deviceData;\n            }\n            params.riskData = data.deviceData;\n        });\n    }\n\n    if ($braintreePDPButton) {\n        $price = document.querySelector('.price .sales .value');\n        // Check minicart quantity and hide PDPbutton if it is not empty\n        if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\n            || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\n            paypalHelper.hidePDPButton($braintreePDPButton);\n        }\n    }\n\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }).then(function (clientInstance) {\n        return braintree.paypalCheckout.create({\n            client: clientInstance\n        });\n    }).then(function (paypalCheckoutInstance) {\n        if ($braintreePDPButton) {\n            if ($addToCartButton.disabled) {\n                paypalHelper.hidePDPButton($braintreePDPButton);\n            }\n            $('body').on('cart:update', function () {\n                $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                if ($addToCartButton.disabled) {\n                    paypalHelper.hidePDPButton($braintreePDPButton);\n                }\n                if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                    paypalHelper.showPDPButton($braintreePDPButton);\n                }\n            });\n\n            $('body').on('product:afterAddToCart', function () {\n                paypalHelper.hidePDPButton($braintreePDPButton);\n            });\n\n            // Update addToCart button status\n            $('body').on('product:statusUpdate', function () {\n                $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                $price = document.querySelector('.price .sales .value');\n                isZeroAmount = false;\n                if ($braintreePDPButton && $price) {\n                    isZeroAmount = $price.getAttribute('content') === '0.00';\n                }\n\n                if ($miniCartQuantity === 0) {\n                    if ($addToCartButton.disabled || isZeroAmount) {\n                        paypalHelper.hidePDPButton($braintreePDPButton);\n                    }\n                    if (!$addToCartButton.disabled && !isZeroAmount) {\n                        paypalHelper.showPDPButton($braintreePDPButton);\n                    }\n                }\n            });\n        }\n\n        var payment = function () {\n            if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                that.er.hide();\n                var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n                if (res.cart) {\n                    uuid = res.pliUUID;\n                    removeFromCartUrl = res.cart.actionUrls.removeProductLineItemUrl;\n                    pid = res.pid;\n                    that.params.options.amount = parseFloat(res.cart.totals.grandTotal.replace(/\\$|,/g, ''));\n                } else {\n                    throw new Error(res.message || 'Error occurs');\n                }\n            }\n            return paypalCheckoutInstance.createPayment(that.params.options);\n        };\n\n        var paypalButtonConfig = {\n            locale: params.options.locale,\n            onApprove: function (data) {\n                if (params.options.intent === 'order') {\n                    data.intent = 'order';\n                }\n                return paypalCheckoutInstance.tokenizePayment(data).then(function (payload) {\n                    params.onTokenizePayment(payload, that);\n                });\n            },\n            onCancel: function (a, b) {\n                if (typeof params.options.onCancel === 'function') {\n                    params.options.onCancel(a, b);\n                }\n                if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                    var urlParams = {\n                        pid: pid,\n                        uuid: uuid\n                    };\n\n                    $.ajax({\n                        url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                        type: 'get',\n                        dataType: 'json',\n                        success: function () {\n                            $.spinner().stop();\n                        },\n                        error: function () {\n                            $.spinner().stop();\n                        }\n                    });\n                }\n            },\n            onError: function (err) {\n                that.er.show(err.message.split(/\\r?\\n/g)[0]);\n\n                if ($braintreePDPButton && $braintreePDPButton.style.display === '' && pid) {\n                    var productID = pid;\n                    var urlParams = {\n                        pid: productID,\n                        uuid: uuid\n                    };\n\n                    $.ajax({\n                        url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                        type: 'get',\n                        dataType: 'json',\n                        success: function () {\n                            $.spinner().stop();\n                        },\n                        error: function () {\n                            $.spinner().stop();\n                        }\n                    });\n                }\n            }\n        };\n\n        isZeroAmount = that.params.options.amount === 0;\n        if (isZeroAmount) {\n            var zeroAmountErrorMsg = 'Order total 0 is not allowed for PayPal';\n            paypalButtonConfig.onClick = function (_, actions) {\n                if ($paypalCartButton) showCartErrorMsg(zeroAmountErrorMsg);\n                if ($paypalBillingButton) paypalHelper.showCheckoutErrorMsg(zeroAmountErrorMsg);\n                return actions.reject();\n            };\n        }\n\n        if (params.options && params.options.flow === 'checkout') {\n            paypalButtonConfig.createOrder = payment;\n            sdkUrlConfiguration = {\n                intent: params.options.intent,\n                currency: params.options.currency,\n                components: 'buttons,messages',\n                commit: false\n            };\n        } else {\n            paypalButtonConfig.createBillingAgreement = payment;\n            sdkUrlConfiguration = {\n                vault: true,\n                components: 'buttons,messages'\n            };\n        }\n\n        paypalButtonConfig = $.extend(false, paypalButtonConfig, that.params.paypalConfig);\n        loader.hide();\n\n        if (!window.isPayPalSDKLoaded) {\n            paypalCheckoutInstance.loadPayPalSDK(sdkUrlConfiguration).then(function () {\n                window.isPayPalSDKLoaded = true;\n                return paypal.Buttons(paypalButtonConfig).render(that.$btn);\n            });\n        } else {\n            return paypal.Buttons(paypalButtonConfig).render(that.$btn);\n        }\n    }).catch(function (err) {\n        console.error('Error!', err);\n        loader.hide();\n    });\n}\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    this.params.options.shippingAddressOverride = data;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-undef */\n'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeSrcLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.loadSrcButton = function () {\n    var that = this;\n    var params = that.params;\n    this.$braintreeSrcDeviceDataInput = document.querySelector('input[name=braintreeSrcDeviceDataInput]');\n\n    that.loader.show();\n    braintree.client.create({\n        authorization: params.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            that.loader.hide();\n            return;\n        }\n        if (params.isFraudToolsEnabled) {\n            braintree.dataCollector.create({\n                client: clientInstance,\n                paypal: true\n            }, function (dataCollectorErr, dataCollectorInstance) {\n                if (dataCollectorErr) {\n                    that.er.show(dataCollectorErr);\n                    return;\n                }\n\n                if (that.$braintreeSrcDeviceDataInput) {\n                    that.$braintreeSrcDeviceDataInput.value = dataCollectorInstance.deviceData;\n                }\n                that.loader.hide();\n            });\n        }\n        braintree.visaCheckout.create({\n            client: clientInstance\n        }, function (srcPaymentErr, visaCheckoutInstance) {\n            if (srcPaymentErr) {\n                that.er.show(srcPaymentErr);\n                that.loader.hide();\n                return;\n            }\n            var baseInitOptions = {\n                paymentRequest: {\n                    currencyCode: 'USD',\n                    subtotal: params.options.amount\n                },\n                settings: {\n                    locale: params.settings.locale,\n                    payment: {\n                        cardBrands: params.settings.cardBrands,\n                        acceptCanadianVisaDebit: params.settings.acceptCanadianVisaDebit\n                    }\n                }\n            };\n\n            var initOptions = visaCheckoutInstance.createInitOptions(baseInitOptions);\n            initOptions.settings.shipping = {\n                collectShipping: params.options.isShippingAddressRequired\n            };\n            V.init(initOptions);\n            that.loader.hide();\n            V.on('payment.success', function (payment) {\n                visaCheckoutInstance.tokenize(payment, function (tokenizeErr, payload) {\n                    if (tokenizeErr) {\n                        // eslint-disable-next-line no-console\n                        console.error('Error during Visa Checkout tokenization', tokenizeErr);\n                    } else {\n                        var billingAddress = payload.billingAddress;\n                        payload.billingAddressString = JSON.stringify({\n                            recipientName: (billingAddress.firstName + ' ' + billingAddress.lastName),\n                            phone: billingAddress.phoneNumber,\n                            countryCodeAlpha2: billingAddress.countryCode,\n                            streetAddress: billingAddress.streetAddress,\n                            extendedAddress: billingAddress.streetAddress,\n                            locality: billingAddress.locality,\n                            region: billingAddress.region,\n                            postalCode: billingAddress.postalCode,\n                            email: payload.userData.userEmail\n                        });\n                        params.onTokenizePayment(payload);\n                    }\n                });\n            });\n        });\n    });\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","'use strict';\n\n/* global braintree $ */\n/* eslint no-console: 'off' */\n\nvar isDebugMode = true;\nif (console && isDebugMode) {\n    var consoleLog = console.log;\n    var consoleError = console.error;\n    console.log = function () {\n        consoleLog.apply(console, arguments);\n    };\n    console.error = function () {\n        consoleError.apply(console, arguments);\n    };\n} else {\n    console = { // eslint-disable-line no-global-assign\n        log: function () { },\n        error: function () { }\n    };\n}\n\nvar bu = {\n    pdpOnlickForAsignedPaypalPayment: function () {\n        var $bundleItem = $('.bundle-item');\n        function getOptions($productContainer) {\n            var options = $productContainer\n                .find('.product-option')\n                .map(function () {\n                    var $elOption = $(this).find('.options-select');\n                    var urlValue = $elOption.val();\n                    var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                        .data('value-id');\n                    return {\n                        optionId: $(this).data('option-id'),\n                        selectedValueId: selectedValueId\n                    };\n                }).toArray();\n\n            return JSON.stringify(options);\n        }\n\n        var pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n        var $btn = $('.braintree_pdp_button');\n        var $productContainer = $btn.closest('.product-detail');\n\n        var form = {\n            pid: pid,\n            quantity: $('.quantity-select').val()\n        };\n\n        if (!$bundleItem.length) {\n            form.options = getOptions($productContainer);\n        } else {\n            var items = $bundleItem.map(function () {\n                return {\n                    pid: $(this).find('.product-id').text(),\n                    quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n                };\n            });\n            form.childProducts = JSON.stringify(items.toArray());\n        }\n        var response = $.ajax({\n            url: $('.add-to-cart-url').val(),\n            method: 'POST',\n            async: false,\n            data: form\n        }).responseJSON;\n        response.pid = pid;\n        return response;\n    },\n\n    getSelectedData: function (selectEl) {\n        if (!selectEl) {\n            return null;\n        }\n        var options = selectEl.getElementsByTagName('option');\n        var option = null;\n        for (var i = 0; i < options.length; i++) {\n            option = options[i];\n            if (option.selected) {\n                break;\n            }\n        }\n        return option.attributes;\n    },\n\n    postData: function (url, data) {\n        var formData = new FormData();\n\n        for (var key in data) {\n            formData.append(key, data[key]);\n        }\n        $.ajax({\n            url: url,\n            data: formData,\n            processData: false,\n            contentType: false,\n            type: 'POST',\n            success: function (res) {\n                window.location.href = res.redirectUrl;\n            },\n            error: function () {\n                location.reload();\n            }\n        });\n    },\n\n    messages: {},\n\n    errorInstances: [],\n    createErrorInstance: function (containerElement, callback) {\n        if (!containerElement) {\n            console.error('Braintree: No container for showing erros');\n        }\n        function Constructor(cb) {\n            bu.errorInstances.push(this);\n            this.containerEl = containerElement;\n            this.cb = typeof cb === 'function' ? cb : function () { };\n        }\n        Constructor.prototype.show = function (error) {\n            var text = '';\n            if (typeof error === 'string') {\n                text = error;\n            }\n            if (typeof error === 'object') {\n                var msg = bu.messages[error.code];\n                text = msg || error.message;\n                this.cb(this, error);\n                if (error.code === 'PAYPAL_POPUP_CLOSED') {\n                    return;\n                }\n            }\n            this.containerEl.style.display = '';\n            this.containerEl.innerHTML = text;\n        };\n        Constructor.prototype.hide = function () {\n            this.containerEl.innerHTML = '';\n        };\n        return new Constructor(callback);\n    },\n    clientToken: null\n};\n\nbu.console = console;\n\nmodule.exports = bu;\n\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n\nvar bu = braintreeUtils;\n\nfunction Constructor(initParams, $btn) {\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'venmo-error';\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'braintree-loader';\n    this.$braintreeVenmoRiskDataInput = document.querySelector('input[name=braintreeVenmoRiskData]');\n\n    this.$btn = $btn;\n    this.params = initParams;\n\n    if (initParams.$errorContainer) {\n        $errorContainer = initParams.$errorContainer;\n        delete initParams.$errorContainer;\n    }\n\n    if (initParams.$loaderContainer) {\n        $loaderContainter = initParams.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    this.loader = loaderInstance($loaderContainter);\n}\n\nConstructor.prototype.createVenmo = function () {\n    var that = this;\n    var isBrowserSupported;\n    that.loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n            // Stop if there was a problem creating the client.\n            // This could happen if there is a network error or if the authorization\n            // is invalid.\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        braintree.dataCollector.create({\n            client: clientInstance,\n            paypal: true\n        }, function (dataCollectorErr, dataCollectorInstance) {\n            if (dataCollectorErr) {\n                that.er.show(dataCollectorErr);\n                return;\n            }\n\n            if (that.$braintreeVenmoRiskDataInput) {\n                that.$braintreeVenmoRiskDataInput.value = dataCollectorInstance.deviceData;\n            }\n            that.loader.hide();\n        });\n\n        isBrowserSupported = braintree.venmo.isBrowserSupported({\n            allowNewBrowserTab: false,\n            allowDesktop: true\n        });\n        // Verify browser support before proceeding.\n        if (isBrowserSupported) {\n            braintree.venmo.create({\n                client: clientInstance,\n                allowNewBrowserTab: false,\n                ignoreHistoryChanges: true,\n                allowDesktop: true\n            }, function (venmoErr, venmoInstance) {\n                if (venmoErr) {\n                    that.er.show(venmoErr);\n                    return;\n                }\n\n                // Verify browser support before proceeding.\n                if (!venmoInstance.isBrowserSupported()) {\n                    that.params.deviceNotSupportVenmo();\n                    that.loader.hide();\n                    return;\n                }\n\n                that.$btn.addEventListener('click', function () {\n                    if (!that.params.venmoAccountPage && !that.params.onClick()) {\n                        return;\n                    }\n                    venmoInstance.tokenize({ processResultsDelay: 10 }, function (tokenizeErr, payload) {\n                        that.loader.show();\n\n                        if (tokenizeErr) {\n                            handleVenmoError(tokenizeErr);\n                        } else {\n                            handleVenmoSuccess(payload);\n                        }\n                    });\n                    return;\n                });\n            });\n        } else {\n            that.params.deviceNotSupportVenmo();\n            that.loader.hide();\n            return;\n        }\n    });\n\n    function handleVenmoError(err) {\n        that.er.show(err);\n        that.loader.hide();\n    }\n    function handleVenmoSuccess(payload) {\n        that.er.hide();\n        that.params.onTokenizePayment(payload);\n        that.loader.hide();\n    }\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        return ins.createVenmo();\n    }\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\nvar creditCardFields = require('./creditcardFields');\n\nfunction submitCreditCardForm() {\n    $('.js_braintree_addCreditCardForm').submit(function (e) {\n        var addCreditCardForm = $(this);\n        creditCard.startTokenize(function (result) {\n            if (result.error) {\n                e.preventDefault();\n                return;\n            }\n            addCreditCardForm.spinner().start();\n            $.ajax({\n                url: addCreditCardForm.attr('action'),\n                type: 'post',\n                dataType: 'json',\n                data: addCreditCardForm.serialize(),\n                success: function (data) {\n                    addCreditCardForm.spinner().stop();\n                    if (!data.success) {\n                        document.querySelector('#braintreeCreditCardErrorContainer').textContent = data.error;\n                    } else {\n                        location.href = data.redirectUrl;\n                    }\n                },\n                error: function (err) {\n                    if (err.responseJSON.redirectUrl) {\n                        window.location.href = err.responseJSON.redirectUrl;\n                    }\n                    addCreditCardForm.spinner().stop();\n                }\n            });\n        });\n        return false;\n    });\n}\n\nfunction initAccountAddCreditCard() {\n    creditCardFields.initCreditCardFields();\n    submitCreditCardForm();\n}\n\nmodule.exports = {\n    initAccountAddCreditCard\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\n\nvar $continueButton = document.querySelector('button.submit-payment');\n\n/**\n * Gets required Additional shipping info for 3ds\n *\n * @param {Object} orderAddress - User's shipping address\n * @returns {Object} an object with required fields\n */\n\nfunction getShippingAdditionalInfo(orderAddress) {\n    return {\n        workPhoneNumber: orderAddress.phone,\n        shippingGivenName: orderAddress.recipientName.split(' ').slice(0, -1).join(' '),\n        shippingSurname: orderAddress.recipientName.split(' ').slice(-1).join(' '),\n        shippingPhone: orderAddress.phone,\n        shippingAddress: {\n            streetAddress: orderAddress.line1,\n            extendedAddress: orderAddress.line2,\n            locality: orderAddress.city,\n            region: orderAddress.state,\n            postalCode: orderAddress.postalCode,\n            countryCodeAlpha2: orderAddress.countryCode\n        }\n    };\n}\n\nfunction updateData() {\n    $.ajax({\n        url: document.querySelector('.js_braintree_getOrderInfoUrl').value,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            data.shippingAdditionalInfo = data.shippingAddress ? getShippingAdditionalInfo(data.shippingAddress) : null;\n            creditCard.updateData(data);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction initCreditCardFields() {\n    document.querySelectorAll('.js_braintree_creditCardFields').forEach(function (el) {\n        var $container = el;\n        if (JSON.parse($container.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($container.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, '.js_braintree_creditCardFields has not valid data-braintree-config');\n            return;\n        }\n        config.continueButton = $continueButton;\n        creditCard.initFields(config, $container);\n        $container.setAttribute('data-is-inited', true);\n    });\n}\n\nmodule.exports = {\n    initCreditCardFields,\n    getShippingAdditionalInfo,\n    updateData\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar bu = braintreeUtils;\nvar helper = require('../helper');\n\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\nvar $saveCreditCard = document.querySelector('#braintreeSaveCreditCard');\nvar $cardOwner = document.querySelector('#braintreeCardOwner');\n\nfunction creditcardErrorContainer(errorIns, errorData) {\n    var error = errorData;\n    if (error.details && error.details.invalidFieldKeys) {\n        for (var i = 0; i < error.details.invalidFieldKeys.length; i++) {\n            var key = error.details.invalidFieldKeys[i];\n            if (key === 'number') {\n                document.querySelector('#braintreeCardNumber').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'cvv') {\n                document.querySelector('#braintreeCvv').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'expirationDate') {\n                document.querySelector('#braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n            }\n        }\n    }\n    if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n        document.querySelector('#braintreeCardNumber, #braintreeCvv, #braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction convertCardTypeToDwFormat(braintreeType) {\n    switch (braintreeType) {\n        case 'American Express':\n            return 'Amex';\n        case 'MasterCard':\n            return 'Master';\n        default:\n            return braintreeType;\n    }\n}\n\nfunction cardOwnerUpdateClasses() {\n    var value = $cardOwner.value;\n    if (value.length <= parseInt($cardOwner.getAttribute('maxlength'), 10) && value.length !== 0) {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-valid');\n    } else {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-valid');\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction setCardFields(selectedCard, cacheCardFields) {\n    cacheCardFields.cardNumbeberPh.innerHTML = selectedCard['data-number'].value;\n    cacheCardFields.cardCvvPh.innerHTML = '***';\n    cacheCardFields.cardExpirationPh.innerHTML = selectedCard['data-expiration'].value;\n    cacheCardFields.cardOwnerPh.innerHTML = selectedCard['data-owner'].value;\n    $cardOwner.value = selectedCard['data-owner'].value;\n    document.querySelector('#braintreeCardType').value = selectedCard['data-type'].value;\n    document.querySelector('#braintreeCardMaskNumber').value = selectedCard['data-number'].value;\n}\n\nfunction showCardElements(cardFields) {\n    cardFields.forEach(function (el) {\n        el.style.display = '';\n    });\n}\n\nfunction hideCardElements(cardFields) {\n    cardFields.forEach(function (el) {\n        el.style.display = 'none';\n    });\n}\n\nfunction getCardFieldsPH() {\n    return [\n        document.querySelector('#braintreeCardOwnerPh'),\n        document.querySelector('#braintreeCardNumberPh'),\n        document.querySelector('#braintreeExpirationPh'),\n        document.querySelector('#braintreeCvvPh')\n    ];\n}\n\nfunction getCardFields() {\n    return [\n        document.querySelector('#braintreeCardOwner'),\n        document.querySelector('#braintreeExpirationDate'),\n        document.querySelector('#braintreeCardNumber'),\n        document.querySelector('#braintreeCvv')\n    ];\n}\n\nfunction cardListChange() {\n    var $cardOwnerPh = document.querySelector('#braintreeCardOwnerPh');\n    var $cardNumbeber = document.querySelector('#braintreeCardNumber');\n    var $cardNumbeberPh = document.querySelector('#braintreeCardNumberPh');\n    var $cardCvv = document.querySelector('#braintreeCvv');\n    var $cardCvvPh = document.querySelector('#braintreeCvvPh');\n    var $cardExpiration = document.querySelector('#braintreeExpirationDate');\n    var $cardExpirationPh = document.querySelector('#braintreeExpirationPh');\n    var $braintreeSaveCardContainer = document.querySelector('#braintreeSaveCardContainer');\n    var $creditCardFieldsContainer = document.querySelector('#braintreeCreditCardFieldsContainer');\n    var $braintree3DSecureContainer = document.querySelector('#braintree3DSecureContainer');\n    var changeCardOwnerInput;\n    var selectedCard;\n    var isSaveCard;\n    var cacheCardFields = {\n        cardNumbeberPh: $cardNumbeberPh,\n        cardCvvPh: $cardCvvPh,\n        cardExpirationPh: $cardExpirationPh,\n        cardOwnerPh: $cardOwnerPh\n    };\n    var nonce;\n    if ($cardOwner) {\n        if (typeof (Event) === 'function') {\n            changeCardOwnerInput = new Event('changeCardOwnerInput');\n            $cardOwner.addEventListener('changeCardOwnerInput', function () {\n                'change';\n            }, false);\n        } else {\n            changeCardOwnerInput = document.createEvent('Event');\n            changeCardOwnerInput.initEvent('changeCardOwnerInput', true, true);\n        }\n    }\n\n    if ($creditCardFieldsContainer) {\n        $creditCardFieldsContainer.style.display = '';\n    }\n    if ($braintree3DSecureContainer) {\n        $braintree3DSecureContainer.style.display = 'none';\n    }\n\n    document.querySelector('#braintreeCreditCardErrorContainer').textContent = '';\n\n    if ($creditCardList.value === 'newcard') {\n        hideCardElements(getCardFieldsPH());\n        $cardOwner.value = $cardOwner.getAttribute('data-new-cart-value');\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardNumbeber.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardCvv.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardExpiration.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardOwner.disabled = false;\n        showCardElements(getCardFields());\n        cardOwnerUpdateClasses();\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'block';\n            $saveCreditCard.checked = true;\n        }\n\n        document.querySelector('#braintreeCreditCardNonce').value = '';\n        document.querySelector('#braintreeCardPaymentMethod').value = $creditCardList[0].getAttribute('data-payment-method');\n    } else if ($creditCardList.selectedOptions[0].id === 'braintreeSessionCreditAccount') {\n        selectedCard = bu.getSelectedData($creditCardList);\n        nonce = selectedCard['data-nonce'].value;\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'block';\n            isSaveCard = JSON.parse(selectedCard['data-save-card'].value);\n            $braintreeSaveCardContainer.checked = isSaveCard;\n            $saveCreditCard.checked = isSaveCard;\n        }\n\n        if (nonce) {\n            document.querySelector('#braintreeCreditCardNonce').value = nonce;\n        }\n\n        setCardFields(selectedCard, cacheCardFields);\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.style.display = 'none';\n        showCardElements(getCardFieldsPH());\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    } else {\n        // case for saved card\n        selectedCard = bu.getSelectedData($creditCardList);\n        setCardFields(selectedCard, cacheCardFields);\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        showCardElements(getCardFieldsPH());\n        hideCardElements(getCardFields());\n        $cardOwner.disabled = true;\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'none';\n            $saveCreditCard.checked = false;\n        }\n\n        document.querySelector('#braintreeCreditCardNonce').value = '';\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    }\n}\n\nfunction initCardListAndSaveFunctionality() {\n    if ($creditCardList) {\n        $creditCardList.addEventListener('change', function () {\n            cardListChange();\n        });\n    }\n    cardListChange();\n}\n\nfunction cardOwnerEvents() {\n    $cardOwner.addEventListener('focus', function () {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('blur', function () {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('keyup', function () {\n        document.querySelector('#braintreeCardOwner').setAttribute('data-new-cart-value', $cardOwner.value);\n        cardOwnerUpdateClasses();\n    });\n    $cardOwner.addEventListener('change', function () {\n        cardOwnerUpdateClasses();\n    });\n}\n\n/*\n    Update Session account\n**/\nfunction updateSessionAccount() {\n    var sessionOption = helper.getSessionAccountOption({\n        querySelector: '#braintreeCreditCardList',\n        id: 'braintreeSessionCreditAccount'\n    });\n    if (!sessionOption) { return; }\n\n    sessionOption.selected = false;\n    sessionOption.classList.add('used-creditcard-account-hide');\n    sessionOption.classList.remove('used-creditcard-account');\n    sessionOption.text = '';\n    sessionOption.setAttribute('data-session-account', false);\n    sessionOption.setAttribute('data-owner', false);\n    sessionOption.setAttribute('data-expiration', false);\n    sessionOption.setAttribute('data-number', false);\n    sessionOption.setAttribute('data-nonce', false);\n    sessionOption.setAttribute('data-type', false);\n    sessionOption.setAttribute('data-save-card', false);\n}\n\n/*\n    Check if creditcard method was used and change appearance of creditcard tab\n**/\nfunction removeSessionNonce() {\n    updateSessionAccount();\n    document.querySelector('#braintreeCreditCardNonce').value = '';\n    document.querySelector('#cardNumber').value = '';\n    document.querySelector('#braintreeCardMaskNumber').value = '';\n    document.querySelector('#braintreeCardExpirationYear').value = '';\n    document.querySelector('#braintreeCardExpirationMonth').value = '';\n\n    var defaultOption = helper.getOptionByDataDefault('#braintreeCreditCardList');\n    if (defaultOption) {\n        defaultOption.selected = true;\n        var selectedCard = bu.getSelectedData($creditCardList);\n        var cardFieldsPH = {\n            cardNumbeberPh: document.querySelector('#braintreeCardNumberPh'),\n            cardCvvPh: document.querySelector('#braintreeCvvPh'),\n            cardExpirationPh: document.querySelector('#braintreeExpirationPh'),\n            cardOwnerPh: document.querySelector('#braintreeCardOwnerPh')\n        };\n        setCardFields(selectedCard, cardFieldsPH);\n        $cardOwner.disabled = true;\n        $saveCreditCard.checked = false;\n        document.querySelector('#braintreeSaveCardContainer').style.display = 'none';\n    } else {\n        hideCardElements(getCardFieldsPH());\n        showCardElements(getCardFields());\n        var ccAccount = document.querySelector('.form-group.braintree_used_creditcard_account');\n        ccAccount.classList.remove('used-creditcard-account');\n        ccAccount.classList.add('used-creditcard-account-hide');\n    }\n\n    [].forEach.call(document.querySelector('#braintreeCreditCardList'), function (el) {\n        if (el.style.display === 'none') el.style.display = 'block';\n    });\n}\n\nmodule.exports = {\n    creditcardErrorContainer,\n    convertCardTypeToDwFormat,\n    cardOwnerEvents,\n    initCardListAndSaveFunctionality,\n    removeSessionNonce,\n    showCardElements,\n    hideCardElements,\n    setCardFields,\n    getCardFieldsPH,\n    getCardFields,\n    updateSessionAccount\n};\n","'use strict';\n\nvar braintreeUtils = require('../braintreeUtils');\nvar creditCard = require('../braintreeCreditCard');\nvar helper = require('../helper');\nvar creditcardHelper = require('../creditcard/creditcardHelper');\n\nvar $continueButton = document.querySelector('button.submit-payment');\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\n\nfunction doNotAllowSubmitForm() {\n    helper.continueButtonToggle(false);\n    $continueButton.setAttribute('data-is-allow-submit-form', false);\n}\n\nfunction hide3DSecureContainer() {\n    document.querySelector('#braintreeCreditCardFieldsContainer').style.display = '';\n    document.querySelector('#braintreeSaveCardContainer').style.display = '';\n    document.querySelector('#braintree3DSecureContainer').style.display = 'none';\n    doNotAllowSubmitForm();\n}\n\nfunction updateAccountsList() {\n    var sessionAccount = document.querySelector('#braintreeSessionCreditAccount');\n    var defaultOption = helper.getOptionByDataDefault('#braintreeCreditCardList');\n    if ($creditCardList && $creditCardList.value !== 'newcard') {\n        if (!sessionAccount.selected) {\n            creditcardHelper.updateSessionAccount();\n        }\n        return;\n    }\n\n    var creditCardAccount = document.querySelector('.form-group.braintree_used_creditcard_account');\n    var newCCAccount = document.getElementById('newCardAccount');\n    if (!creditCardAccount.classList.contains('used-creditcard-account')) {\n        creditCardAccount.classList.remove('used-creditcard-account-hide');\n        creditCardAccount.classList.add('used-creditcard-account');\n        sessionAccount.classList.remove('used-creditcard-account-hide');\n        sessionAccount.classList.add('used-creditcard-account');\n    } else {\n        sessionAccount.classList.remove('used-creditcard-account-hide');\n        sessionAccount.classList.add('used-creditcard-account');\n    }\n\n    if (newCCAccount.selected) {\n        var isSavedCard = document.querySelector('#braintreeSaveCreditCard') ? document.querySelector('#braintreeSaveCreditCard').checked : false;\n        sessionAccount.setAttribute('data-session-account', true);\n        sessionAccount.setAttribute('data-save-card', isSavedCard);\n        sessionAccount.textContent = sessionAccount.getAttribute('data-type') + ' ' +\n            sessionAccount.getAttribute('data-number') + ' ' +\n            sessionAccount.getAttribute('data-expiration') + ' ' +\n            document.querySelector('#braintreeCardOwner').getAttribute('data-new-cart-value');\n        sessionAccount.setAttribute('data-nonce', document.querySelector('#braintreeCreditCardNonce').value);\n\n        newCCAccount.removeAttribute('selected');\n        sessionAccount.selected = true;\n    }\n\n    if (!defaultOption) {\n        var selectedCard = braintreeUtils.getSelectedData($creditCardList);\n        var cardFieldsPH = {\n            cardOwnerPh: document.querySelector('#braintreeCardOwnerPh'),\n            cardNumbeberPh: document.querySelector('#braintreeCardNumberPh'),\n            cardCvvPh: document.querySelector('#braintreeCvvPh'),\n            cardExpirationPh: document.querySelector('#braintreeExpirationPh')\n        };\n        creditcardHelper.setCardFields(selectedCard, cardFieldsPH);\n    }\n\n    creditCard.clearHostedFields();\n    creditcardHelper.showCardElements(creditcardHelper.getCardFieldsPH());\n    creditcardHelper.hideCardElements(creditcardHelper.getCardFields());\n    helper.continueButtonToggle(false);\n}\n\nfunction allowSubmitForm(event) {\n    $continueButton.setAttribute('data-is-allow-submit-form', true);\n    updateAccountsList();\n    event.target.click();\n}\n\nfunction isActiveCreditCardTab() {\n    return document\n        .querySelector('.payment-options[role=tablist] a[data-toggle=\"tab\"][href=\"#creditcard-content\"]')\n        .classList\n        .contains('active');\n}\n\nfunction makeCreditCardPayment(event) {\n    if (JSON.parse($continueButton.getAttribute('data-is-allow-submit-form')) && creditCard.isFormValid()) {\n        return;\n    }\n\n    if ($creditCardList) {\n        var is3dSecureEnabled = JSON.parse(document.querySelector('.js_braintree_creditCardFields').getAttribute('data-braintree-config')).is3dSecureEnabled;\n        if ($creditCardList && $creditCardList.value !== 'newcard') {\n            if (!is3dSecureEnabled) {\n                allowSubmitForm(event);\n                return;\n            }\n\n            if ($creditCardList.value === 'sessioncard') {\n                allowSubmitForm(event);\n                return;\n            }\n\n            var selectedCard = braintreeUtils.getSelectedData($creditCardList);\n            var getNonceUrl = $creditCardList.getAttribute('data-get-payment-nonce-url');\n            var cardUUID = selectedCard['data-id'].value;\n            $.get(`${getNonceUrl}?id=${cardUUID}`, function (response) {\n                creditCard.startTokenize(function (result) {\n                    if (!result.error) {\n                        allowSubmitForm(event);\n                    }\n                }, response);\n            });\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n        }\n    }\n    creditCard.startTokenize(function (result) {\n        if (!result.error) allowSubmitForm(event);\n    });\n    event.preventDefault();\n    event.stopPropagation();\n}\n\nmodule.exports = {\n    doNotAllowSubmitForm,\n    hide3DSecureContainer,\n    makeCreditCardPayment\n};\n","'use strict';\n\nvar googlepay = require('../braintreeGooglepay');\nvar loaderInstance = require('../loaderHelper');\n\nfunction submitAddGooglePayAccountForm() {\n    $('.js_braintree_addGooglePayAccountForm').submit(function () {\n        var $form = $(this);\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        $form.spinner().start();\n\n        $.post($form.attr('action'), $form.serialize())\n            .done(function (data) {\n                $form.spinner().stop();\n                if (!data.success) {\n                    $btFormErrorContainer.style.display = 'block';\n                    $btFormErrorContainer.textContent = data.error;\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            })\n            .fail(function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $form.spinner().stop();\n            });\n        return false;\n    });\n}\n\nfunction initAddGooglePayAccount() {\n    var $btn = document.querySelector('.js_braintree_accountgooglepay_button');\n    var $googlepayNonce = document.querySelector('#braintreeGooglePayNonce');\n    var $btGooglePayLoader = document.querySelector('.braintreeGooglepayLoader');\n    var googlepayIns;\n    var loader = loaderInstance($btGooglePayLoader);\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n    loader.show();\n\n    config.onTokenizePayment = function (data, result) {\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        if ($btFormErrorContainer.style.display === 'block') {\n            $btFormErrorContainer.style.display = 'none';\n            $btFormErrorContainer.textContent = '';\n        }\n        if (result.type === 'PayPalAccount') {\n            $btFormErrorContainer.style.display = 'block';\n            $btFormErrorContainer.textContent = config.messages.saving_paypal_account_error;\n\n            return;\n        }\n\n        $googlepayNonce.value = result.nonce;\n\n        document.querySelector('.braintreeGooglePayBtn').click();\n    };\n    googlepayIns = googlepay.init(config, $btn);\n    googlepayIns.createGooglepay();\n    $btn.setAttribute('data-is-inited', true);\n    submitAddGooglePayAccountForm();\n}\n\nmodule.exports = {\n    initAddGooglePayAccount\n};\n/* eslint no-use-before-define: 2 */  // --> ON\n","'use strict';\nvar helper = require('../helper');\n\nvar $googlepayContent = document.querySelector('.js_braintree_googlepayContent');\nvar $btGooglepayAccountsList = document.querySelector('#braintreeGooglepayAccountsList');\nvar $googlepayButton = document.querySelector('.js_braintree_googlepay_button');\nvar $saveGooglePayAccountCheckbox = document.querySelector('#braintreeSaveGooglepayAccount');\nvar $googlepayTab = document.querySelector('.googlepay-tab');\n\nfunction showGooglepayAccount() {\n    var $sessionAccount = document.querySelector('#sessionGPAccount');\n    $sessionAccount.classList.remove('used-googlepay-account-hide');\n    $sessionAccount.classList.add('used-googlepay-account');\n\n    var $gpAccount = document.querySelector('.form-group.braintree_used_googlepay_account');\n    $gpAccount.classList.remove('used-googlepay-account-hide');\n    $gpAccount.classList.add('used-googlepay-account');\n\n    $googlepayButton.style.display = 'none';\n    $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($btGooglepayAccountsList.value === 'newaccount') {\n        $googlepayButton.style.display = 'block';\n        if ($googlepayTab.classList.contains('active')) {\n            helper.continueButtonToggle(true);\n        }\n        $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', true);\n        if ($saveGooglePayAccountCheckbox) {\n            $saveGooglePayAccountCheckbox.checked = true;\n        }\n    } else {\n        $googlepayButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        if ($saveGooglePayAccountCheckbox) {\n            $saveGooglePayAccountCheckbox.checked = JSON.parse(document.querySelector('#sessionGPAccount').getAttribute('data-save'));\n        }\n    }\n}\n\nfunction createGooglepayBillingAddressData(data) {\n    var billingData = data.paymentMethodData.info.billingAddress;\n    var billingAddress = {};\n    var recipientName = billingData.name.split(' ');\n\n    billingAddress.firstName = recipientName[0];\n    billingAddress.lastName = recipientName[1];\n    billingAddress.phone = billingData.phoneNumber;\n    billingAddress.countryCodeAlpha2 = billingData.countryCode;\n    billingAddress.streetAddress = billingData.address1;\n    billingAddress.extendedAddress = billingData.address2;\n    billingAddress.locality = billingData.locality;\n    billingAddress.stateCode = billingData.administrativeArea;\n    billingAddress.postalCode = billingData.postalCode;\n    billingAddress.email = data.email;\n\n    return billingAddress;\n}\n\nfunction createGooglepayShippingAddressData(shippingData) {\n    var shippingAddress = {};\n    var recipientName = shippingData.name.split(' ');\n\n    shippingAddress.firstName = recipientName[0];\n    shippingAddress.lastName = recipientName[1];\n    shippingAddress.phone = shippingData.phoneNumber;\n    shippingAddress.countryCodeAlpha2 = shippingData.countryCode;\n    shippingAddress.streetAddress = shippingData.address1;\n    shippingAddress.extendedAddress = shippingData.address2;\n    shippingAddress.locality = shippingData.locality;\n    shippingAddress.region = shippingData.administrativeArea;\n    shippingAddress.postalCode = shippingData.postalCode;\n\n    return shippingAddress;\n}\n\n/*\n    Remove method was used and change appearance of googlepay tab\n**/\nfunction removeSessionNonce() {\n    var $gpAccount = document.querySelector('.form-group.braintree_used_googlepay_account');\n    $gpAccount.classList.remove('used-googlepay-account');\n    $gpAccount.classList.add('used-googlepay-account-hide');\n\n    var $sessionAccount = document.querySelector('#sessionGPAccount');\n    $sessionAccount.classList.add('used-googlepay-account-hide');\n    $sessionAccount.classList.remove('used-googlepay-account');\n    $sessionAccount.value = '';\n    $sessionAccount.text = '';\n    $sessionAccount.setAttribute('data-session-account', false);\n    $sessionAccount.setAttribute('data-save', false);\n\n    document.querySelector('#braintreeGooglePayNonce').value = '';\n    document.querySelector('#braintreeGooglePayBillingAddress').value = '';\n    document.querySelector('#braintreeGooglepayPaymentType').value = '';\n    document.querySelector('#braintreeGooglePayDeviceData').value = '';\n\n    document.querySelector('#newGPAccount').selected = true;\n    hideShowButtons();\n}\n\nmodule.exports = {\n    showGooglepayAccount,\n    createGooglepayBillingAddressData,\n    createGooglepayShippingAddressData,\n    removeSessionNonce,\n    hideShowButtons\n};\n","'use strict';\nvar googlepay = require('../braintreeGooglepay');\nvar { hideShowButtons, createGooglepayBillingAddressData, createGooglepayShippingAddressData, showGooglepayAccount } = require('./googlepayHelper');\nvar { removeActiveSessionPayment, createPaymentFormData, showCartErrorMsg, updateBillingFormValues } = require('../helper');\n\nvar $googlepayButton = document.querySelector('.js_braintree_googlepay_button');\nvar $btGooglepayAccountsList = document.querySelector('#braintreeGooglepayAccountsList');\nvar $googlepayOnCart = document.querySelector('.braintree-cart-google-button');\nvar $googlepayNonce = document.querySelector('#braintreeGooglePayNonce');\nvar $googlepayCardDescription = document.querySelector('#braintreeGooglePayCardDescription');\nvar $braintreeGooglepayPaymentType = document.querySelector('#braintreeGooglepayPaymentType');\nvar $googlePayBillingAddress = document.querySelector('#braintreeGooglePayBillingAddress');\n\nfunction makeGooglepayPayment(continueButton) {\n    var googlepayIns;\n    var config = JSON.parse($googlepayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($googlepayButton, 'not valid data-braintree-config');\n    }\n\n    if ($btGooglepayAccountsList) {\n        $btGooglepayAccountsList.addEventListener('change', function () {\n            hideShowButtons();\n        });\n        hideShowButtons();\n\n        if ($googlepayCardDescription.value === 'GooglePay') {\n            $googlepayCardDescription.value = $btGooglepayAccountsList.selectedOptions[0].label;\n        }\n    }\n\n    config.onTokenizePayment = function (data, result) {\n        var deviceData = document.querySelector('input[name=braintreeGooglePayDeviceDataInput]').value;\n        var googlepayNonce = result.nonce;\n        var googlepayPaymentType = result.type;\n        var googlepayCardDescription = result.details.cardType + ' ' + result.details.lastFour;\n\n        removeActiveSessionPayment();\n\n        if (data) {\n            var billingAddressData = createGooglepayBillingAddressData(data);\n\n            if ($googlepayOnCart) {\n                var $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n                var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n                var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n                var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n                var csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n                var shippingAddressData = createGooglepayShippingAddressData(data.shippingAddress);\n                var googlepayCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n                    firstName: billingAddressData.firstName,\n                    lastName: billingAddressData.lastName,\n                    address1: billingAddressData.streetAddress,\n                    address2: billingAddressData.extendedAddress || '',\n                    city: billingAddressData.locality,\n                    postalCode: billingAddressData.postalCode,\n                    stateCode: billingAddressData.stateCode,\n                    country: billingAddressData.countryCodeAlpha2,\n                    email: billingAddressData.email,\n                    phone: billingAddressData.phone,\n                    paymentMethod: config.paymentMethodName\n                });\n\n                googlepayCheckoutFormData.append(csrfToken.name, csrfToken.value);\n                googlepayCheckoutFormData.append('braintreeGooglePayNonce', googlepayNonce);\n                googlepayCheckoutFormData.append('braintreeGooglePayDeviceData', deviceData);\n                googlepayCheckoutFormData.append('braintreeGooglePayCardDescription', googlepayCardDescription);\n                googlepayCheckoutFormData.append('braintreeGooglepayPaymentType', googlepayPaymentType);\n                googlepayCheckoutFormData.append('braintreeSaveGooglepayAccount', true);\n                googlepayCheckoutFormData.append('braintreeGooglePayShippingAddress', JSON.stringify(shippingAddressData) || '{}');\n\n                $.ajax({\n                    type: 'POST',\n                    url: checkoutFromCartUrl,\n                    data: googlepayCheckoutFormData,\n                    contentType: false,\n                    processData: false,\n                    success: function (res) {\n                        if (res.error) {\n                            var errorMessage = '';\n                            if (res.fieldErrors.length) {\n                                res.fieldErrors.forEach(function (error, index) {\n                                    var keys = Object.keys(error);\n                                    if (keys.length) {\n                                        errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${res.fieldErrors[index][keys[index]]}. `;\n                                    }\n                                });\n                                showCartErrorMsg(errorMessage);\n                            }\n\n                            if (res.serverErrors.length) {\n                                res.serverErrors.forEach(function (error) {\n                                    errorMessage += `${error}. `;\n                                });\n                                showCartErrorMsg(errorMessage);\n                            }\n\n                            if (res.cartError) {\n                                window.location.href = res.redirectUrl;\n                            }\n                            return;\n                        }\n\n                        sessionStorage.setItem('pageState', 'cart');\n                        googlepayIns.loader.hide();\n                        window.location.href = placeOrderUrl;\n                    },\n                    error: function (err) {\n                        if (err && err.redirectUrl) {\n                            window.location.href = err.redirectUrl;\n                        }\n                    }\n                });\n\n                return;\n            }\n\n            $googlepayNonce.value = googlepayNonce;\n            $googlepayCardDescription.value = googlepayCardDescription;\n            $braintreeGooglepayPaymentType.value = googlepayPaymentType;\n\n            // Updating Storefront Billing Form data with GooglePay Billing\n            var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n            storeFrontBillingData.dwfrm_billing_addressFields_firstName = billingAddressData.firstName;\n            storeFrontBillingData.dwfrm_billing_addressFields_lastName = billingAddressData.lastName;\n            storeFrontBillingData.dwfrm_billing_addressFields_address1 = billingAddressData.streetAddress;\n            storeFrontBillingData.dwfrm_billing_addressFields_address2 = billingAddressData.extendedAddress || '';\n            storeFrontBillingData.dwfrm_billing_addressFields_city = billingAddressData.locality;\n            storeFrontBillingData.dwfrm_billing_addressFields_postalCode = billingAddressData.postalCode;\n            storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = billingAddressData.stateCode;\n            storeFrontBillingData.dwfrm_billing_addressFields_country = billingAddressData.countryCodeAlpha2;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_email = billingAddressData.email;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = billingAddressData.phone;\n\n            $googlePayBillingAddress.value = JSON.stringify(billingAddressData);\n\n            updateBillingFormValues(storeFrontBillingData);\n        }\n\n        // selector \"new GooglePay account\" in dropdown list\n        var newGPAccount = document.getElementById('newGPAccount');\n        var sessionGPAccount = document.querySelector('#sessionGPAccount');\n\n        // Selecting Google Pay Session Account\n        sessionGPAccount.text = $googlepayCardDescription.value;\n        newGPAccount.removeAttribute('selected');\n        sessionGPAccount.selected = true;\n        sessionGPAccount.setAttribute('data-session-account', 'true');\n\n        showGooglepayAccount();\n        continueButton.click();\n    };\n\n    googlepayIns = googlepay.init(config, $googlepayButton);\n    googlepayIns.createGooglepay();\n\n    function googlepayUpdateAmount() { // eslint-disable-line require-jsdoc\n        googlepayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                googlepayIns.loader.hide();\n                googlepayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', googlepayUpdateAmount);\n    $('body').on('braintree:updateCartTotals', googlepayUpdateAmount);\n    googlepayUpdateAmount();\n}\n\nmodule.exports = {\n    makeGooglepayPayment\n};\n","'use strict';\nvar $continueButton = document.querySelector('button.submit-payment');\n\nfunction initWathcherCartUpdate() {\n    var $grantTotal = document.querySelector('.grand-total');\n    if ($grantTotal) {\n        var currentGrantTotalValue = $grantTotal.textContent;\n        $('body').on('cart:update', function () {\n            var newGrantTotalValue = $grantTotal.textContent;\n            if (newGrantTotalValue !== '' && newGrantTotalValue !== currentGrantTotalValue) {\n                currentGrantTotalValue = newGrantTotalValue;\n                var updateCartTotals = document.createEvent('Event');\n                updateCartTotals.initEvent('updateCartTotals', true, true);\n                document.querySelector('body').addEventListener('updateCartTotals', function () {\n                    'braintree:updateCartTotals';\n                }, false);\n                document.querySelector('body').dispatchEvent(updateCartTotals);\n            }\n        });\n    }\n}\n\nfunction continueButtonToggle(flag) {\n    var stage = window.location.hash.substring(1);\n    if (stage === 'placeOrder' || stage === 'shipping' || stage === null || stage === '') {\n        return;\n    }\n    if (flag) {\n        $continueButton.style.display = 'none';\n    } else {\n        $continueButton.style.display = '';\n    }\n}\n\n\nfunction paymentMethodChangeHandle(currentTab) {\n    document.querySelectorAll('.payment-options[role=tablist] a[data-toggle=\"tab\"]').forEach(function (el) {\n        var $tabContent = document.querySelector(el.getAttribute('href'));\n\n        if (el === currentTab) {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.removeAttribute('disabled', 'disabled');\n            });\n            $tabContent.querySelectorAll('select.no-disable').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n            continueButtonToggle(JSON.parse($tabContent.getAttribute('data-paypal-is-hide-continue-button')));\n        } else {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n        }\n    });\n}\n\nfunction getPaymentMethodToLowerCase(paymentMethodName) {\n    var paymentMethod = paymentMethodName.split('_');\n    if (paymentMethod.length === 1) {\n        return paymentMethodName;\n    }\n    paymentMethod.forEach(function (element, index) {\n        paymentMethod[index] = element.charAt(0) + element.slice(1).toLocaleLowerCase();\n    });\n    return paymentMethod[1] ?\n        paymentMethod[0] + ' ' + paymentMethod[1] :\n        paymentMethod[0];\n}\n\nfunction updateCheckoutView(e, data) {\n    var $paymentSummary = document.querySelector('.summary-details .braintree-payment-details');\n    var htmlToAppend = '';\n    var order = data.order;\n\n    if (order.billing.payment && order.billing.payment.selectedPaymentInstruments\n        && order.billing.payment.selectedPaymentInstruments.length > 0) {\n        htmlToAppend += '<div>' + getPaymentMethodToLowerCase(order.billing.payment.selectedPaymentInstruments[0].paymentMethod) + '</div>';\n        if (order.billing.payment.selectedPaymentInstruments[0].maskedCreditCardNumber) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].maskedCreditCardNumber + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'PayPal') {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].braintreePaypalEmail + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'Venmo') {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].braintreeVenmoUserId + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].type) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].type + '</div>';\n        }\n        htmlToAppend += '<div>' + order.priceTotal.charAt(0) + order.billing.payment.selectedPaymentInstruments[0].amount + '</div>';\n    }\n\n    if ($paymentSummary) {\n        $paymentSummary.innerHTML = htmlToAppend;\n    }\n}\n\nfunction isValidInputField(field) {\n    if (!field.checkValidity()) {\n        if (!field.classList.contains('is-invalid')) {\n            field.classList.add('is-invalid');\n        }\n        return false;\n    }\n    if (field.checkValidity() && field.classList.contains('is-invalid')) {\n        field.classList.remove('is-invalid');\n    }\n    return true;\n}\n/*\n    Adding *active* line to the tab-content class in a case if it isn't already active\n    Use case: customer checkout from cart (page) and\n    (under the place Order page) hit the 'edit' button\n**/\nfunction updatePaymentMethodTab() {\n    let paymentMethodName = document.querySelectorAll('[data-braintree-payment-method]')[0].dataset.braintreePaymentMethod;\n    let content = document.querySelector(`.js_braintree_${paymentMethodName.toLowerCase()}Content`).classList.contains('active');\n    if (!content) {\n        document.querySelectorAll(`[data-method-id=${paymentMethodName}]`)[0].children[0].click();\n    }\n}\n\n/**\n * Gets Billing Address Form Values\n *\n * @returns {Object} with Billing Address\n */\nfunction getBillingAddressFormValues() {\n    return $('#dwfrm_billing').serialize().split('&')\n        .map(function (el) {\n            return el.split('=');\n        })\n        .reduce(function (accumulator, item) {\n            var elem = item[0].lastIndexOf('_');\n            if (elem < 0) {\n                accumulator[item[0]] = item[1];\n            } else {\n                elem = item[0].substring(elem + 1);\n                accumulator[elem] = item[1];\n            }\n            return accumulator;\n        }, {});\n}\n\n/**\n * Gets Nonce depending on payment method name\n *\n * @param {string} paymentMethodName - payment method name\n * @returns {boolean} nonce exist\n */\n\nfunction isNonceExist(paymentMethodName) {\n    var $nonce = document.querySelector(`#braintree${paymentMethodName}Nonce`);\n    if (!$nonce) return false;\n\n    var nonceValue = $nonce.value;\n    var $tab = document.querySelector(`.${paymentMethodName.toLowerCase()}-tab`);\n    var isActiveTab;\n    if ($tab) {\n        isActiveTab = $tab.classList.contains('active');\n    }\n\n    return !isActiveTab && nonceValue;\n}\n\nvar loaderInstance = require('./loaderHelper');\nvar accountsLoader;\n\nfunction removeBtPayment(e) {\n    let target = e.target;\n    var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n    accountsLoader = loaderInstance($loaderContainter);\n    accountsLoader.show();\n\n    $.get(target.getAttribute('data-url') + '?UUID=' + target.getAttribute('data-id'))\n        .then((data => {\n            $('#uuid-' + data.UUID).remove();\n            if (data.newDefaultAccount) {\n                document.querySelector('#uuid-' + data.newDefaultAccount + ' span').style.fontWeight = 'bold';\n                document.querySelector('#uuid-' + data.newDefaultAccount + ' button.braintree-make-default-card').style.display = 'none';\n            }\n            accountsLoader.hide();\n        }))\n        .fail(() => {\n            location.reload();\n            accountsLoader.hide();\n        });\n}\n\n/**\n * Create formData from fields data\n *\n * @param {Object} paymentFields - fields data values\n * @param {Object} fieldsData - fields data values\n * @returns {Object} cart billing form data\n */\nfunction createPaymentFormData(paymentFields, fieldsData) {\n    var paymentFieldsParsed = JSON.parse(paymentFields);\n\n    return Object.entries(paymentFieldsParsed).reduce(function (formData, entry) {\n        const [key, field] = entry;\n        if (typeof field === 'object') {\n            formData.append(field.name, fieldsData && fieldsData[key] !== null ? fieldsData[key] : field.value);\n        }\n        return formData;\n    }, new FormData());\n}\n\nfunction setDefaultProperty(params) {\n    return $.get(params.url + '?UUID=' + params.id + '&pmID=' + params.paymentMethodID)\n            .then((data) => {\n                document.querySelector('#uuid-' + data.newDefaultProperty + ' span').style.fontWeight = 'bold';\n                document.querySelector('.braintree-make-default-card.uuid-' + data.newDefaultProperty).style.display = 'none';\n                document.querySelector('#uuid-' + data.toRemoveDefaultProperty + ' span').style.fontWeight = 'normal';\n                document.querySelector('.braintree-make-default-card.uuid-' + data.toRemoveDefaultProperty).style.display = 'inline';\n                params.loader.hide();\n            })\n            .fail(() => {\n                params.loader.hide();\n            });\n}\n\nfunction initCardEvents() {\n    if (document.querySelector('.braintreeAddNewCard')) {\n        document.querySelector('.braintreeAddNewCard').addEventListener('click', function () {\n            document.querySelector('.braintreeAddNewCard').style.display = 'none';\n            document.querySelector('.braintreeAddNewCardBlock').style.display = 'block';\n        });\n    }\n    document.querySelector('.creditCard-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = 'CARD';\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\n/**\n * Checks authenticated customer, account list for default Payment Method\n *\n * @param {string} selector - querySelector\n * @returns {Object} default data attribute or null\n */\nfunction getOptionByDataDefault(selector) {\n    if (!document.querySelector(selector)) { return null; }\n\n    return Array.apply(null, document.querySelector(selector).options).find(function (el) {\n        return el.getAttribute('data-default') ? JSON.parse(el.getAttribute('data-default')) : null;\n    });\n}\n\n/**\n * Checks authenticated customer, account list for session Account\n *\n * @param {Object} params - querySelector + el.id\n * @returns {Object} session account object\n */\nfunction getSessionAccountOption(params) {\n    return Array.apply(null, document.querySelector(params.querySelector).options).find(function (el) {\n        return el.id === params.id && JSON.parse(el.getAttribute('data-session-account'));\n    });\n}\n\n/**\n * Remove Session Active Payment Method\n ** Use helpers to add more Payment Methods\n *\n * @returns {function}function call\n */\nfunction removeActiveSessionPayment() {\n    const activePaymentMethods = [];\n    document.querySelectorAll('.payment-options[role=tablist] li').forEach(function (el) {\n        if (el.dataset.methodId === 'CREDIT_CARD') {\n            el.dataset.methodId = 'CreditCard';\n        }\n        activePaymentMethods.push(el.dataset.methodId);\n    });\n    var helpers = {\n        PayPal: require('./paypal/paypalHelper'),\n        Venmo: require('./venmo/venmoHelper'),\n        GooglePay: require('./googlepay/googlepayHelper'),\n        CreditCard: require('./creditcard/creditcardHelper'),\n        SRC: require('./src/srcHelper'),\n        ApplePay: require('./applepay/applepayHelper')\n\n    };\n    var activePM = activePaymentMethods.find(function (el) {\n        return isNonceExist(el);\n    });\n    if (activePM) {\n        return helpers[activePM].removeSessionNonce();\n    }\n}\n\nfunction showCartErrorMsg(message) {\n    $('.checkout-btn').addClass('disabled');\n    $('.cart-error').append(\n        `<div class=\"alert alert-danger alert-dismissible valid-cart-error fade show cartError\" role=\"alert\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            ${message}\n        </div>`\n    );\n    window.scrollTo(0, 0);\n}\n\n/**\n * Update Checkout Billing form values\n *\n * @param {Object} billingData - fields data values\n */\nfunction updateBillingFormValues(billingData) {\n    var $billingFormFields = document.querySelectorAll('.billing-address select, .billing-address input, .contact-info-block input');\n\n    $billingFormFields.forEach(function (el) {\n        if (billingData[el.name]) {\n            el.value = billingData[el.name];\n        }\n    });\n}\n\nmodule.exports = {\n    initWathcherCartUpdate,\n    paymentMethodChangeHandle,\n    continueButtonToggle,\n    updateCheckoutView,\n    isValidInputField,\n    updatePaymentMethodTab,\n    getBillingAddressFormValues,\n    removeBtPayment,\n    createPaymentFormData,\n    initCardEvents,\n    isNonceExist,\n    setDefaultProperty,\n    getOptionByDataDefault,\n    removeActiveSessionPayment,\n    getSessionAccountOption,\n    showCartErrorMsg,\n    updateBillingFormValues\n};\n","\nmodule.exports = function (containerElement) {\n    if (!containerElement) {\n        // eslint-disable-next-line no-console\n        console.error('Braintree: No container for showing loaders');\n    }\n    function Constructor() {\n        this.containerEl = containerElement;\n    }\n    Constructor.prototype.show = function () {\n        this.containerEl.style.display = 'block';\n    };\n    Constructor.prototype.hide = function () {\n        this.containerEl.style.display = 'none';\n    };\n    return new Constructor();\n};\n","'use strict';\nvar braintreeLocal = require('../braintreeLocal');\nvar $lpmButton = document.querySelectorAll('.lpmButton');\n\n$lpmButton.forEach(function (el) {\n    var $btn = el;\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n    var localIns = braintreeLocal.init(config, $btn);\n    localIns.createLocalPayment();\n\n    function updateAmountData() { // eslint-disable-line require-jsdoc\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                localIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', updateAmountData);\n});\n","'use strict';\n\nvar paypalHelper = require('./paypalHelper');\nvar payPal = require('../braintreePaypal');\nvar paypalSavedAccountHandler = require('./paypalSavedAccountHandler');\nvar helper = require('../helper');\n\nvar $paypalMinicartButton;\n\nfunction miniCartButton() {\n    document.querySelectorAll('.js_braintree_paypal_cart_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n        $paypalMinicartButton = document.querySelector('.paypalMinicartButton');\n        if ($paypalMinicartButton && config.options.amount === 0) {\n            $paypalMinicartButton.style.display = 'none';\n        }\n        config.paypalConfig = config.paypalConfig || {};\n\n        config.onTokenizePayment = function (payload, btnInstance) {\n            var that = btnInstance;\n            var params = btnInstance.params;\n            var paypalCheckoutFormFields = document.querySelector('.braintree-cart-paypal-buttons-wrap').getAttribute('data-paypal-checkout-form-fields');\n            var details = payload.details;\n            if (!details.billingAddress) {\n                /*that.er.show('Merchant PayPal account does not support the Billing Address retrieving. Contact PayPal for details on eligibility and enabling this feature.');\n                return;*/\n                details.billingAddress = details.shippingAddress;\n            }\n            var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n            var paypalCheckoutFormData = helper.createPaymentFormData(paypalCheckoutFormFields, {\n                firstName: billingAddressData.firstName,\n                lastName: billingAddressData.lastName,\n                address1: billingAddressData.streetAddress,\n                address2: billingAddressData.extendedAddress || '',\n                city: billingAddressData.locality,\n                postalCode: billingAddressData.postalCode,\n                stateCode: billingAddressData.state,\n                country: billingAddressData.countryCodeAlpha2,\n                email: billingAddressData.email,\n                phone: billingAddressData.phone,\n                paymentMethod: params.paymentMethodName\n            });\n\n            var csrfToken = document.querySelector('.braintree-cart-paypal-buttons-wrap #csrf_token');\n            paypalCheckoutFormData.append(csrfToken.name, csrfToken.value);\n            paypalCheckoutFormData.append('braintreePaypalNonce', payload.nonce);\n            paypalCheckoutFormData.append('braintreePaypalRiskData', (params || {}).riskData);\n            paypalCheckoutFormData.append('braintreeSavePaypalAccount', true);\n            paypalCheckoutFormData.append('braintreePaypalShippingAddress',\n                details.shippingAddress ?\n                    paypalHelper.createShippingAddressData(details.shippingAddress, details) :\n                    '{}'\n            );\n            paypalCheckoutFormData.append('braintreePaypalBillingAddress', JSON.stringify(billingAddressData));\n\n            $.ajax({\n                type: 'POST',\n                url: params.paypalHandle,\n                data: paypalCheckoutFormData,\n                contentType: false,\n                processData: false,\n                success: function (data) {\n                    if (data.error) {\n                        var errorMessage = '';\n                        if (data.fieldErrors.length) {\n                            data.fieldErrors.forEach(function (error, index) {\n                                var keys = Object.keys(error);\n                                if (keys.length) {\n                                    errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                                }\n                            });\n                            helper.showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.serverErrors.length) {\n                            data.serverErrors.forEach(function (error) {\n                                errorMessage += `${error}. `;\n                            });\n                            helper.showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.cartError) {\n                            window.location.href = data.redirectUrl;\n                        }\n                        return;\n                    }\n\n                    window.location.href = params.redirectUrl;\n                },\n                error: function (err) {\n                    if (err && err.redirectUrl) {\n                        window.location.href = err.redirectUrl;\n                    }\n                }\n            });\n        };\n\n        var paypalIns = payPal.init(config, $btn);\n\n        function updateCartPaypalAmount() { // eslint-disable-line require-jsdoc\n            paypalIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    paypalIns.loader.hide();\n                    paypalIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n        }\n        $('body').on('cart:update', function () {\n            $paypalMinicartButton = document.querySelector('.paypalMinicartButton');\n            var $totalPrice = document.querySelector('.sub-total');\n            if ($paypalMinicartButton && $totalPrice) {\n                var isZeroAmount = $totalPrice.innerHTML.substring(1) === '0.00';\n                $paypalMinicartButton.style.display = isZeroAmount ? 'none' : '';\n            }\n        });\n\n        $('body').on('braintree:updateCartTotals', updateCartPaypalAmount);\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nvar observer = new MutationObserver(function (mutations) {\n    mutations.forEach(function (mutation) {\n        if (mutation.addedNodes.length < 2) {\n            return;\n        }\n        miniCartButton();\n        var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n        if ($staticPaypalButton) {\n            $staticPaypalButton.addEventListener('click', paypalSavedAccountHandler.staticImageHandler);\n        }\n    });\n});\nwindow.miniCartButton = miniCartButton;\nmodule.exports = {\n    miniCartButton,\n    observer\n};\n","'use strict';\nvar payPal = require('../braintreePaypal');\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar loaderInstance = require('../loaderHelper');\nvar accountsLoader;\n\nfunction initAddPaypalAccount() {\n    var $btn = document.querySelector('.js_braintree_accountPaypalButton');\n    var $paypalErrorContainer = document.querySelector('#paypalAccountErrorContainer');\n    var $paypalLoader = document.querySelector('#braintreePayPalAccLoader');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n\n    config.$loaderContainer = $paypalLoader;\n    config.$errorContainer = $paypalErrorContainer;\n    config.onTokenizePayment = function (data) {\n        let accountPaypalButton = document.querySelector('.js_braintree_accountPaypalButton');\n        let paypalAddAccountHandler = accountPaypalButton.getAttribute('data-paypal-add-account-handler');\n        let paypalAccountFormFields = accountPaypalButton.getAttribute('data-paypal-account-form-fields');\n        let paypalBillingAddressData = paypalHelper.createBillingAddressData(data.details.billingAddress, data.details);\n        let paypalAccountFormData = helper.createPaymentFormData(paypalAccountFormFields, {\n            nonce: data.nonce,\n            email: data.details.email,\n            addresses: JSON.stringify(paypalBillingAddressData),\n            shippingAddress: JSON.stringify(data.details.shippingAddress)\n        });\n        let csrfToken = document.querySelector('.js_braintree_accountPaypalButton_wrapper #csrf_token');\n        paypalAccountFormData.append(csrfToken.name, csrfToken.value);\n\n        let $loaderContainter = document.querySelector('#paypalAccountBtLoader');\n        accountsLoader = loaderInstance($loaderContainter);\n        accountsLoader.show();\n        return $.ajax({\n            type: 'POST',\n            url: paypalAddAccountHandler,\n            data: paypalAccountFormData,\n            contentType: false,\n            processData: false\n        })\n            .then((paymentData) => {\n                paypalHelper.hidePaypalAccountBtn();\n                $paypalLoader.style.display = 'none';\n                $paypalErrorContainer.textContent = '';\n                $paypalErrorContainer.style.display = 'none';\n\n                $.get(paymentData.renderAccountsUrl)\n                    .then((tplData => {\n                        accountsLoader.hide();\n                        document.querySelector('.paypal-accounts').innerHTML = tplData;\n                        document.querySelectorAll('.paypal-accounts .remove-bt-payment').forEach(function (el) {\n                            el.addEventListener('click', helper.removeBtPayment);\n                        });\n                    }));\n            })\n            .fail(({ responseJSON }) => {\n                accountsLoader.hide();\n                $paypalLoader.style.display = 'none';\n                $paypalErrorContainer.style.display = 'block';\n                $paypalErrorContainer.textContent = responseJSON.error;\n            });\n    };\n\n    payPal.init(config, $btn);\n    $btn.setAttribute('data-is-inited', true);\n}\n\nfunction initPayPalEvents() {\n    document.querySelector('.add-paypal-account').addEventListener('click', function () {\n        paypalHelper.showPaypalAccountBtn();\n        initAddPaypalAccount();\n    });\n}\n\nfunction initPaypalButtonsEvents() {\n    document.querySelector('.paypal-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            helper.removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = document.querySelector('.paypal-accounts').getAttribute('data-payment-method-id');\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            helper.setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\nmodule.exports = {\n    initPayPalEvents,\n    initAddPaypalAccount,\n    initPaypalButtonsEvents\n};\n","'use strict';\nvar helper = require('../helper');\n\nvar $addPaypalAccountBtn = document.querySelector('.add-paypal-account');\nvar $paypalAccountWrapper = document.querySelector('.js_braintree_accountPaypalButton_wrapper');\nvar $savePaypalAccountCountainer = document.querySelector('#braintreeSavePaypalAccountContainer');\nvar $savePaypalAccountCheckbox = document.querySelector('#braintreeSavePaypalAccount');\nvar $braintreePayPalNonce = document.querySelector('#braintreePayPalNonce');\nvar $continueButton = document.querySelector('.submit-payment');\n\nvar formValidationConrol = function (validateActions) {\n    var isFormValid = true;\n    if (isFormValid) {\n        validateActions.enable();\n    } else {\n        validateActions.disable();\n    }\n};\n\nfunction getOptionByEmail() {\n    var sessionEmail = document.getElementById('braintreePaypalAccount').value || null;\n    return Array.apply(null, document.querySelector('#braintreePaypalAccountsList').options).find(function (el) {\n        return el.getAttribute('data-id') && sessionEmail && sessionEmail === el.text;\n    });\n}\n\nfunction setSessionAccountOptionDefault() {\n    var savedDefaultOption = helper.getOptionByDataDefault('#braintreePaypalAccountsList');\n    if (!savedDefaultOption) return;\n\n    savedDefaultOption.selected = '';\n    helper.getSessionAccountOption({\n        querySelector: '#braintreePaypalAccountsList',\n        id: 'braintreePaypalAccount'\n    }).selected = 'selected';\n}\n\n/*\n    Check if paypal method was used and change appearance of paypal tab\n**/\nfunction removeSessionNonce() {\n    var sessionOption = helper.getSessionAccountOption({\n        querySelector: '#braintreePaypalAccountsList',\n        id: 'braintreePaypalAccount'\n    });\n    if (sessionOption) {\n        var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n        document.querySelector('#braintreePayPalNonce').value = '';\n        document.querySelector('#braintreePaypalAccount').selected = false;\n        sessionOption.classList.add('used-paypal-account-hide');\n        sessionOption.classList.remove('used-paypal-account');\n        sessionOption.value = '';\n        sessionOption.text = '';\n        sessionOption.setAttribute('data-session-account', false);\n        sessionOption.setAttribute('data-save', false);\n\n        var defaultOption = helper.getOptionByDataDefault('#braintreePaypalAccountsList');\n        if (defaultOption) {\n            defaultOption.selected = true;\n            document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            document.querySelector('.js_braintree_paypal_billing_button').style.display = 'block';\n            var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n            paypalAccount.classList.remove('used-paypal-account');\n            paypalAccount.classList.add('used-paypal-account-hide');\n        }\n\n        [].forEach.call(document.querySelector('#braintreePaypalAccountsList'), function (el) {\n            if (el.style.display === 'none') el.style.display = 'block';\n        });\n    }\n}\n\nfunction initAccountListAndSaveFunctionality() {\n    var $accountsList = document.querySelector('#braintreePaypalAccountsList');\n    var $alertInfo = document.getElementById('paypal-content').querySelectorAll('.alert-info')[0];\n\n    function accountsListChange() { // eslint-disable-line require-jsdoc\n        var isSameSessionAccount = getOptionByEmail();\n        $continueButton.removeEventListener('click', removeSessionNonce);\n\n        if ($accountsList.value === 'newaccount') {\n            $alertInfo.style.display = 'block';\n            if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCountainer.style.display = 'block';\n                $savePaypalAccountCheckbox.checked = true;\n            }\n        } else if ($accountsList.selectedOptions[0].id === 'braintreePaypalAccount') {\n            // Case when Session Email already saved under account\n            $braintreePayPalNonce.value = $accountsList.selectedOptions[0].getAttribute('data-nonce');\n            if (isSameSessionAccount) {\n                $savePaypalAccountCountainer.style.display = 'none';\n                $savePaypalAccountCheckbox.checked = false;\n            } else if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCountainer.style.display = 'block';\n                $savePaypalAccountCheckbox.checked = JSON.parse(document.querySelector('#braintreePaypalAccount').getAttribute('data-save'));\n            }\n        } else {\n            $continueButton.addEventListener('click', removeSessionNonce);\n            $braintreePayPalNonce.value = '';\n            $alertInfo.style.display = 'none';\n            if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCheckbox.checked = false;\n                $savePaypalAccountCountainer.style.display = 'none';\n            }\n        }\n    }\n\n    if ($accountsList) {\n        $accountsList.addEventListener('change', accountsListChange);\n        accountsListChange();\n    }\n}\n\nfunction createShippingAddressData(inpShippingAddress, details) {\n    var shippingAddress = inpShippingAddress;\n    if (!shippingAddress.recipientName) {\n        shippingAddress.firstName = details.firstName;\n        shippingAddress.lastName = details.lastName;\n        shippingAddress.recipientName = details.firstName + ' ' + details.lastName;\n    }\n    shippingAddress.email = details.email;\n    shippingAddress.phone = details.phone;\n    shippingAddress.countryCodeAlpha2 = shippingAddress.countryCode;\n    shippingAddress.streetAddress = shippingAddress.line1;\n    shippingAddress.extendedAddress = shippingAddress.line2;\n    shippingAddress.locality = shippingAddress.city;\n    shippingAddress.region = shippingAddress.state;\n    shippingAddress.postalCode = shippingAddress.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\nfunction createBillingAddressData(inpBillingAddress, details) {\n    var billingAddress = inpBillingAddress;\n    billingAddress.firstName = details.firstName;\n    billingAddress.lastName = details.lastName;\n    billingAddress.email = details.email;\n    billingAddress.phone = details.phone;\n    billingAddress.countryCodeAlpha2 = billingAddress.countryCode;\n    billingAddress.streetAddress = billingAddress.line1;\n    billingAddress.extendedAddress = billingAddress.line2;\n    billingAddress.locality = billingAddress.city;\n    billingAddress.region = billingAddress.state;\n    return billingAddress;\n}\n\nfunction appendToUrl(url, param) {\n    var newUrl = url;\n    newUrl += (newUrl.indexOf('?') !== -1 ? '&' : '?') + Object.keys(param).map(function (key) {\n        return key + '=' + encodeURIComponent(param[key]);\n    }).join('&');\n\n    return newUrl;\n}\n\nfunction showPayPalAccount(braintreePaypalEmail, braintreePaypalNonce) {\n    var braintreePaypalAccount = document.getElementById('braintreePaypalAccount');\n    var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $braintreePaypalAccountsList = document.getElementById('braintreePaypalAccountsList');\n    var customerAuthenticated = JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated);\n\n    if (customerAuthenticated || (braintreePaypalEmail && braintreePaypalAccount.text !== 'PayPal')) {\n        if (braintreePaypalNonce && $braintreePaypalAccountsList) {\n            return true;\n        }\n\n        document.querySelectorAll('.js_braintree_paypalContent .custom-checkbox').forEach((el) => { el.style.display = 'none'; });\n    }\n\n    braintreePaypalAccount.text = braintreePaypalEmail;\n    if (!paypalAccount.classList.contains('used-paypal-account')) {\n        paypalAccount.classList.remove('used-paypal-account-hide');\n        paypalAccount.classList.add('used-paypal-account');\n    }\n\n    document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n    $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n}\n\nfunction showCheckoutErrorMsg(message) {\n    document.querySelector('.error-message-text').textContent = '';\n    document.querySelector('.error-message').style.display = 'block';\n    document.querySelector('.error-message-text').append(message);\n    window.scrollTo(0, 0);\n}\n\nfunction showPDPButton($braintreePDPButton) {\n    $braintreePDPButton.style.display = '';\n}\n\nfunction hidePDPButton($braintreePDPButton) {\n    $braintreePDPButton.style.display = 'none';\n}\n\nfunction showPaypalAccountBtn() {\n    $addPaypalAccountBtn.style.display = 'none';\n    $paypalAccountWrapper.style.display = 'block';\n}\nfunction hidePaypalAccountBtn() {\n    $addPaypalAccountBtn.style.display = 'block';\n    $paypalAccountWrapper.style.display = 'none';\n}\n\nmodule.exports = {\n    formValidationConrol,\n    initAccountListAndSaveFunctionality,\n    createShippingAddressData,\n    createBillingAddressData,\n    appendToUrl,\n    showPayPalAccount,\n    showCheckoutErrorMsg,\n    showPDPButton,\n    hidePDPButton,\n    getOptionByEmail,\n    removeSessionNonce,\n    setSessionAccountOptionDefault,\n    showPaypalAccountBtn,\n    hidePaypalAccountBtn\n};\n","'use strict';\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar payPal = require('../braintreePaypal');\n\nvar $paypalContent = document.querySelector('.js_braintree_paypalContent');\nvar $paypalButton = document.querySelector('.js_braintree_paypal_billing_button');\nvar $braintreePaypalAccountsList = document.querySelector('#braintreePaypalAccountsList');\nvar $braintreePaypalNonceInput = document.querySelector('input[name=braintreePaypalNonce]');\nvar $braintreePaypalEmail = document.querySelector('#braintreePaypalEmail');\nvar $braintreePaypalNonce = document.querySelector('#braintreePayPalNonce');\nvar $braintreePaypalBillingAddressInput = document.querySelector('input[name=braintreePaypalBillingAddress]');\n\nfunction makePaypalPayment(continueButton) {\n    var config = JSON.parse($paypalButton.getAttribute('data-braintree-config'));\n    var isSessionAccount = helper.getSessionAccountOption({\n        querySelector: '#braintreePaypalAccountsList',\n        id: 'braintreePaypalAccount'\n    });\n    var isSameSessionAccount = paypalHelper.getOptionByEmail();\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($paypalButton, 'not valid data-braintree-config');\n    }\n\n    function hideShowButtons() {\n        if ($braintreePaypalAccountsList.value === 'newaccount') {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            continueButton.style.display = 'none';\n            $paypalButton.style.display = '';\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            continueButton.style.display = '';\n            $paypalButton.style.display = 'none';\n        }\n    }\n\n    if ($braintreePaypalAccountsList) {\n        $braintreePaypalAccountsList.addEventListener('change', function () {\n            hideShowButtons();\n        });\n    }\n\n    // Getting same email option as session email, if any found\n    if (JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated) && isSessionAccount) {\n        if (isSameSessionAccount) {\n            isSameSessionAccount.style.display = 'none';\n            if (isSessionAccount.classList.contains('used-paypal-account-hide')) {\n                isSessionAccount.classList.add('used-paypal-account');\n                isSessionAccount.classList.remove('used-paypal-account-hide');\n            }\n        }\n\n        paypalHelper.setSessionAccountOptionDefault();\n    }\n\n    paypalHelper.initAccountListAndSaveFunctionality();\n\n    config.onTokenizePayment = function (data) {\n        helper.removeActiveSessionPayment();\n        if ($braintreePaypalNonceInput) {\n            $braintreePaypalNonceInput.value = data.nonce;\n        }\n        $braintreePaypalNonce.value = data.nonce;\n        document.querySelector('#braintreePaypalAccount').setAttribute('data-session-account', 'true');\n        document.querySelector('#braintreePaypalAccount').setAttribute('data-nonce', data.nonce);\n\n        if (data.details) {\n            var details = data.details;\n            $braintreePaypalEmail.value = data.details.email;\n            document.querySelector('#braintreePaypalAccount').value = data.details.email;\n            document.querySelector('#braintreePaypalAccount').text = data.details.email;\n            helper.continueButtonToggle(false);\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n\n            if (details.billingAddress) {\n                // Updating Storefront Billing Form data with PayPal Billing\n                var paypalBillingData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n                storeFrontBillingData.dwfrm_billing_addressFields_firstName = paypalBillingData.firstName;\n                storeFrontBillingData.dwfrm_billing_addressFields_lastName = paypalBillingData.lastName;\n                storeFrontBillingData.dwfrm_billing_addressFields_address1 = paypalBillingData.streetAddress;\n                storeFrontBillingData.dwfrm_billing_addressFields_address2 = paypalBillingData.extendedAddress || '';\n                storeFrontBillingData.dwfrm_billing_addressFields_city = paypalBillingData.locality;\n                storeFrontBillingData.dwfrm_billing_addressFields_postalCode = paypalBillingData.postalCode;\n                storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = paypalBillingData.state;\n                storeFrontBillingData.dwfrm_billing_addressFields_country = paypalBillingData.countryCodeAlpha2;\n                storeFrontBillingData.dwfrm_billing_contactInfoFields_email = paypalBillingData.email;\n                storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = paypalBillingData.phone;\n\n                $braintreePaypalBillingAddressInput.value = JSON.stringify(paypalBillingData);\n                helper.updateBillingFormValues(storeFrontBillingData);\n            }\n\n            if ($braintreePaypalAccountsList && $braintreePaypalAccountsList.value === 'newaccount') {\n                document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n                var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n                var sessionAccount = document.querySelector('#braintreePaypalAccount');\n                if (!paypalAccount.classList.contains('used-paypal-account')) {\n                    paypalAccount.classList.remove('used-paypal-account-hide');\n                    paypalAccount.classList.add('used-paypal-account');\n                    sessionAccount.classList.remove('used-paypal-account-hide');\n                    sessionAccount.classList.add('used-paypal-account');\n                } else {\n                    sessionAccount.classList.remove('used-paypal-account-hide');\n                    sessionAccount.classList.add('used-paypal-account');\n                }\n            }\n        }\n\n        var newPPAccount = document.getElementById('newPPAccount');\n        if (newPPAccount.selected) {\n            newPPAccount.removeAttribute('selected');\n            document.querySelector('#braintreePaypalAccount').selected = true;\n        }\n\n        // Getting same email option as session email, if any found\n        if (JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated) && helper.getSessionAccountOption({\n            querySelector: '#braintreePaypalAccountsList',\n            id: 'braintreePaypalAccount'\n        })) {\n            isSameSessionAccount = paypalHelper.getOptionByEmail();\n            paypalHelper.setSessionAccountOptionDefault();\n\n            if (isSameSessionAccount) {\n                isSameSessionAccount.style.display = 'none';\n                document.getElementById('braintreeSavePaypalAccount').value = false;\n                document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            } else {\n                [].forEach.call(document.querySelector('#braintreePaypalAccountsList'), function (el) {\n                    if (el.style.display === 'none') el.style.display = 'block';\n                });\n            }\n        }\n\n        paypalHelper.showPayPalAccount(data.details.email, data.nonce);\n        continueButton.click();\n    };\n\n    config.paypalConfig = config.paypalConfig || {};\n    config.paypalConfig.validate = function (validateActions) {\n        paypalHelper.formValidationConrol(validateActions, true);\n    };\n\n    var paypalIns = payPal.init(config, $paypalButton);\n    if (document.querySelector('.braintree_used_paypal_account').classList.contains('used-paypal-account')) {\n        paypalHelper.showPayPalAccount(document.querySelector('#braintreePaypalEmail').value);\n    }\n    function updateAmountAndShippingData() { // eslint-disable-line require-jsdoc\n        paypalIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                var $paypalAddress = document.querySelector('input[name=braintreePaypalShippingAddress]') !== '';\n                paypalIns.loader.hide();\n                paypalIns.updateAmount(data.amount);\n                paypalIns.updateShippingAddress(data.shippingAddress);\n                if ($paypalAddress.value) {\n                    var newPayPalAddress = $.extend({}, JSON.parse($paypalAddress.value), data.shippingAddress);\n                    $paypalAddress.value = JSON.stringify(newPayPalAddress);\n                }\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', updateAmountAndShippingData);\n    updateAmountAndShippingData();\n}\n\nmodule.exports = {\n    makePaypalPayment\n};\n","'use strict';\n\nvar braintreeUtils = require('../braintreeUtils');\nvar loaderInstance = require('../loaderHelper');\nvar {\n    showPDPButton,\n    hidePDPButton,\n    showCartErrorMsg } = require('./paypalHelper');\nvar { createPaymentFormData } = require('../helper');\n\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\n\nfunction staticImageHandler() {\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var loader = loaderInstance($loaderContainter);\n    var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n    var checkoutFromCartUrl = $staticPaypalButton.getAttribute('data-checkout-from-cart-url');\n    var placeOrderUrl = $staticPaypalButton.getAttribute('data-paypal-placeorder-url');\n\n    var ppAccountData = JSON.parse($staticPaypalButton.getAttribute('data-paypal-account-data'));\n    var ppAccountAddressData = JSON.parse(ppAccountData.address);\n    var paypalCheckoutFormFields = document.querySelector('.braintree-cart-paypal-buttons-wrap').getAttribute('data-paypal-checkout-form-fields');\n    var paypalCheckoutFormData = createPaymentFormData(paypalCheckoutFormFields, {\n        firstName: ppAccountAddressData.firstName,\n        lastName: ppAccountAddressData.lastName,\n        address1: ppAccountAddressData.streetAddress,\n        address2: ppAccountAddressData.extendedAddress || '',\n        city: ppAccountAddressData.locality,\n        postalCode: ppAccountAddressData.postalCode,\n        stateCode: ppAccountAddressData.state,\n        country: ppAccountAddressData.countryCodeAlpha2,\n        email: ppAccountData.email,\n        phone: ppAccountAddressData.phone.replace('-', ''),\n        paymentMethod: ppAccountData.paymentMethod\n    });\n    paypalCheckoutFormData.append('braintreeSavePaypalAccount', true);\n    paypalCheckoutFormData.append('paymentMethodUUID', ppAccountData.uuid);\n    var csrfToken = document.querySelector('.braintree-cart-paypal-buttons-wrap #csrf_token');\n    paypalCheckoutFormData.append(csrfToken.name, csrfToken.value);\n\n    loader.show();\n    if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n        var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n        if (res.error) {\n            loader.hide();\n            // eslint-disable-next-line no-unused-expressions\n            window.location.reload;\n            return;\n        }\n    }\n\n    return $.ajax({\n        url: checkoutFromCartUrl,\n        type: 'POST',\n        data: paypalCheckoutFormData,\n        contentType: false,\n        processData: false,\n        success: function (data) {\n            loader.hide();\n            if (data.error) {\n                var errorMessage = '';\n                if (data.fieldErrors.length) {\n                    data.fieldErrors.forEach(function (error, index) {\n                        var keys = Object.keys(error);\n                        if (keys.length) {\n                            errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                        }\n                    });\n                    showCartErrorMsg(errorMessage);\n                }\n\n                if (data.serverErrors.length) {\n                    data.serverErrors.forEach(function (error) {\n                        errorMessage += `${error}. `;\n                    });\n                    showCartErrorMsg(errorMessage);\n                }\n\n                if (data.cartError) {\n                    window.location.href = data.redirectUrl;\n                }\n                return;\n            }\n\n            sessionStorage.setItem('pageState', 'cart');\n            window.location.href = placeOrderUrl;\n        },\n        error: function (err) {\n            loader.hide();\n            if (err && err.redirectUrl) {\n                window.location.href = err.redirectUrl;\n            }\n        }\n    });\n}\n\nfunction paypalStaticPdpButtonHandler() {\n    if ($braintreePDPButton) {\n        var $price = document.querySelector('.price .sales .value');\n        var isZeroAmount = false;\n        var $miniCartQuantity = document.querySelector('.minicart-quantity');\n        var $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\n\n        // Check minicart quantity and hide PDPbutton if it is not empty\n        if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\n            || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\n            hidePDPButton($braintreePDPButton);\n        }\n\n        if ($addToCartButton.disabled) {\n            hidePDPButton($braintreePDPButton);\n        }\n\n        $('body').on('product:afterAddToCart', function () {\n            hidePDPButton($braintreePDPButton);\n        });\n\n        $('body').on('cart:update', function () {\n            $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n            if ($addToCartButton.disabled) {\n                hidePDPButton($braintreePDPButton);\n            }\n            if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                showPDPButton($braintreePDPButton);\n            }\n        });\n\n        $('body').on('product:statusUpdate', function () {\n            $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n            $price = document.querySelector('.price .sales .value');\n            isZeroAmount = false;\n            if ($price) {\n                isZeroAmount = $price.getAttribute('content') === '0.00';\n            }\n\n            if ($miniCartQuantity === 0) {\n                if ($addToCartButton.disabled || isZeroAmount) {\n                    hidePDPButton($braintreePDPButton);\n                }\n                if (!$addToCartButton.disabled && !isZeroAmount) {\n                    showPDPButton($braintreePDPButton);\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = {\n    staticImageHandler,\n    paypalStaticPdpButtonHandler\n};\n","var src = require('../braintreeSrc');\nvar loaderInstance = require('../loaderHelper');\n\nfunction submitAddSrcAccountForm() {\n    $('.js_braintree_addSrcAccountForm').submit(function () {\n        var $form = $(this);\n        var $btSrcFormErrorContainer = document.querySelector('#braintreeSrcFormErrorContainer');\n        $form.spinner().start();\n\n        $.post($form.attr('action'), $form.serialize())\n            .done(function (data) {\n                $form.spinner().stop();\n                if (!data.success) {\n                    $btSrcFormErrorContainer.style.display = 'block';\n                    $btSrcFormErrorContainer.textContent = data.error;\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            })\n            .fail(function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $form.spinner().stop();\n            });\n        return false;\n    });\n}\n\nfunction initAddSrcAccount() {\n    var srcIns;\n    var $btn = document.querySelector('.js_braintree_src_account_button');\n    var $srcNonce = document.querySelector('#braintreeSrcNonce');\n    var $btSrcFormErrorContainer = document.querySelector('#braintreeSrcFormErrorContainer');\n    var $btSrcLoader = document.querySelector('.braintreeSrcLoader');\n    var loader = loaderInstance($btSrcLoader);\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n    loader.show();\n\n    config.onTokenizePayment = function (data) {\n        if ($btSrcFormErrorContainer.style.display === 'block') {\n            $btSrcFormErrorContainer.style.display = 'none';\n            $btSrcFormErrorContainer.textContent = '';\n        }\n        $srcNonce.value = data.nonce;\n        document.querySelector('.braintreeSrcBtn').click();\n    };\n\n    srcIns = src.init(config, $btn);\n    srcIns.loadSrcButton();\n\n    $btn.setAttribute('data-is-inited', true);\n    submitAddSrcAccountForm();\n}\n\nmodule.exports = {\n    initAddSrcAccount\n};\n","var $srcContent = document.querySelector('.js_braintree_srcContent');\nvar $srcSessionAccount = document.querySelector('#sessionSrcAccount');\nvar $srcAccountList = document.querySelector('#braintreeSrcAccountsList');\nvar $srcButton = document.querySelector('.js_braintree_src_button');\nvar $accoutnListBlock = document.querySelector('.braintree_used_src_account');\nvar $alertInfo = document.getElementById('src-content') && document.getElementById('src-content').querySelectorAll('.alert-info')[0];\nvar helper = require('../helper');\nvar $saveSRCAccountCheckbox = document.querySelector('#braintreeSaveSRCAccount');\n\n\nfunction srcUpdateAmount(srcIns, config) { // eslint-disable-line require-jsdoc\n    srcIns.loader.show();\n    $.ajax({\n        url: config.getOrderInfoUrl,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            srcIns.loader.hide();\n            srcIns.updateAmount(data.amount);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction setSessionAccountData(cardDescrition) {\n    $srcSessionAccount.value = cardDescrition;\n    $srcSessionAccount.text = cardDescrition;\n    $srcSessionAccount.selected = true;\n    $accoutnListBlock.style.display = 'block';\n    $srcButton.style.display = 'none';\n    $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    helper.continueButtonToggle(false);\n}\n\nfunction updateSessionAccountDropdown() {\n    if ($srcAccountList.value === 'newaccount') {\n        $srcButton.style.display = 'block';\n        $alertInfo.style.display = 'block';\n        helper.continueButtonToggle(true);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', true);\n\n        if ($saveSRCAccountCheckbox) {\n            $saveSRCAccountCheckbox.checked = true;\n        }\n    } else {\n        $srcButton.style.display = 'none';\n        $alertInfo.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n\n        if ($saveSRCAccountCheckbox) {\n            $saveSRCAccountCheckbox.checked = JSON.parse($srcSessionAccount.getAttribute('data-save'));\n        }\n    }\n}\n\nfunction initSessionAccountDropdownState() {\n    if ($srcAccountList.value === 'newaccount') {\n        $alertInfo.style.display = 'block';\n        $accoutnListBlock.style.display = 'none';\n    } else {\n        helper.continueButtonToggle(false);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        $srcButton.style.display = 'none';\n        $alertInfo.style.display = 'none';\n    }\n}\n\n/*\n    Remove method was used and change appearance of googlepay tab\n**/\nfunction removeSessionNonce() {\n    var $sessionAccount = document.querySelector('#sessionSrcAccount');\n    $sessionAccount.value = '';\n    $sessionAccount.text = '';\n    $sessionAccount.setAttribute('data-save', false);\n    $accoutnListBlock.style.display = 'none';\n\n    document.querySelector('#braintreeSRCNonce').value = '';\n    document.querySelector('#braintreeSrcBillingAddress').value = '';\n    document.querySelector('#braintreeSrcCardDescription').value = '';\n\n    document.querySelector('#newSrcAccount').selected = true;\n    updateSessionAccountDropdown();\n}\n\nfunction createSrcShippingAddressData(shippingData) {\n    var shippingAddress = {};\n    shippingAddress.recipientName = shippingData.firstName + ' ' + shippingData.lastName;\n    shippingAddress.phone = shippingData.phoneNumber;\n    shippingAddress.countryCodeAlpha2 = shippingData.countryCode;\n    shippingAddress.streetAddress = shippingData.streetAddress;\n    shippingAddress.extendedAddress = shippingData.extendedAddress;\n    shippingAddress.locality = shippingData.locality;\n    shippingAddress.region = shippingData.region;\n    shippingAddress.postalCode = shippingData.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\nmodule.exports = {\n    srcUpdateAmount,\n    setSessionAccountData,\n    updateSessionAccountDropdown,\n    initSessionAccountDropdownState,\n    removeSessionNonce,\n    createSrcShippingAddressData\n};\n","'use strict';\nvar src = require('../braintreeSrc');\nvar srcHelper = require('./srcHelper');\n\nvar {\n    createPaymentFormData,\n    showCartErrorMsg,\n    updateBillingFormValues\n} = require('./../helper');\n\nvar $srcButton = document.querySelector('.js_braintree_src_button');\nvar $srcNonce = document.querySelector('#braintreeSRCNonce');\nvar $srcCardDescription = document.querySelector('#braintreeSrcCardDescription');\nvar $srcBillingAddress = document.querySelector('#braintreeSrcBillingAddress');\nvar $srcAccountList = document.querySelector('#braintreeSrcAccountsList');\nvar $srcOnCart = document.querySelector('.braintree-cart-src-button');\n\nfunction initSrcButton(continueButton) {\n    var srcIns;\n    var config = JSON.parse($srcButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($srcButton, 'not valid data-braintree-config');\n    }\n\n    if ($srcAccountList) {\n        srcHelper.initSessionAccountDropdownState();\n        $srcAccountList.addEventListener('change', srcHelper.updateSessionAccountDropdown);\n    }\n\n    config.onTokenizePayment = function (response) {\n        require('../helper').removeActiveSessionPayment();\n        var cardDescription = response.details.cardType + ' ' + response.description;\n        var deviceData = document.querySelector('input[name=braintreeSrcDeviceDataInput]').value;\n\n        // Billing Checkout\n        if (!$srcOnCart) {\n            $srcNonce.value = response.nonce;\n            $srcCardDescription.value = cardDescription;\n            srcHelper.setSessionAccountData(cardDescription);\n\n            // Updating Storefront Billing Form data with SRC Billing\n            var scrPayBillingData = response.billingAddress;\n            var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n            storeFrontBillingData.dwfrm_billing_addressFields_firstName = scrPayBillingData.firstName;\n            storeFrontBillingData.dwfrm_billing_addressFields_lastName = scrPayBillingData.lastName;\n            storeFrontBillingData.dwfrm_billing_addressFields_address1 = scrPayBillingData.streetAddress;\n            storeFrontBillingData.dwfrm_billing_addressFields_address2 = scrPayBillingData.extendedAddress || '';\n            storeFrontBillingData.dwfrm_billing_addressFields_city = scrPayBillingData.locality;\n            storeFrontBillingData.dwfrm_billing_addressFields_postalCode = scrPayBillingData.postalCode;\n            storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = scrPayBillingData.region;\n            storeFrontBillingData.dwfrm_billing_addressFields_country = scrPayBillingData.countryCode;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_email = response.userData.userEmail;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = scrPayBillingData.phoneNumber;\n\n            scrPayBillingData.email = response.userData.userEmail;\n            $srcBillingAddress.value = JSON.stringify(scrPayBillingData);\n\n            updateBillingFormValues(storeFrontBillingData);\n\n            continueButton.click();\n            return;\n        }\n\n        // Cart Checkout\n        var shippingAddressData = srcHelper.createSrcShippingAddressData(response.shippingAddress);\n        var paymentMethodName = JSON.parse($srcButton.getAttribute('data-braintree-config')).paymentMethodName;\n        var $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n        var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n        var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n        var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n        var srcCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n            firstName: response.userData.userFirstName,\n            lastName: response.userData.userLastName,\n            address1: response.billingAddress.streetAddress,\n            address2: response.billingAddress.extendedAddress || '',\n            city: response.billingAddress.locality,\n            postalCode: response.billingAddress.postalCode,\n            stateCode: response.billingAddress.region,\n            country: response.billingAddress.countryCode,\n            email: response.userData.userEmail,\n            phone: response.billingAddress.phoneNumber,\n            paymentMethod: paymentMethodName\n        });\n\n        var csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n        srcCheckoutFormData.append(csrfToken.name, csrfToken.value);\n        srcCheckoutFormData.append('braintreeSrcNonce', response.nonce);\n        srcCheckoutFormData.append('braintreeSrcDeviceDataInput', deviceData);\n        srcCheckoutFormData.append('braintreeSaveSRCAccount', true);\n        srcCheckoutFormData.append('braintreeSrcShippingAddress',\n            shippingAddressData || '{}'\n        );\n        srcCheckoutFormData.append('braintreeSrcCardDescription', cardDescription);\n\n        $.ajax({\n            type: 'POST',\n            url: checkoutFromCartUrl,\n            data: srcCheckoutFormData,\n            contentType: false,\n            processData: false,\n            success: function (data) {\n                if (data.error) {\n                    var errorMessage = '';\n                    if (data.fieldErrors.length) {\n                        data.fieldErrors.forEach(function (error, index) {\n                            var keys = Object.keys(error);\n                            if (keys.length) {\n                                errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                            }\n                        });\n                        showCartErrorMsg(errorMessage);\n                    }\n\n                    if (data.serverErrors.length) {\n                        data.serverErrors.forEach(function (error) {\n                            errorMessage += `${error}. `;\n                        });\n                        showCartErrorMsg(errorMessage);\n                    }\n\n                    if (data.cartError) {\n                        window.location.href = data.redirectUrl;\n                    }\n                    return;\n                }\n\n                sessionStorage.setItem('pageState', 'cart');\n                srcIns.loader.hide();\n                window.location.href = placeOrderUrl;\n            },\n            error: function (err) {\n                if (err && err.redirectUrl) {\n                    window.location.href = err.redirectUrl;\n                }\n            }\n        });\n    };\n\n    srcIns = src.init(config, $srcButton);\n    srcIns.loadSrcButton();\n\n    $('body').on('checkout:updateCheckoutView', srcHelper.srcUpdateAmount.bind(null, srcIns, config));\n    $('body').on('braintree:updateCartTotals', srcHelper.srcUpdateAmount.bind(null, srcIns, config));\n    srcHelper.srcUpdateAmount(srcIns, config);\n}\n\nmodule.exports = {\n    initSrcButton\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar helper = require('../helper');\nvar loaderInstance = require('../loaderHelper');\nvar accountsLoader;\n\nfunction initAddVenmoAccount() {\n    var $btn = document.querySelector('.js_braintree_accountVenmoButton');\n    var $venmoErrorContainer = document.querySelector('#venmoAccountErrorContainer');\n    var $venmoLoader = document.querySelector('#braintreeVenmoAccLoader');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n\n    config.$loaderContainer = $venmoLoader;\n    config.$errorContainer = $venmoErrorContainer;\n    config.deviceNotSupportVenmo = function () {\n        venmoHelper.showVenmoAccountError();\n        $venmoErrorContainer.textContent = config.messages.VENMO_BROWSER_NOT_SUPPORTED;\n    };\n    config.onTokenizePayment = function (data) {\n        let accountVenmoButton = document.querySelector('.js_braintree_accountVenmoButton');\n        let venmoAddAccountHandler = accountVenmoButton.getAttribute('data-venmo-add-account-handler');\n        let venmoAccountFormFields = accountVenmoButton.getAttribute('data-venmo-account-form-fields');\n        let venmoAccountFormData = helper.createPaymentFormData(venmoAccountFormFields, {\n            nonce: data.nonce\n        });\n        let csrfToken = document.querySelector('.js_braintree_accountVenmoButton_wrapper #csrf_token');\n        venmoAccountFormData.append(csrfToken.name, csrfToken.value);\n\n        let $loaderContainter = document.querySelector('#venmoAccountBtLoader');\n        accountsLoader = loaderInstance($loaderContainter);\n        accountsLoader.show();\n        return $.ajax({\n            type: 'POST',\n            url: venmoAddAccountHandler,\n            data: venmoAccountFormData,\n            contentType: false,\n            processData: false\n        })\n            .then((paymentData) => {\n                venmoHelper.hideVenmoAccountBtn();\n                $venmoLoader.style.display = 'none';\n                $venmoErrorContainer.textContent = '';\n                $venmoErrorContainer.style.display = 'none';\n\n                $.get(paymentData.renderAccountsUrl)\n                    .then((tplData => {\n                        accountsLoader.hide();\n                        document.querySelector('.venmo-accounts').innerHTML = tplData;\n                        document.querySelectorAll('.venmo-accounts .remove-bt-payment').forEach(function (el) {\n                            el.addEventListener('click', helper.removeBtPayment);\n                        });\n                    }));\n            })\n            .fail(({ responseJSON }) => {\n                accountsLoader.hide();\n                $venmoLoader.style.display = 'none';\n                $venmoErrorContainer.style.display = 'block';\n                $venmoErrorContainer.textContent = responseJSON.error;\n            });\n    };\n\n    braintreeVenmo.init(config, $btn);\n    $btn.setAttribute('isInited', true);\n}\n\nfunction initVenmoEvents() {\n    let $addVenmoAccountBtn = document.querySelector('.add-venmo-account');\n    $addVenmoAccountBtn.addEventListener('click', function () {\n        venmoHelper.showVenmoAccountBtn();\n        initAddVenmoAccount();\n    });\n}\n\nfunction initVenmoButtonsEvents() {\n    document.querySelector('.venmo-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            helper.removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = document.querySelector('.venmo-accounts').getAttribute('data-payment-method-id');\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            helper.setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\nmodule.exports = {\n    initVenmoEvents,\n    initAddVenmoAccount,\n    initVenmoButtonsEvents\n};\n","'use strict';\nvar helper = require('../helper');\n\nvar $accountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $saveVenmoAccountCountainerEl = document.querySelector('#braintreeSaveVenmoAccountContainer');\nvar $saveVenmoAccountEl = document.querySelector('#braintreeSaveVenmoAccount');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $braintreeVenmoAccount = document.getElementById('braintreeVenmoAccount');\nvar $venmoAccount = document.querySelector('.js_braintree_used_venmo_account');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\n\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nvar $addVenmoAccountBtn = document.querySelector('.add-venmo-account');\nvar $venmoAccountWrapper = document.querySelector('.js_braintree_accountVenmoButton_wrapper');\n\nfunction showVenmoAccount() {\n    if (!$accountsList) {\n        $venmoAccount.classList.remove('used-venmo-account-hide');\n        $braintreeVenmoAccount.options[0].text = $braintreeVenmoUserId.value;\n    }\n\n    $venmoButton.style.display = 'none';\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($accountsList.value === 'newaccount') {\n        $venmoButton.style.display = 'block';\n        helper.continueButtonToggle(true);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', true);\n    } else {\n        $venmoButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        if ($saveVenmoAccountCountainerEl) {\n            $saveVenmoAccountEl.checked = false;\n            $saveVenmoAccountCountainerEl.style.display = 'none';\n        }\n    }\n}\n\nfunction createLoaderContainter($target) {\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'venmo-braintree-loader';\n    helper.continueButtonToggle(true);\n\n    return $target.parentNode.insertBefore($loaderContainter, $target);\n}\n\nfunction hideVenmoButton() {\n    $venmoButton.parentElement.firstElementChild.style.display = 'none';\n    document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"Venmo\"]').style.display = 'none'; // Remove the venmo select payment method radiobutton\n}\n\n/**\n * updates the billing address form values within saved billing\n * @param {Object} billingAddress - the billing Address\n */\nfunction updateBillingAddressFormValues(billingAddress) {\n    var form = $('form[name=dwfrm_billing]');\n    var inputNames = ['firstName', 'lastName', 'address1', 'address2', 'city', 'postalCode', 'country'];\n    if (!form) return;\n\n    $.each(inputNames, function (index, value) {\n        $(`input[name$=_${value}]`, form).val(decodeURIComponent(billingAddress[value]));\n    });\n    $('select[name$=_stateCode],input[name$=_stateCode]', form)\n        .val(billingAddress.stateCode);\n}\n\nfunction showVenmoAccountBtn() {\n    $addVenmoAccountBtn.style.display = 'none';\n    $venmoAccountWrapper.style.display = 'block';\n}\nfunction hideVenmoAccountBtn() {\n    $addVenmoAccountBtn.style.display = 'block';\n    $venmoAccountWrapper.style.display = 'none';\n}\nfunction showVenmoAccountError() {\n    $addVenmoAccountBtn.style.display = 'none';\n    $venmoAccountWrapper.style.display = 'block';\n    [].slice.call($venmoAccountWrapper.children).forEach(function (item) {\n        if (!item.classList.contains('error')) {\n            item.style.display = 'none';\n        }\n    });\n}\n\n/*\n    Remove method was used and change appearance of venmo tab\n**/\nfunction removeSessionNonce() {\n    var defaultOption = helper.getOptionByDataDefault('#braintreeVenmoAccountsList');\n    document.querySelector('#braintreeVenmoNonce').value = '';\n    document.querySelector('#braintreeVenmoBilling').value = '';\n    if (defaultOption) {\n        defaultOption.selected = true;\n        hideShowButtons();\n    } else {\n        $venmoAccount.classList.remove('used-venmo-account');\n        $venmoAccount.classList.add('used-venmo-account-hide');\n        $venmoButton.style.display = 'block';\n    }\n}\n\nmodule.exports = {\n    showVenmoAccount,\n    hideShowButtons,\n    createLoaderContainter,\n    hideVenmoButton,\n    updateBillingAddressFormValues,\n    showVenmoAccountBtn,\n    hideVenmoAccountBtn,\n    showVenmoAccountError,\n    removeSessionNonce\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar loaderInstance = require('../loaderHelper');\nvar helper = require('../helper');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $btVermoAccountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $braintreeVenmoNonce = document.querySelector('#braintreeVenmoNonce');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\nvar $submitShippingBtn = document.querySelector('.button, .submit-shipping');\nvar $contactEmail = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $hideVenmoButton = document.querySelector('.braintree-venmo-pay-button');\nvar $billingForm = document.querySelector('.card-body [id=dwfrm_billing]');\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nfunction makeVenmoPayment(continueButton) {\n    var config = JSON.parse($venmoButton.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($venmoButton, 'not valid data-braintree-config');\n    }\n\n    if (JSON.parse($hideVenmoButton.getAttribute('data-is-hide-venmo-button')) && $btVermoAccountsList !== 'newaccount') {\n        $venmoButton.style.display = 'none';\n    }\n\n    if ($btVermoAccountsList) {\n        $btVermoAccountsList.addEventListener('change', function () {\n            venmoHelper.hideShowButtons();\n        });\n        venmoHelper.hideShowButtons();\n    }\n\n    config.onClick = function () {\n        if ($billingForm.checkValidity()) {\n            /**\n                * Setting current customer Billing address to form\n                *  For the case when SFCC redirects customer from payment stage to shipping stage\n                *  after successful Venmo app response\n            */\n            document.querySelector('#braintreeVenmoBilling').value = JSON.stringify(helper.getBillingAddressFormValues());\n\n            return true;\n        }\n        $contactEmail.classList.add('is-invalid');\n        return false;\n    };\n    config.deviceNotSupportVenmo = function () {\n        venmoHelper.hideVenmoButton();\n    };\n    config.onTokenizePayment = function (data) {\n        var $loaderContainer = venmoHelper.createLoaderContainter(document.querySelector('.page'));\n        loaderInstance($loaderContainer).show();\n        helper.removeActiveSessionPayment();\n\n        $braintreeVenmoNonce.value = data.nonce;\n        $braintreeVenmoUserId.value = data.details.username;\n\n        if (window.history.state !== 'shipping') {\n            continueButton.click();\n            document.querySelector('.venmo-braintree-loader').remove();\n            return true;\n        }\n\n        venmoHelper.updateBillingAddressFormValues(JSON.parse(document.querySelector('#braintreeVenmoBilling').value));\n\n        // move to stage payment\n        $submitShippingBtn.click();\n        $venmoButton.setAttribute('data-is-valid-stage', true);\n        $venmoButton.setAttribute('data-user-email', $contactEmail.value);\n        document.querySelector('.venmo-braintree-loader').remove();\n    };\n\n    /**\n        *  Init Venmo app with correct URL fragment (hash) to prevent Browser from opening the URL in a new tab.\n        *  Braintree JS SDK is preserving the URL in its entirety and modifies the URL fragment (hash)\n        *  to send back the results from Venmo (e.g. nonce, error message, etc.)\n        *\n    */\n    var hashChange = new MutationObserver(function (mutations) {\n        var correlationId = document.querySelector('#braintreeVenmoDeviceData').value || null;\n        var mutation = mutations.find(function (element) {\n            return element.attributeName === 'data-checkout-stage' && element.target.dataset.checkoutStage === 'payment';\n        });\n\n        if (!mutation) {\n            return false;\n        }\n        if (!correlationId) {\n            braintreeVenmo.init(config, $venmoButton);\n            return true;\n        }\n\n        if ($braintreeVenmoNonce.value && JSON.parse($venmoButton.getAttribute('data-is-valid-stage'))) {\n            $contactEmail.value = $venmoButton.getAttribute('data-user-email') || '';\n            $venmoButton.setAttribute('data-is-valid-stage', false);\n            continueButton.click();\n\n            return true;\n        }\n        if ($venmoContent.classList.contains('active') && mutation.oldValue === 'placeOrder') {\n            venmoHelper.showVenmoAccount();\n            $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            $hideVenmoButton.setAttribute('data-is-hide-venmo-button', true);\n        }\n    });\n\n    hashChange.observe(document.querySelector('#checkout-main'), { attributeOldValue: true });\n}\n\nmodule.exports = {\n    makeVenmoPayment\n};\n","require('./braintree/braintreeMFRA')();\n"],"sourceRoot":""}