{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/applepay/applepayHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeApplepay.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeGooglepay.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeLocal.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreePaypal.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeSrc.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeUtils.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeVenmo.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/creditcard/creditcardHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/googlepay/googlepayAccount.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/googlepay/googlepayHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/googlepay/googlepayPayment.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/helper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/loaderHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/local/localPayment.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/minicartHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalAccount.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalPayment.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalSavedAccountHandler.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/src/srcAccount.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/src/srcHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/src/srcPayment.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/venmo/venmoAccount.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/venmo/venmoHelper.js","webpack:///../link_braintree/cartridges/int_braintree/cartridge/client/default/js/braintree/venmo/venmoPayment.js","webpack:///../storefront-reference-architecture/cartridges/app_storefront_base/cartridge/client/default/js/components/scrollAnimate.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/applepay/applepayHelper.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/braintreeCreditCard.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/braintreeCustomMFRA.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/creditcard/creditcardAccount.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/creditcard/creditcardFields.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/creditcard/creditcardHelper.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/creditcard/creditcardPayment.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/braintree/helper.js","webpack:///./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/int_braintree_custom.js"],"names":["applePay","require","isValidInputField","removeActiveSessionPayment","createPaymentFormData","showCartErrorMsg","updateBillingFormValues","$applePayButton","document","querySelector","$applepayButtonsWrap","$applepayDataMethod","$emailField","$phoneField","makeApplePayButtonDisabled","classList","add","hideApplePayButton","style","display","showApplePayButton","apbtn","console","log","initApplepayButton","querySelectorAll","forEach","el","$btn","JSON","parse","getAttribute","config","error","addEventListener","isRequiredBillingContactFields","isRequiredShippingContactFields","applePayIns","init","startPayment","updateCartApplepayAmount","loader","show","$","ajax","url","getOrderInfoUrl","type","dataType","success","data","hide","updateAmount","amount","window","location","reload","on","e","responseData","detail","billingAddressData","billingAddress","paymentMethodName","$braintreeCartButtons","placeOrderUrl","checkoutFromCartUrl","checkoutFormFields","applePayCheckoutFormData","firstName","lastName","address1","streetAddress","address2","extendedAddress","city","locality","postalCode","stateCode","state","country","countryCodeAlpha2","email","phone","paymentMethod","csrfToken","append","name","value","nonce","deviceData","stringify","shippingAddress","contentType","processData","errorMessage","fieldErrors","length","index","keys","Object","replace","serverErrors","cartError","href","redirectUrl","err","setAttribute","applepayPayment","continueButton","applepayButton","authorizedApplePayPayment","applePayBillingData","storeFrontBillingData","dwfrm_billing_addressFields_firstName","dwfrm_billing_addressFields_lastName","dwfrm_billing_addressFields_address1","dwfrm_billing_addressFields_address2","dwfrm_billing_addressFields_city","dwfrm_billing_addressFields_postalCode","dwfrm_billing_addressFields_states_stateCode","dwfrm_billing_addressFields_country","dwfrm_billing_contactInfoFields_email","dwfrm_billing_contactInfoFields_phone","click","appleUpdateAmountData","removeSessionNonce","module","exports","braintreeUtils","loaderInstance","bu","Constructor","initParams","$errorContainer","createElement","className","$loaderContainter","parentNode","insertBefore","nextSibling","params","er","createErrorInstance","prototype","createApplePay","that","$braintreeApplePayDeviceDataInput","braintree","client","create","authorization","clientToken","clientErr","clientInstance","isFraudToolsEnabled","dataCollector","paypal","dataCollectorErr","dataCollectorInstance","applePayInstance","createApplePaySession","paymentRequest","createPaymentRequest","total","label","options","displayName","requiredBillingContactFields","requiredShippingContactFields","session","ApplePaySession","onvalidatemerchant","event","performValidation","validationURL","eventError","merchantSession","abort","completeMerchantValidation","onpaymentauthorized","tokenize","token","payment","payload","completePayment","STATUS_FAILURE","STATUS_SUCCESS","shippingContact","addressLines","region","administrativeArea","toUpperCase","countryCode","givenName","familyName","phoneNumber","emailAddress","billingContact","dispatchEvent","CustomEvent","begin","promise","canMakePaymentsWithActiveCard","merchantIdentifier","then","ins","extend","messages","paypalHelper","$googlepayCartButton","$googlepayBillingButton","createGooglepay","$braintreeGooglePayDeviceDataInput","paymentsClient","google","payments","api","PaymentsClient","environment","googlePayment","googlePayVersion","googlePaymentErr","googlePaymentInstance","allowedPaymentMethods","createPaymentDataRequest","isReadyToPay","apiVersion","apiVersionMinor","response","result","onGooglePaymentButtonClicked","isAccount","zeroAmountErrorMsg","showCheckoutErrorMsg","paymentDataRequest","transactionInfo","currencyCode","currency","totalPriceStatus","totalPrice","String","shippingAddressRequired","isShippingAddressRequired","shippingAddressParameters","allowedCountryCodes","phoneNumberRequired","emailRequired","cardPaymentMethod","parameters","billingAddressRequired","billingAddressParameters","format","loadPaymentData","paymentData","parseResponse","onTokenizePayment","catch","button","createButton","onClick","appendChild","scrollAnimate","errorText","createLocalPayment","localPayment","localPaymentInstance","createLocalPaymentClickListener","emailField","preventDefault","getJSON","reqData","assign","createRequestData","onPaymentStart","_","start","details","correlationId","processingMsg","finalProcessingMsg","paymentConfirmUrl","lpmName","jQuery","isEmptyObject","correlation_id","text","message","responseText","dataset","localPaymentMethodName","shippingData","recipientName","split","paymentType","fallback","fallbackUrl","buttonText","surname","address","updateShippingData","localIns","updateShippingAddress","pid","uuid","removeFromCartUrl","$price","sdkUrlConfiguration","isZeroAmount","$braintreePDPButton","$miniCartQuantity","$addToCartButton","$paypalCartButton","$paypalBillingButton","$braintreePaypalRiskDataInput","$loaderContainer","kount","riskData","parseInt","textContent","hidePDPButton","paypalCheckout","paypalCheckoutInstance","disabled","showPDPButton","res","pdpOnlickForAsignedPaypalPayment","cart","pliUUID","actionUrls","removeProductLineItemUrl","parseFloat","totals","grandTotal","Error","createPayment","paypalButtonConfig","locale","onApprove","intent","tokenizePayment","onCancel","a","b","urlParams","appendToUrl","spinner","stop","onError","productID","actions","reject","flow","createOrder","components","commit","createBillingAgreement","vault","paypalConfig","isPayPalSDKLoaded","loadPayPalSDK","Buttons","render","shippingAddressOverride","loadSrcButton","$braintreeSrcDeviceDataInput","visaCheckout","srcPaymentErr","visaCheckoutInstance","baseInitOptions","subtotal","settings","cardBrands","acceptCanadianVisaDebit","initOptions","createInitOptions","shipping","collectShipping","V","tokenizeErr","billingAddressString","userData","userEmail","isDebugMode","consoleLog","consoleError","apply","arguments","$bundleItem","getOptions","$productContainer","find","map","$elOption","urlValue","val","selectedValueId","optionId","toArray","closest","form","quantity","items","childProducts","method","async","responseJSON","getSelectedData","selectEl","getElementsByTagName","option","i","selected","attributes","postData","formData","FormData","key","errorInstances","containerElement","callback","cb","push","containerEl","msg","code","innerHTML","$braintreeVenmoRiskDataInput","createVenmo","isBrowserSupported","venmo","allowNewBrowserTab","allowDesktop","ignoreHistoryChanges","venmoErr","venmoInstance","deviceNotSupportVenmo","venmoAccountPage","processResultsDelay","handleVenmoError","handleVenmoSuccess","helper","$creditCardList","$saveCreditCard","$cardOwner","creditcardErrorContainer","errorIns","errorData","invalidFieldKeys","convertCardTypeToDwFormat","braintreeType","cardOwnerUpdateClasses","remove","setCardFields","selectedCard","cacheCardFields","cardNumbeberPh","cardCvvPh","cardExpirationPh","cardOwnerPh","showCardElements","cardFields","hideCardElements","getCardFieldsPH","getCardFields","cardListChange","$cardOwnerPh","$cardNumbeber","$cardNumbeberPh","$cardCvv","$cardCvvPh","$cardExpiration","$cardExpirationPh","$braintreeSaveCardContainer","$creditCardFieldsContainer","$braintree3DSecureContainer","changeCardOwnerInput","isSaveCard","Event","createEvent","initEvent","checked","selectedOptions","id","initCardListAndSaveFunctionality","cardOwnerEvents","updateSessionAccount","sessionOption","getSessionAccountOption","defaultOption","getOptionByDataDefault","cardFieldsPH","ccAccount","call","googlepay","submitAddGooglePayAccountForm","submit","$form","$btFormErrorContainer","post","attr","serialize","done","fail","initAddGooglePayAccount","$googlepayNonce","$btGooglePayLoader","googlepayIns","saving_paypal_account_error","$googlepayContent","$btGooglepayAccountsList","$googlepayButton","$saveGooglePayAccountCheckbox","$googlepayTab","showGooglepayAccount","$sessionAccount","$gpAccount","continueButtonToggle","hideShowButtons","contains","createGooglepayBillingAddressData","billingData","paymentMethodData","info","createGooglepayShippingAddressData","$googlepayOnCart","$googlepayCardDescription","$braintreeGooglepayPaymentType","$googlePayBillingAddress","makeGooglepayPayment","googlepayNonce","googlepayPaymentType","googlepayCardDescription","cardType","lastFour","shippingAddressData","googlepayCheckoutFormData","sessionStorage","setItem","newGPAccount","getElementById","sessionGPAccount","removeAttribute","googlepayUpdateAmount","$continueButton","initWathcherCartUpdate","$grantTotal","currentGrantTotalValue","newGrantTotalValue","updateCartTotals","flag","stage","hash","substring","paymentMethodChangeHandle","currentTab","$tabContent","tab","getPaymentMethodToLowerCase","element","charAt","slice","toLocaleLowerCase","updateCheckoutView","$paymentSummary","htmlToAppend","order","billing","selectedPaymentInstruments","maskedCreditCardNumber","braintreePaypalEmail","braintreeVenmoUserId","priceTotal","field","checkValidity","updatePaymentMethodTab","braintreePaymentMethod","content","toLowerCase","children","getBillingAddressFormValues","reduce","accumulator","item","elem","lastIndexOf","isNonceExist","$nonce","nonceValue","$tab","isActiveTab","accountsLoader","removeBtPayment","target","get","UUID","newDefaultAccount","fontWeight","paymentFields","fieldsData","paymentFieldsParsed","entries","entry","setDefaultProperty","paymentMethodID","newDefaultProperty","toRemoveDefaultProperty","initCardEvents","onclick","selector","Array","activePaymentMethods","methodId","helpers","PayPal","Venmo","GooglePay","CreditCard","SRC","ApplePay","activePM","addClass","scrollTo","$billingFormFields","braintreeLocal","$lpmButton","updateAmountData","payPal","paypalSavedAccountHandler","$paypalMinicartButton","miniCartButton","btnInstance","paypalCheckoutFormFields","createBillingAddressData","paypalCheckoutFormData","createShippingAddressData","paypalHandle","paypalIns","updateCartPaypalAmount","$totalPrice","observer","MutationObserver","mutations","mutation","addedNodes","$staticPaypalButton","staticImageHandler","initAddPaypalAccount","$paypalErrorContainer","$paypalLoader","accountPaypalButton","paypalAddAccountHandler","paypalAccountFormFields","paypalBillingAddressData","paypalAccountFormData","addresses","hidePaypalAccountBtn","renderAccountsUrl","tplData","initPayPalEvents","showPaypalAccountBtn","initPaypalButtonsEvents","$addPaypalAccountBtn","$paypalAccountWrapper","$savePaypalAccountCountainer","$savePaypalAccountCheckbox","$braintreePayPalNonce","formValidationConrol","validateActions","isFormValid","enable","disable","getOptionByEmail","sessionEmail","setSessionAccountOptionDefault","savedDefaultOption","$paypalContent","paypalAccount","initAccountListAndSaveFunctionality","$accountsList","$alertInfo","accountsListChange","isSameSessionAccount","removeEventListener","inpShippingAddress","line1","line2","inpBillingAddress","param","newUrl","indexOf","encodeURIComponent","join","showPayPalAccount","braintreePaypalNonce","braintreePaypalAccount","$braintreePaypalAccountsList","customerAuthenticated","$paypalButton","$braintreePaypalNonceInput","$braintreePaypalEmail","$braintreePaypalNonce","$braintreePaypalBillingAddressInput","makePaypalPayment","isSessionAccount","paypalBillingData","sessionAccount","newPPAccount","validate","updateAmountAndShippingData","$paypalAddress","newPayPalAddress","ppAccountData","ppAccountAddressData","paypalStaticPdpButtonHandler","src","submitAddSrcAccountForm","$btSrcFormErrorContainer","initAddSrcAccount","srcIns","$srcNonce","$btSrcLoader","$srcContent","$srcSessionAccount","$srcAccountList","$srcButton","$accoutnListBlock","$saveSRCAccountCheckbox","srcUpdateAmount","setSessionAccountData","cardDescrition","updateSessionAccountDropdown","initSessionAccountDropdownState","createSrcShippingAddressData","srcHelper","$srcCardDescription","$srcBillingAddress","$srcOnCart","initSrcButton","cardDescription","description","scrPayBillingData","srcCheckoutFormData","userFirstName","userLastName","bind","braintreeVenmo","venmoHelper","initAddVenmoAccount","$venmoErrorContainer","$venmoLoader","showVenmoAccountError","VENMO_BROWSER_NOT_SUPPORTED","accountVenmoButton","venmoAddAccountHandler","venmoAccountFormFields","venmoAccountFormData","hideVenmoAccountBtn","initVenmoEvents","$addVenmoAccountBtn","showVenmoAccountBtn","initVenmoButtonsEvents","$saveVenmoAccountCountainerEl","$saveVenmoAccountEl","$venmoButton","$braintreeVenmoAccount","$venmoAccount","$braintreeVenmoUserId","$venmoContent","$venmoAccountWrapper","showVenmoAccount","createLoaderContainter","$target","hideVenmoButton","parentElement","firstElementChild","updateBillingAddressFormValues","inputNames","each","decodeURIComponent","$btVermoAccountsList","$braintreeVenmoNonce","$submitShippingBtn","$contactEmail","$hideVenmoButton","$billingForm","makeVenmoPayment","username","history","hashChange","attributeName","checkoutStage","oldValue","observe","attributeOldValue","position","offset","top","animate","scrollTop","focus","creditcardHelper","formId","createHostedFields","hostedFields","styles","hostedFieldsStyles","fields","hostedFieldsConfig","hostedFieldsInstance","$cardOwnerEl","validation","clearHostedFields","clear","check3dSecureAndSubmit","startTokenizeCb","errorCode","is3dSecureEnabled","threeDSecure","version","btError","verifyCard","bin","additionalInformation","shippingAdditionalInfo","onLookupComplete","next","liabilityShifted","isSkip3dSecureLiabilityResult","secure3DFailed","createTokenizationOptions","includes","startTokenize","tokenizationOptions","expirationMonth","expirationYear","substr","creditCardFieldsCardNumber","is","initFields","$container","getHostedFieldsStyles","input","color","getHostedFieldsConfig","number","cvv","expirationDate","hostedFieldsAdvancedOptions","getHostedFieldInstance","updateData","applepayHelper","creditcardPayment","creditCardFields","creditCard","creditCardAccount","minicartHelper","paypalPayment","local","orderStage","pageState","getItem","$cartPage","$summaryDetails","$addCreditCardForm","$creditCardContent","$creditCardContentModal","$applepayContent","$minicartPopover","venmoAccount","venmoPayment","googlePayAccount","googlepayPayment","$addGooglePayAccountForm","$braintreeGooglePayNonce","braintreeSrc","srcAccount","$addSrcAccountForm","$braintreeSrcNonce","NodeList","bubbles","cancelable","undefined","evt","initCustomEvent","initAccountAddCreditCard","childList","initCreditCardFields","doNotAllowSubmitForm","setTimeout","hide3DSecureContainer","isTrusted","makeCreditCardPayment","removeAttr","modal","hasClass","removeClass","preCard","parent","formatedVal","addCreditCardForm","updateBillingForm","cardList","paypalList","changeEvent","stopPropagation","stopImmediatePropagation","prop","curVal","removeItem","submitCreditCardForm","getShippingAdditionalInfo","orderAddress","workPhoneNumber","shippingGivenName","shippingSurname","shippingPhone","updateAccountsList","newCCAccount","isSavedCard","allowSubmitForm","isActiveCreditCardTab","getNonceUrl","cardUUID","$curDiv"],"mappings":"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","file":"int_braintree_custom.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./cartridges/int_braintree_custom_tatcha_us/cartridge/client/default/js/int_braintree_custom.js\");\n","'use strict';\nvar applePay = require('../braintreeApplepay');\nvar {\n    isValidInputField,\n    removeActiveSessionPayment,\n    createPaymentFormData,\n    showCartErrorMsg,\n    updateBillingFormValues\n} = require('./../helper');\n\n\nvar $applePayButton = document.querySelector('.js_braintree_applepay_button');\nvar $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\nvar $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\nvar $emailField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $phoneField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]');\n\nfunction makeApplePayButtonDisabled() {\n    $applePayButton.classList.add('js_braintree_applepay_button_disabled');\n}\n\nfunction hideApplePayButton() {\n    $applepayButtonsWrap.style.display = 'none'; // Remove the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'none';\n    }\n}\n\nfunction showApplePayButton() {\n    var apbtn = document.querySelector('.js_braintree_applepayButtonsWrap');\n    console.log('apbtn----', apbtn.style);\n    apbtn.style.display = 'block'; // Show the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'block';\n    }\n}\n\nfunction initApplepayButton() {\n    console.log('apple pay init called --- ');\n    document.querySelectorAll('.js_braintree_applepay_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        $btn.addEventListener('braintree:deviceNotSupportApplePay', function () {\n            hideApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:deviceSupportApplePay', function () {\n            showApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n            makeApplePayButtonDisabled();\n        }, false);\n\n        config.isRequiredBillingContactFields = true;\n        config.isRequiredShippingContactFields = true;\n        var applePayIns = applePay.init(config, $btn);\n\n        $btn.addEventListener('click', function () {\n            applePayIns.startPayment();\n        });\n\n        function updateCartApplepayAmount() {\n            if (!applePayIns) {\n                return;\n            }\n            applePayIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    applePayIns.loader.hide();\n                    applePayIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n            return;\n        }\n        $('body').on('braintree:updateCartTotals', updateCartApplepayAmount);\n\n        $btn.addEventListener('braintree:ApplePayPaymentAuthorized', function (e) {\n            applePayIns.loader.show();\n            var responseData = e.detail.data;\n            var billingAddressData = responseData.billingAddress;\n            console.log('---$applePayButton----', $applePayButton.getAttribute('data-braintree-config'));\n\n            var paymentMethodName = JSON.parse($applePayButton.getAttribute('data-braintree-config')).paymentMethodName;\n            var $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n            var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n            var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n            var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n            var applePayCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n                firstName: billingAddressData.firstName,\n                lastName: billingAddressData.lastName,\n                address1: billingAddressData.streetAddress,\n                address2: billingAddressData.extendedAddress || '',\n                city: billingAddressData.locality,\n                postalCode: billingAddressData.postalCode,\n                stateCode: billingAddressData.state,\n                country: billingAddressData.countryCodeAlpha2,\n                email: billingAddressData.email,\n                phone: billingAddressData.phone,\n                paymentMethod: paymentMethodName\n            });\n\n            var csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n            applePayCheckoutFormData.append(csrfToken.name, csrfToken.value);\n            applePayCheckoutFormData.append('braintreeApplePayNonce', responseData.nonce);\n            applePayCheckoutFormData.append('braintreeApplePayDeviceDataInput', responseData.deviceData);\n            applePayCheckoutFormData.append('braintreeApplePayShippingAddress',\n            JSON.stringify(responseData.shippingAddress) || '{}'\n            );\n\n            $.ajax({\n                type: 'POST',\n                url: checkoutFromCartUrl,\n                data: applePayCheckoutFormData,\n                contentType: false,\n                processData: false,\n                success: function (data) {\n                    if (data.error) {\n                        var errorMessage = '';\n                        if (data.fieldErrors.length) {\n                            data.fieldErrors.forEach(function (error, index) {\n                                var keys = Object.keys(error);\n                                if (keys.length) {\n                                    errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                                }\n                            });\n                            showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.serverErrors.length) {\n                            data.serverErrors.forEach(function (error) {\n                                errorMessage += `${error}. `;\n                            });\n                            showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.cartError) {\n                            window.location.href = data.redirectUrl;\n                        }\n                        return;\n                    }\n\n                    window.location.href = placeOrderUrl;\n                },\n                error: function (err) {\n                    if (err && err.redirectUrl) {\n                        window.location.href = err.redirectUrl;\n                    }\n                }\n            });\n        }, false);\n\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nfunction applepayPayment(continueButton) {\n    var config = JSON.parse($applePayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($applePayButton, 'not valid data-braintree-config');\n    }\n    var applepayButton = $('.js_braintree_applepay_button');\n    applepayButton.on('braintree:deviceNotSupportApplePay', function () {\n        hideApplePayButton();\n    });\n    applepayButton.on('braintree:deviceSupportApplePay', function () {\n        showApplePayButton();\n    });\n    applepayButton.on('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n        makeApplePayButtonDisabled();\n    });\n\n    config.isRequiredBillingContactFields = true;\n    var applePayIns = applePay.init(config, $applePayButton);\n\n    function authorizedApplePayPayment(e) {\n        removeActiveSessionPayment();\n        applePayIns.loader.show();\n        document.querySelector(('#braintreeApplePayNonce')).value = e.detail.data.nonce;\n\n        // Updating Storefront Billing Form data with ApplePay Billing\n        var applePayBillingData = e.detail.data.billingAddress;\n        var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n        storeFrontBillingData.dwfrm_billing_addressFields_firstName = applePayBillingData.firstName;\n        storeFrontBillingData.dwfrm_billing_addressFields_lastName = applePayBillingData.lastName;\n        storeFrontBillingData.dwfrm_billing_addressFields_address1 = applePayBillingData.streetAddress;\n        storeFrontBillingData.dwfrm_billing_addressFields_address2 = applePayBillingData.extendedAddress || '';\n        storeFrontBillingData.dwfrm_billing_addressFields_city = applePayBillingData.locality;\n        storeFrontBillingData.dwfrm_billing_addressFields_postalCode = applePayBillingData.postalCode;\n        storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = applePayBillingData.state;\n        storeFrontBillingData.dwfrm_billing_addressFields_country = applePayBillingData.countryCodeAlpha2;\n        storeFrontBillingData.dwfrm_billing_contactInfoFields_email = applePayBillingData.email;\n        storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = applePayBillingData.phone;\n\n        updateBillingFormValues(storeFrontBillingData);\n        continueButton.click();\n    }\n\n    if (!applePayIns) return;\n    $applePayButton.addEventListener('click', function () {\n        if (isValidInputField($emailField) && isValidInputField($phoneField)) {\n            return applePayIns.startPayment();\n        }\n    });\n\n    applepayButton.on('braintree:ApplePayPaymentAuthorized', authorizedApplePayPayment);\n\n    function appleUpdateAmountData() { // eslint-disable-line no-inner-declarations\n        applePayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                applePayIns.loader.hide();\n                applePayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n    $('body').on('checkout:updateCheckoutView', appleUpdateAmountData);\n    appleUpdateAmountData();\n}\n\n/*\n    Remove method was used and change appearance of applepay tab\n**/\nfunction removeSessionNonce() {\n    document.querySelector('#braintreeApplePayNonce').value = '';\n    document.querySelector('#braintreeApplePayDeviceData').value = '';\n}\nwindow.initApplepayButton = initApplepayButton;\nmodule.exports = {\n    initApplepayButton,\n    applepayPayment,\n    removeSessionNonce\n};\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n/* global braintreeUtils braintree $ ApplePaySession */\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeApplePayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createApplePay = function () {\n    var that = this;\n    var params = that.params;\n    this.$braintreeApplePayDeviceDataInput = document.querySelector('input[name=braintreeApplePayDeviceDataInput]');\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        if (params.isFraudToolsEnabled) {\n            braintree.dataCollector.create({\n                client: clientInstance,\n                paypal: true\n            }, function (dataCollectorErr, dataCollectorInstance) {\n                if (dataCollectorErr) {\n                    that.er.show(dataCollectorErr);\n                    return;\n                }\n\n                if (that.$braintreeApplePayDeviceDataInput) {\n                    that.$braintreeApplePayDeviceDataInput.value = dataCollectorInstance.deviceData;\n                }\n                that.loader.hide();\n            });\n        }\n\n        braintree.applePay.create({\n            client: clientInstance\n        }, function (error, applePayInstance) {\n            loader.hide();\n            if (error) {\n                that.er.show(error);\n                return;\n            }\n            that.createApplePaySession = function () {\n                var paymentRequest = applePayInstance.createPaymentRequest({\n                    total: {\n                        label: params.options.displayName,\n                        amount: params.options.amount\n                    }\n                });\n                if (params.isRequiredBillingContactFields) {\n                    paymentRequest.requiredBillingContactFields = ['postalAddress', 'name'];\n                }\n                if (params.isRequiredShippingContactFields) {\n                    paymentRequest.requiredShippingContactFields = ['postalAddress', 'name', 'phone', 'email'];\n                }\n\n                var session = new ApplePaySession(1, paymentRequest);\n\n                session.onvalidatemerchant = function (event) {\n                    loader.show();\n                    applePayInstance.performValidation({\n                        validationURL: event.validationURL,\n                        displayName: params.options.displayName\n                    }, function (eventError, merchantSession) {\n                        loader.hide();\n                        if (eventError) {\n                            that.er.show(eventError);\n                            session.abort();\n                            return;\n                        }\n                        session.completeMerchantValidation(merchantSession);\n                    });\n                };\n                session.onpaymentauthorized = function (event) {\n                    loader.show();\n                    applePayInstance.tokenize({\n                        token: event.payment.token\n                    }, function (eventError, payload) {\n                        loader.hide();\n                        if (eventError) {\n                            that.er.show(eventError);\n                            session.completePayment(ApplePaySession.STATUS_FAILURE);\n                            return;\n                        }\n\n                        session.completePayment(ApplePaySession.STATUS_SUCCESS);\n\n                        var data = {\n                            event: event,\n                            payload: payload,\n                            nonce: payload.nonce,\n                            deviceData: document.querySelector('input[name=braintreeApplePayDeviceDataInput]').value\n                        };\n                        var shippingContact = event.payment.shippingContact;\n                        if (shippingContact) {\n                            data.shippingAddress = {\n                                streetAddress: shippingContact.addressLines[0],\n                                extendedAddress: shippingContact.addressLines[1],\n                                locality: shippingContact.locality,\n                                region: shippingContact.administrativeArea.toUpperCase(),\n                                postalCode: shippingContact.postalCode,\n                                countryCodeAlpha2: shippingContact.countryCode.toUpperCase(),\n                                firstName: shippingContact.givenName,\n                                lastName: shippingContact.familyName,\n                                phone: shippingContact.phoneNumber,\n                                email: shippingContact.emailAddress\n                            };\n                        } else {\n                            shippingContact = {\n                                emailAddress: document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]').value,\n                                phoneNumber: document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]').value\n                            };\n                        }\n\n                        var billingContact = event.payment.billingContact;\n                        if (billingContact) {\n                            data.billingAddress = {\n                                streetAddress: billingContact.addressLines[0],\n                                extendedAddress: billingContact.addressLines[1],\n                                locality: billingContact.locality,\n                                region: billingContact.administrativeArea.toUpperCase(),\n                                postalCode: billingContact.postalCode,\n                                countryCodeAlpha2: billingContact.countryCode.toUpperCase(),\n                                firstName: billingContact.givenName,\n                                lastName: billingContact.familyName,\n                                email: shippingContact.emailAddress,\n                                phone: shippingContact.phoneNumber\n                            };\n                        }\n\n                        that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayPaymentAuthorized', {\n                            detail: {\n                                data: data\n                            }\n                        }));\n                    });\n                };\n                session.begin();\n            };\n            var promise = ApplePaySession.canMakePaymentsWithActiveCard(applePayInstance.merchantIdentifier);\n            promise.then(function (canMakePaymentsWithActiveCard) {\n                if (!canMakePaymentsWithActiveCard) {\n                    that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayCanNotMakePaymentWithActiveCard'));\n                    that.createApplePaySession = null;\n                    return;\n                }\n            });\n        });\n    });\n};\n\nConstructor.prototype.startPayment = function () {\n    this.er.hide();\n    if (this.createApplePaySession) {\n        this.createApplePaySession();\n    }\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        if (!window.ApplePaySession) {\n            $btn.dispatchEvent(new CustomEvent('braintree:deviceNotSupportApplePay'));\n            return false;\n        }\n        $btn.dispatchEvent(new CustomEvent('braintree:deviceSupportApplePay'));\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        ins.createApplePay();\n        return ins;\n    }\n};\n\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\nvar { showCartErrorMsg } = require('./helper');\n/* global braintreeUtils braintree $ Googlepay */\n\nvar bu = braintreeUtils;\nvar loader;\n\nvar $googlepayCartButton = document.querySelector('.braintree-cart-google-button');\nvar $googlepayBillingButton = document.querySelector('.braintree-billingpage-google-button');\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeGooglepayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createGooglepay = function () {\n    var that = this;\n    var params = that.params;\n    this.$braintreeGooglePayDeviceDataInput = document.querySelector('input[name=braintreeGooglePayDeviceDataInput]');\n\n    var paymentsClient = new google.payments.api.PaymentsClient({ // eslint-disable-line no-undef\n        environment: 'TEST' // Or 'PRODUCTION'\n    });\n\n    braintree.client.create({\n        authorization: params.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n        if (params.isFraudToolsEnabled) {\n            braintree.dataCollector.create({\n                client: clientInstance,\n                paypal: true\n            }, function (dataCollectorErr, dataCollectorInstance) {\n                if (dataCollectorErr) {\n                    that.er.show(dataCollectorErr);\n                    return;\n                }\n\n                if (that.$braintreeGooglePayDeviceDataInput) {\n                    that.$braintreeGooglePayDeviceDataInput.value = dataCollectorInstance.deviceData;\n                }\n                that.loader.hide();\n            });\n        }\n        braintree.googlePayment.create({\n            client: clientInstance,\n            googlePayVersion: 2\n        }, function (googlePaymentErr, googlePaymentInstance) {\n            if (googlePaymentErr) {\n                that.er.show(googlePaymentErr);\n                return;\n            }\n            var allowedPaymentMethods = googlePaymentInstance.createPaymentDataRequest().allowedPaymentMethods;\n            paymentsClient.isReadyToPay({\n                // see https://developers.google.com/pay/api/web/reference/object#IsReadyToPayRequest\n                apiVersion: 2,\n                apiVersionMinor: 0,\n                allowedPaymentMethods: allowedPaymentMethods\n            }).then(function (response) {\n                if (response.result) {\n                    function onGooglePaymentButtonClicked() { // eslint-disable-line no-inner-declarations\n                        if (params.options.amount === 0 && !params.options.isAccount) {\n                            var zeroAmountErrorMsg = 'Order total 0 is not allowed for GooglePay';\n                            if ($googlepayCartButton) showCartErrorMsg(zeroAmountErrorMsg);\n                            if ($googlepayBillingButton) paypalHelper.showCheckoutErrorMsg(zeroAmountErrorMsg);\n                            return;\n                        }\n                        loader.show();\n                        var paymentDataRequest = googlePaymentInstance.createPaymentDataRequest({\n                            transactionInfo: {\n                                currencyCode: params.options.currency,\n                                totalPriceStatus: 'FINAL',\n                                totalPrice: String(params.options.amount)\n                            },\n                            shippingAddressRequired: params.options.isShippingAddressRequired,\n                            shippingAddressParameters: {\n                                allowedCountryCodes: ['US'],\n                                phoneNumberRequired: true\n                            },\n                            emailRequired: true\n                        });\n                        var cardPaymentMethod = paymentDataRequest.allowedPaymentMethods[0];\n                        cardPaymentMethod.parameters.billingAddressRequired = true;\n                        cardPaymentMethod.parameters.billingAddressParameters = {\n                            format: 'FULL',\n                            phoneNumberRequired: true\n                        };\n                        paymentsClient.loadPaymentData(paymentDataRequest).then(function (paymentData) {\n                            googlePaymentInstance.parseResponse(paymentData, function (err, result) {\n                                if (err) {\n                                    loader.hide();\n                                    // Handle parsing error\n                                }\n                                params.onTokenizePayment(paymentData, result);\n                            });\n                            loader.hide();\n                        }).catch(function (err) {\n                            loader.hide();\n                            // eslint-disable-next-line no-console\n                            console.log(err);\n                        });\n                    }\n                    const button = paymentsClient.createButton({ onClick: onGooglePaymentButtonClicked });\n                    that.$btn.appendChild(button);\n                    loader.hide();\n                }\n            }).catch(function (err) {\n                loader.hide();\n                // eslint-disable-next-line no-console\n                console.log(err);\n            });\n        });\n        // Set up other Braintree components\n    });\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\nvar { isValidInputField } = require('./helper');\nvar scrollAnimate = require('base/components/scrollAnimate');\nconst errorText = 'An error occurred. Please try again later or choose different payment method.';\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'lpm-error';\n    var $loaderContainter = document.querySelector('.lpmLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createLocalPayment = function () {\n    var that = this;\n    var params = that.params;\n    // Create a client.\n    braintree.client.create({\n        authorization: params.clientToken\n    }).then(function (clientInstance) {\n        // Create a local payment component.\n        return braintree.localPayment.create({\n            client: clientInstance\n        });\n    }).then(function (localPaymentInstance) {\n        function createLocalPaymentClickListener(type) {\n            var emailField = document.querySelector('#email');\n            return function (event) {\n                event.preventDefault();\n                if (params.options.amount === 0) {\n                    paypalHelper.showCheckoutErrorMsg('Order total 0 is not allowed for ' + type);\n                    that.loader.hide();\n                    return;\n                }\n\n                if (emailField && emailField.value !== '' && !isValidInputField(emailField)) {\n                    that.loader.hide();\n                    return;\n                }\n\n                that.loader.show();\n                document.querySelector('.processingMsg').style.display = 'block';\n                $.getJSON(that.params.getOrderInfoUrl)\n                    .then(({ shippingAddress }) => {\n                        const reqData = Object.assign(createRequestData(\n                            shippingAddress, that.params, type),\n                            { onPaymentStart: (_, start) => start() });\n                        // Saving shippingAddress + email in a case if startPayment will return {} details object\n                        that.params.shippingAddress = shippingAddress;\n                        that.params.shippingAddress.email = emailField.value;\n\n                        localPaymentInstance.startPayment(reqData).then(({ nonce, details, correlationId }) => {\n                            var processingMsg = document.querySelector('.processingMsg');\n                            var finalProcessingMsg = document.querySelector('.finalProcessingMsg');\n                            processingMsg.style.display = 'none';\n                            finalProcessingMsg.style.display = 'block';\n                            return $.ajax({\n                                url: params.paymentConfirmUrl,\n                                type: 'POST',\n                                contentType: 'application/json',\n                                data: JSON.stringify({\n                                    nonce: nonce,\n                                    lpmName: type,\n                                    details: jQuery.isEmptyObject(details) ? that.params.shippingAddress : details,\n                                    deviceData: JSON.stringify({ correlation_id: correlationId })\n                                })\n                            });\n                        }).then(({ redirectUrl }) => {\n                            that.loader.hide();\n                            window.location.href = redirectUrl;\n                        }).catch(function (err) {\n                            that.loader.hide();\n                            $('.error-message').show();\n                            $('.error-message-text').text(err.message);\n                            scrollAnimate($('.error-message'));\n                        });\n                    })\n                    .catch(function (err) {\n                        if (err.responseText !== '') { errorText = err.responseText; }\n                        that.loader.hide();\n                        $('.error-message').show();\n                        $('.error-message-text').text(errorText);\n                        scrollAnimate($('.error-message'));\n                    });\n            };\n        }\n        var paymentMethod = that.$btn.dataset.localPaymentMethodName;\n        that.$btn.addEventListener('click', createLocalPaymentClickListener(paymentMethod));\n    });\n};\n\nfunction createRequestData(shippingData, params, type) {\n    var email = document.querySelector('#email').value;\n    var recipientName = shippingData.recipientName.split(' ');\n    shippingData.firstName = recipientName[0];\n    shippingData.lastName = recipientName[1];\n    return {\n        paymentType: type,\n        amount: params.options.amount,\n        fallback: {\n            url: params.fallbackUrl + '?lpmName=' + type + '&email=' + email,\n            buttonText: 'Complete Payment'\n        },\n        currencyCode: params.options.currency,\n        shippingAddressRequired: false,\n        email: email,\n        phone: shippingData && shippingData.phone,\n        givenName: shippingData && shippingData.firstName,\n        surname: shippingData && shippingData.lastName,\n        address: {\n            countryCode: shippingData && shippingData.countryCode\n        }\n    };\n}\nConstructor.prototype.updateShippingData = function () {\n    var localIns = this;\n    localIns.loader.show();\n    return $.getJSON(localIns.params.getOrderInfoUrl);\n};\n\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    if (data) {\n        var recipientName = data.recipientName.split(' ');\n        data.firstName = recipientName[0];\n        data.lastName = recipientName[1];\n        this.shippingData = data;\n    }\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-inner-declarations */\n/* eslint-disable new-cap */\n'use strict';\n\n/* global braintreeUtils braintree paypal $ */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\nvar { showCartErrorMsg } = require('./helper');\n\nvar bu = braintreeUtils;\nvar console = bu.console;\n\nvar pid;\nvar uuid;\nvar removeFromCartUrl;\nvar loader;\nvar $price;\nvar sdkUrlConfiguration;\nvar isZeroAmount = false;\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\nvar $miniCartQuantity = document.querySelector('.minicart-quantity');\nvar $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\nvar $paypalCartButton = document.querySelector('.js_braintree_paypal_cart_button');\nvar $paypalBillingButton = document.querySelector('.js_braintree_paypal_billing_button');\n\nfunction Constructor(initParams, $btn) {\n    var params = initParams;\n    this.params = initParams;\n    params.options = params.options || {};\n\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n\n    if (params.$errorContainer) {\n        $errorContainer = params.$errorContainer;\n        delete params.$errorContainer;\n    }\n\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var $braintreePaypalRiskDataInput = document.querySelector('input[name=braintreePaypalRiskData]');\n\n    if (params.$loaderContainer) {\n        $loaderContainter = params.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    var that = this;\n\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            paypal: true,\n            kount: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                console.log(error);\n                return;\n            }\n            if ($braintreePaypalRiskDataInput) {\n                $braintreePaypalRiskDataInput.value = data.deviceData;\n            }\n            params.riskData = data.deviceData;\n        });\n    }\n\n    if ($braintreePDPButton) {\n        $price = document.querySelector('.price .sales .value');\n        // Check minicart quantity and hide PDPbutton if it is not empty\n        if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\n            || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\n            paypalHelper.hidePDPButton($braintreePDPButton);\n        }\n    }\n\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }).then(function (clientInstance) {\n        return braintree.paypalCheckout.create({\n            client: clientInstance\n        });\n    }).then(function (paypalCheckoutInstance) {\n        if ($braintreePDPButton) {\n            if ($addToCartButton.disabled) {\n                paypalHelper.hidePDPButton($braintreePDPButton);\n            }\n            $('body').on('cart:update', function () {\n                $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                if ($addToCartButton.disabled) {\n                    paypalHelper.hidePDPButton($braintreePDPButton);\n                }\n                if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                    paypalHelper.showPDPButton($braintreePDPButton);\n                }\n            });\n\n            $('body').on('product:afterAddToCart', function () {\n                paypalHelper.hidePDPButton($braintreePDPButton);\n            });\n\n            // Update addToCart button status\n            $('body').on('product:statusUpdate', function () {\n                $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                $price = document.querySelector('.price .sales .value');\n                isZeroAmount = false;\n                if ($braintreePDPButton && $price) {\n                    isZeroAmount = $price.getAttribute('content') === '0.00';\n                }\n\n                if ($miniCartQuantity === 0) {\n                    if ($addToCartButton.disabled || isZeroAmount) {\n                        paypalHelper.hidePDPButton($braintreePDPButton);\n                    }\n                    if (!$addToCartButton.disabled && !isZeroAmount) {\n                        paypalHelper.showPDPButton($braintreePDPButton);\n                    }\n                }\n            });\n        }\n\n        var payment = function () {\n            if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                that.er.hide();\n                var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n                if (res.cart) {\n                    uuid = res.pliUUID;\n                    removeFromCartUrl = res.cart.actionUrls.removeProductLineItemUrl;\n                    pid = res.pid;\n                    that.params.options.amount = parseFloat(res.cart.totals.grandTotal.replace(/\\$|,/g, ''));\n                } else {\n                    throw new Error(res.message || 'Error occurs');\n                }\n            }\n            return paypalCheckoutInstance.createPayment(that.params.options);\n        };\n\n        var paypalButtonConfig = {\n            locale: params.options.locale,\n            onApprove: function (data) {\n                if (params.options.intent === 'order') {\n                    data.intent = 'order';\n                }\n                return paypalCheckoutInstance.tokenizePayment(data).then(function (payload) {\n                    params.onTokenizePayment(payload, that);\n                });\n            },\n            onCancel: function (a, b) {\n                if (typeof params.options.onCancel === 'function') {\n                    params.options.onCancel(a, b);\n                }\n                if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                    var urlParams = {\n                        pid: pid,\n                        uuid: uuid\n                    };\n\n                    $.ajax({\n                        url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                        type: 'get',\n                        dataType: 'json',\n                        success: function () {\n                            $.spinner().stop();\n                        },\n                        error: function () {\n                            $.spinner().stop();\n                        }\n                    });\n                }\n            },\n            onError: function (err) {\n                that.er.show(err.message.split(/\\r?\\n/g)[0]);\n\n                if ($braintreePDPButton && $braintreePDPButton.style.display === '' && pid) {\n                    var productID = pid;\n                    var urlParams = {\n                        pid: productID,\n                        uuid: uuid\n                    };\n\n                    $.ajax({\n                        url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                        type: 'get',\n                        dataType: 'json',\n                        success: function () {\n                            $.spinner().stop();\n                        },\n                        error: function () {\n                            $.spinner().stop();\n                        }\n                    });\n                }\n            }\n        };\n\n        isZeroAmount = that.params.options.amount === 0;\n        if (isZeroAmount) {\n            var zeroAmountErrorMsg = 'Order total 0 is not allowed for PayPal';\n            paypalButtonConfig.onClick = function (_, actions) {\n                if ($paypalCartButton) showCartErrorMsg(zeroAmountErrorMsg);\n                if ($paypalBillingButton) paypalHelper.showCheckoutErrorMsg(zeroAmountErrorMsg);\n                return actions.reject();\n            };\n        }\n\n        if (params.options && params.options.flow === 'checkout') {\n            paypalButtonConfig.createOrder = payment;\n            sdkUrlConfiguration = {\n                intent: params.options.intent,\n                currency: params.options.currency,\n                components: 'buttons,messages',\n                commit: false\n            };\n        } else {\n            paypalButtonConfig.createBillingAgreement = payment;\n            sdkUrlConfiguration = {\n                vault: true,\n                components: 'buttons,messages'\n            };\n        }\n\n        paypalButtonConfig = $.extend(false, paypalButtonConfig, that.params.paypalConfig);\n        loader.hide();\n\n        if (!window.isPayPalSDKLoaded) {\n            paypalCheckoutInstance.loadPayPalSDK(sdkUrlConfiguration).then(function () {\n                window.isPayPalSDKLoaded = true;\n                return paypal.Buttons(paypalButtonConfig).render(that.$btn);\n            });\n        } else {\n            return paypal.Buttons(paypalButtonConfig).render(that.$btn);\n        }\n    }).catch(function (err) {\n        console.error('Error!', err);\n        loader.hide();\n    });\n}\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    this.params.options.shippingAddressOverride = data;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-undef */\n'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeSrcLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.loadSrcButton = function () {\n    var that = this;\n    var params = that.params;\n    this.$braintreeSrcDeviceDataInput = document.querySelector('input[name=braintreeSrcDeviceDataInput]');\n\n    that.loader.show();\n    braintree.client.create({\n        authorization: params.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            that.loader.hide();\n            return;\n        }\n        if (params.isFraudToolsEnabled) {\n            braintree.dataCollector.create({\n                client: clientInstance,\n                paypal: true\n            }, function (dataCollectorErr, dataCollectorInstance) {\n                if (dataCollectorErr) {\n                    that.er.show(dataCollectorErr);\n                    return;\n                }\n\n                if (that.$braintreeSrcDeviceDataInput) {\n                    that.$braintreeSrcDeviceDataInput.value = dataCollectorInstance.deviceData;\n                }\n                that.loader.hide();\n            });\n        }\n        braintree.visaCheckout.create({\n            client: clientInstance\n        }, function (srcPaymentErr, visaCheckoutInstance) {\n            if (srcPaymentErr) {\n                that.er.show(srcPaymentErr);\n                that.loader.hide();\n                return;\n            }\n            var baseInitOptions = {\n                paymentRequest: {\n                    currencyCode: 'USD',\n                    subtotal: params.options.amount\n                },\n                settings: {\n                    locale: params.settings.locale,\n                    payment: {\n                        cardBrands: params.settings.cardBrands,\n                        acceptCanadianVisaDebit: params.settings.acceptCanadianVisaDebit\n                    }\n                }\n            };\n\n            var initOptions = visaCheckoutInstance.createInitOptions(baseInitOptions);\n            initOptions.settings.shipping = {\n                collectShipping: params.options.isShippingAddressRequired\n            };\n            V.init(initOptions);\n            that.loader.hide();\n            V.on('payment.success', function (payment) {\n                visaCheckoutInstance.tokenize(payment, function (tokenizeErr, payload) {\n                    if (tokenizeErr) {\n                        // eslint-disable-next-line no-console\n                        console.error('Error during Visa Checkout tokenization', tokenizeErr);\n                    } else {\n                        var billingAddress = payload.billingAddress;\n                        payload.billingAddressString = JSON.stringify({\n                            recipientName: (billingAddress.firstName + ' ' + billingAddress.lastName),\n                            phone: billingAddress.phoneNumber,\n                            countryCodeAlpha2: billingAddress.countryCode,\n                            streetAddress: billingAddress.streetAddress,\n                            extendedAddress: billingAddress.streetAddress,\n                            locality: billingAddress.locality,\n                            region: billingAddress.region,\n                            postalCode: billingAddress.postalCode,\n                            email: payload.userData.userEmail\n                        });\n                        params.onTokenizePayment(payload);\n                    }\n                });\n            });\n        });\n    });\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","'use strict';\n\n/* global braintree $ */\n/* eslint no-console: 'off' */\n\nvar isDebugMode = true;\nif (console && isDebugMode) {\n    var consoleLog = console.log;\n    var consoleError = console.error;\n    console.log = function () {\n        consoleLog.apply(console, arguments);\n    };\n    console.error = function () {\n        consoleError.apply(console, arguments);\n    };\n} else {\n    console = { // eslint-disable-line no-global-assign\n        log: function () { },\n        error: function () { }\n    };\n}\n\nvar bu = {\n    pdpOnlickForAsignedPaypalPayment: function () {\n        var $bundleItem = $('.bundle-item');\n        function getOptions($productContainer) {\n            var options = $productContainer\n                .find('.product-option')\n                .map(function () {\n                    var $elOption = $(this).find('.options-select');\n                    var urlValue = $elOption.val();\n                    var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                        .data('value-id');\n                    return {\n                        optionId: $(this).data('option-id'),\n                        selectedValueId: selectedValueId\n                    };\n                }).toArray();\n\n            return JSON.stringify(options);\n        }\n\n        var pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n        var $btn = $('.braintree_pdp_button');\n        var $productContainer = $btn.closest('.product-detail');\n\n        var form = {\n            pid: pid,\n            quantity: $('.quantity-select').val()\n        };\n\n        if (!$bundleItem.length) {\n            form.options = getOptions($productContainer);\n        } else {\n            var items = $bundleItem.map(function () {\n                return {\n                    pid: $(this).find('.product-id').text(),\n                    quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n                };\n            });\n            form.childProducts = JSON.stringify(items.toArray());\n        }\n        var response = $.ajax({\n            url: $('.add-to-cart-url').val(),\n            method: 'POST',\n            async: false,\n            data: form\n        }).responseJSON;\n        response.pid = pid;\n        return response;\n    },\n\n    getSelectedData: function (selectEl) {\n        if (!selectEl) {\n            return null;\n        }\n        var options = selectEl.getElementsByTagName('option');\n        var option = null;\n        for (var i = 0; i < options.length; i++) {\n            option = options[i];\n            if (option.selected) {\n                break;\n            }\n        }\n        return option.attributes;\n    },\n\n    postData: function (url, data) {\n        var formData = new FormData();\n\n        for (var key in data) {\n            formData.append(key, data[key]);\n        }\n        $.ajax({\n            url: url,\n            data: formData,\n            processData: false,\n            contentType: false,\n            type: 'POST',\n            success: function (res) {\n                window.location.href = res.redirectUrl;\n            },\n            error: function () {\n                location.reload();\n            }\n        });\n    },\n\n    messages: {},\n\n    errorInstances: [],\n    createErrorInstance: function (containerElement, callback) {\n        if (!containerElement) {\n            console.error('Braintree: No container for showing erros');\n        }\n        function Constructor(cb) {\n            bu.errorInstances.push(this);\n            this.containerEl = containerElement;\n            this.cb = typeof cb === 'function' ? cb : function () { };\n        }\n        Constructor.prototype.show = function (error) {\n            var text = '';\n            if (typeof error === 'string') {\n                text = error;\n            }\n            if (typeof error === 'object') {\n                var msg = bu.messages[error.code];\n                text = msg || error.message;\n                this.cb(this, error);\n                if (error.code === 'PAYPAL_POPUP_CLOSED') {\n                    return;\n                }\n            }\n            this.containerEl.style.display = '';\n            this.containerEl.innerHTML = text;\n        };\n        Constructor.prototype.hide = function () {\n            this.containerEl.innerHTML = '';\n        };\n        return new Constructor(callback);\n    },\n    clientToken: null\n};\n\nbu.console = console;\n\nmodule.exports = bu;\n\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n\nvar bu = braintreeUtils;\n\nfunction Constructor(initParams, $btn) {\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'venmo-error';\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'braintree-loader';\n    this.$braintreeVenmoRiskDataInput = document.querySelector('input[name=braintreeVenmoRiskData]');\n\n    this.$btn = $btn;\n    this.params = initParams;\n\n    if (initParams.$errorContainer) {\n        $errorContainer = initParams.$errorContainer;\n        delete initParams.$errorContainer;\n    }\n\n    if (initParams.$loaderContainer) {\n        $loaderContainter = initParams.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    this.loader = loaderInstance($loaderContainter);\n}\n\nConstructor.prototype.createVenmo = function () {\n    var that = this;\n    var isBrowserSupported;\n    that.loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n            // Stop if there was a problem creating the client.\n            // This could happen if there is a network error or if the authorization\n            // is invalid.\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        braintree.dataCollector.create({\n            client: clientInstance,\n            paypal: true\n        }, function (dataCollectorErr, dataCollectorInstance) {\n            if (dataCollectorErr) {\n                that.er.show(dataCollectorErr);\n                return;\n            }\n\n            if (that.$braintreeVenmoRiskDataInput) {\n                that.$braintreeVenmoRiskDataInput.value = dataCollectorInstance.deviceData;\n            }\n            that.loader.hide();\n        });\n\n        isBrowserSupported = braintree.venmo.isBrowserSupported({\n            allowNewBrowserTab: false,\n            allowDesktop: true\n        });\n        // Verify browser support before proceeding.\n        if (isBrowserSupported) {\n            braintree.venmo.create({\n                client: clientInstance,\n                allowNewBrowserTab: false,\n                ignoreHistoryChanges: true,\n                allowDesktop: true\n            }, function (venmoErr, venmoInstance) {\n                if (venmoErr) {\n                    that.er.show(venmoErr);\n                    return;\n                }\n\n                // Verify browser support before proceeding.\n                if (!venmoInstance.isBrowserSupported()) {\n                    that.params.deviceNotSupportVenmo();\n                    that.loader.hide();\n                    return;\n                }\n\n                that.$btn.addEventListener('click', function () {\n                    if (!that.params.venmoAccountPage && !that.params.onClick()) {\n                        return;\n                    }\n                    venmoInstance.tokenize({ processResultsDelay: 10 }, function (tokenizeErr, payload) {\n                        that.loader.show();\n\n                        if (tokenizeErr) {\n                            handleVenmoError(tokenizeErr);\n                        } else {\n                            handleVenmoSuccess(payload);\n                        }\n                    });\n                    return;\n                });\n            });\n        } else {\n            that.params.deviceNotSupportVenmo();\n            that.loader.hide();\n            return;\n        }\n    });\n\n    function handleVenmoError(err) {\n        that.er.show(err);\n        that.loader.hide();\n    }\n    function handleVenmoSuccess(payload) {\n        that.er.hide();\n        that.params.onTokenizePayment(payload);\n        that.loader.hide();\n    }\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        return ins.createVenmo();\n    }\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar bu = braintreeUtils;\nvar helper = require('../helper');\n\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\nvar $saveCreditCard = document.querySelector('#braintreeSaveCreditCard');\nvar $cardOwner = document.querySelector('#braintreeCardOwner');\n\nfunction creditcardErrorContainer(errorIns, errorData) {\n    var error = errorData;\n    if (error.details && error.details.invalidFieldKeys) {\n        for (var i = 0; i < error.details.invalidFieldKeys.length; i++) {\n            var key = error.details.invalidFieldKeys[i];\n            if (key === 'number') {\n                document.querySelector('#braintreeCardNumber').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'cvv') {\n                document.querySelector('#braintreeCvv').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'expirationDate') {\n                document.querySelector('#braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n            }\n        }\n    }\n    if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n        document.querySelector('#braintreeCardNumber, #braintreeCvv, #braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction convertCardTypeToDwFormat(braintreeType) {\n    switch (braintreeType) {\n        case 'American Express':\n            return 'Amex';\n        case 'MasterCard':\n            return 'Master';\n        default:\n            return braintreeType;\n    }\n}\n\nfunction cardOwnerUpdateClasses() {\n    var value = $cardOwner.value;\n    if (value.length <= parseInt($cardOwner.getAttribute('maxlength'), 10) && value.length !== 0) {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-valid');\n    } else {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-valid');\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction setCardFields(selectedCard, cacheCardFields) {\n    cacheCardFields.cardNumbeberPh.innerHTML = selectedCard['data-number'].value;\n    cacheCardFields.cardCvvPh.innerHTML = '***';\n    cacheCardFields.cardExpirationPh.innerHTML = selectedCard['data-expiration'].value;\n    cacheCardFields.cardOwnerPh.innerHTML = selectedCard['data-owner'].value;\n    $cardOwner.value = selectedCard['data-owner'].value;\n    document.querySelector('#braintreeCardType').value = selectedCard['data-type'].value;\n    document.querySelector('#braintreeCardMaskNumber').value = selectedCard['data-number'].value;\n}\n\nfunction showCardElements(cardFields) {\n    cardFields.forEach(function (el) {\n        el.style.display = '';\n    });\n}\n\nfunction hideCardElements(cardFields) {\n    cardFields.forEach(function (el) {\n        el.style.display = 'none';\n    });\n}\n\nfunction getCardFieldsPH() {\n    return [\n        document.querySelector('#braintreeCardOwnerPh'),\n        document.querySelector('#braintreeCardNumberPh'),\n        document.querySelector('#braintreeExpirationPh'),\n        document.querySelector('#braintreeCvvPh')\n    ];\n}\n\nfunction getCardFields() {\n    return [\n        document.querySelector('#braintreeCardOwner'),\n        document.querySelector('#braintreeExpirationDate'),\n        document.querySelector('#braintreeCardNumber'),\n        document.querySelector('#braintreeCvv')\n    ];\n}\n\nfunction cardListChange() {\n    var $cardOwnerPh = document.querySelector('#braintreeCardOwnerPh');\n    var $cardNumbeber = document.querySelector('#braintreeCardNumber');\n    var $cardNumbeberPh = document.querySelector('#braintreeCardNumberPh');\n    var $cardCvv = document.querySelector('#braintreeCvv');\n    var $cardCvvPh = document.querySelector('#braintreeCvvPh');\n    var $cardExpiration = document.querySelector('#braintreeExpirationDate');\n    var $cardExpirationPh = document.querySelector('#braintreeExpirationPh');\n    var $braintreeSaveCardContainer = document.querySelector('#braintreeSaveCardContainer');\n    var $creditCardFieldsContainer = document.querySelector('#braintreeCreditCardFieldsContainer');\n    var $braintree3DSecureContainer = document.querySelector('#braintree3DSecureContainer');\n    var changeCardOwnerInput;\n    var selectedCard;\n    var isSaveCard;\n    var cacheCardFields = {\n        cardNumbeberPh: $cardNumbeberPh,\n        cardCvvPh: $cardCvvPh,\n        cardExpirationPh: $cardExpirationPh,\n        cardOwnerPh: $cardOwnerPh\n    };\n    var nonce;\n    if ($cardOwner) {\n        if (typeof (Event) === 'function') {\n            changeCardOwnerInput = new Event('changeCardOwnerInput');\n            $cardOwner.addEventListener('changeCardOwnerInput', function () {\n                'change';\n            }, false);\n        } else {\n            changeCardOwnerInput = document.createEvent('Event');\n            changeCardOwnerInput.initEvent('changeCardOwnerInput', true, true);\n        }\n    }\n\n    if ($creditCardFieldsContainer) {\n        $creditCardFieldsContainer.style.display = '';\n    }\n    if ($braintree3DSecureContainer) {\n        $braintree3DSecureContainer.style.display = 'none';\n    }\n\n    document.querySelector('#braintreeCreditCardErrorContainer').textContent = '';\n\n    if ($creditCardList.value === 'newcard') {\n        hideCardElements(getCardFieldsPH());\n        $cardOwner.value = $cardOwner.getAttribute('data-new-cart-value');\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardNumbeber.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardCvv.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardExpiration.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardOwner.disabled = false;\n        showCardElements(getCardFields());\n        cardOwnerUpdateClasses();\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'block';\n            $saveCreditCard.checked = true;\n        }\n\n        document.querySelector('#braintreeCreditCardNonce').value = '';\n        document.querySelector('#braintreeCardPaymentMethod').value = $creditCardList[0].getAttribute('data-payment-method');\n    } else if ($creditCardList.selectedOptions[0].id === 'braintreeSessionCreditAccount') {\n        selectedCard = bu.getSelectedData($creditCardList);\n        nonce = selectedCard['data-nonce'].value;\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'block';\n            isSaveCard = JSON.parse(selectedCard['data-save-card'].value);\n            $braintreeSaveCardContainer.checked = isSaveCard;\n            $saveCreditCard.checked = isSaveCard;\n        }\n\n        if (nonce) {\n            document.querySelector('#braintreeCreditCardNonce').value = nonce;\n        }\n\n        setCardFields(selectedCard, cacheCardFields);\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.style.display = 'none';\n        showCardElements(getCardFieldsPH());\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    } else {\n        // case for saved card\n        selectedCard = bu.getSelectedData($creditCardList);\n        setCardFields(selectedCard, cacheCardFields);\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        showCardElements(getCardFieldsPH());\n        hideCardElements(getCardFields());\n        $cardOwner.disabled = true;\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'none';\n            $saveCreditCard.checked = false;\n        }\n\n        document.querySelector('#braintreeCreditCardNonce').value = '';\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    }\n}\n\nfunction initCardListAndSaveFunctionality() {\n    if ($creditCardList) {\n        $creditCardList.addEventListener('change', function () {\n            cardListChange();\n        });\n    }\n    cardListChange();\n}\n\nfunction cardOwnerEvents() {\n    $cardOwner.addEventListener('focus', function () {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('blur', function () {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('keyup', function () {\n        document.querySelector('#braintreeCardOwner').setAttribute('data-new-cart-value', $cardOwner.value);\n        cardOwnerUpdateClasses();\n    });\n    $cardOwner.addEventListener('change', function () {\n        cardOwnerUpdateClasses();\n    });\n}\n\n/*\n    Update Session account\n**/\nfunction updateSessionAccount() {\n    var sessionOption = helper.getSessionAccountOption({\n        querySelector: '#braintreeCreditCardList',\n        id: 'braintreeSessionCreditAccount'\n    });\n    if (!sessionOption) { return; }\n\n    sessionOption.selected = false;\n    sessionOption.classList.add('used-creditcard-account-hide');\n    sessionOption.classList.remove('used-creditcard-account');\n    sessionOption.text = '';\n    sessionOption.setAttribute('data-session-account', false);\n    sessionOption.setAttribute('data-owner', false);\n    sessionOption.setAttribute('data-expiration', false);\n    sessionOption.setAttribute('data-number', false);\n    sessionOption.setAttribute('data-nonce', false);\n    sessionOption.setAttribute('data-type', false);\n    sessionOption.setAttribute('data-save-card', false);\n}\n\n/*\n    Check if creditcard method was used and change appearance of creditcard tab\n**/\nfunction removeSessionNonce() {\n    updateSessionAccount();\n    document.querySelector('#braintreeCreditCardNonce').value = '';\n    document.querySelector('#cardNumber').value = '';\n    document.querySelector('#braintreeCardMaskNumber').value = '';\n    document.querySelector('#braintreeCardExpirationYear').value = '';\n    document.querySelector('#braintreeCardExpirationMonth').value = '';\n\n    var defaultOption = helper.getOptionByDataDefault('#braintreeCreditCardList');\n    if (defaultOption) {\n        defaultOption.selected = true;\n        var selectedCard = bu.getSelectedData($creditCardList);\n        var cardFieldsPH = {\n            cardNumbeberPh: document.querySelector('#braintreeCardNumberPh'),\n            cardCvvPh: document.querySelector('#braintreeCvvPh'),\n            cardExpirationPh: document.querySelector('#braintreeExpirationPh'),\n            cardOwnerPh: document.querySelector('#braintreeCardOwnerPh')\n        };\n        setCardFields(selectedCard, cardFieldsPH);\n        $cardOwner.disabled = true;\n        $saveCreditCard.checked = false;\n        document.querySelector('#braintreeSaveCardContainer').style.display = 'none';\n    } else {\n        hideCardElements(getCardFieldsPH());\n        showCardElements(getCardFields());\n        var ccAccount = document.querySelector('.form-group.braintree_used_creditcard_account');\n        ccAccount.classList.remove('used-creditcard-account');\n        ccAccount.classList.add('used-creditcard-account-hide');\n    }\n\n    [].forEach.call(document.querySelector('#braintreeCreditCardList'), function (el) {\n        if (el.style.display === 'none') el.style.display = 'block';\n    });\n}\n\nmodule.exports = {\n    creditcardErrorContainer,\n    convertCardTypeToDwFormat,\n    cardOwnerEvents,\n    initCardListAndSaveFunctionality,\n    removeSessionNonce,\n    showCardElements,\n    hideCardElements,\n    setCardFields,\n    getCardFieldsPH,\n    getCardFields,\n    updateSessionAccount\n};\n","'use strict';\n\nvar googlepay = require('../braintreeGooglepay');\nvar loaderInstance = require('../loaderHelper');\n\nfunction submitAddGooglePayAccountForm() {\n    $('.js_braintree_addGooglePayAccountForm').submit(function () {\n        var $form = $(this);\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        $form.spinner().start();\n\n        $.post($form.attr('action'), $form.serialize())\n            .done(function (data) {\n                $form.spinner().stop();\n                if (!data.success) {\n                    $btFormErrorContainer.style.display = 'block';\n                    $btFormErrorContainer.textContent = data.error;\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            })\n            .fail(function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $form.spinner().stop();\n            });\n        return false;\n    });\n}\n\nfunction initAddGooglePayAccount() {\n    var $btn = document.querySelector('.js_braintree_accountgooglepay_button');\n    var $googlepayNonce = document.querySelector('#braintreeGooglePayNonce');\n    var $btGooglePayLoader = document.querySelector('.braintreeGooglepayLoader');\n    var googlepayIns;\n    var loader = loaderInstance($btGooglePayLoader);\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n    loader.show();\n\n    config.onTokenizePayment = function (data, result) {\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        if ($btFormErrorContainer.style.display === 'block') {\n            $btFormErrorContainer.style.display = 'none';\n            $btFormErrorContainer.textContent = '';\n        }\n        if (result.type === 'PayPalAccount') {\n            $btFormErrorContainer.style.display = 'block';\n            $btFormErrorContainer.textContent = config.messages.saving_paypal_account_error;\n\n            return;\n        }\n\n        $googlepayNonce.value = result.nonce;\n\n        document.querySelector('.braintreeGooglePayBtn').click();\n    };\n    googlepayIns = googlepay.init(config, $btn);\n    googlepayIns.createGooglepay();\n    $btn.setAttribute('data-is-inited', true);\n    submitAddGooglePayAccountForm();\n}\n\nmodule.exports = {\n    initAddGooglePayAccount\n};\n/* eslint no-use-before-define: 2 */  // --> ON\n","'use strict';\nvar helper = require('../helper');\n\nvar $googlepayContent = document.querySelector('.js_braintree_googlepayContent');\nvar $btGooglepayAccountsList = document.querySelector('#braintreeGooglepayAccountsList');\nvar $googlepayButton = document.querySelector('.js_braintree_googlepay_button');\nvar $saveGooglePayAccountCheckbox = document.querySelector('#braintreeSaveGooglepayAccount');\nvar $googlepayTab = document.querySelector('.googlepay-tab');\n\nfunction showGooglepayAccount() {\n    var $sessionAccount = document.querySelector('#sessionGPAccount');\n    $sessionAccount.classList.remove('used-googlepay-account-hide');\n    $sessionAccount.classList.add('used-googlepay-account');\n\n    var $gpAccount = document.querySelector('.form-group.braintree_used_googlepay_account');\n    $gpAccount.classList.remove('used-googlepay-account-hide');\n    $gpAccount.classList.add('used-googlepay-account');\n\n    $googlepayButton.style.display = 'none';\n    $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($btGooglepayAccountsList.value === 'newaccount') {\n        $googlepayButton.style.display = 'block';\n        if ($googlepayTab.classList.contains('active')) {\n            helper.continueButtonToggle(true);\n        }\n        $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', true);\n        if ($saveGooglePayAccountCheckbox) {\n            $saveGooglePayAccountCheckbox.checked = true;\n        }\n    } else {\n        $googlepayButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        if ($saveGooglePayAccountCheckbox) {\n            $saveGooglePayAccountCheckbox.checked = JSON.parse(document.querySelector('#sessionGPAccount').getAttribute('data-save'));\n        }\n    }\n}\n\nfunction createGooglepayBillingAddressData(data) {\n    var billingData = data.paymentMethodData.info.billingAddress;\n    var billingAddress = {};\n    var recipientName = billingData.name.split(' ');\n\n    billingAddress.firstName = recipientName[0];\n    billingAddress.lastName = recipientName[1];\n    billingAddress.phone = billingData.phoneNumber;\n    billingAddress.countryCodeAlpha2 = billingData.countryCode;\n    billingAddress.streetAddress = billingData.address1;\n    billingAddress.extendedAddress = billingData.address2;\n    billingAddress.locality = billingData.locality;\n    billingAddress.stateCode = billingData.administrativeArea;\n    billingAddress.postalCode = billingData.postalCode;\n    billingAddress.email = data.email;\n\n    return billingAddress;\n}\n\nfunction createGooglepayShippingAddressData(shippingData) {\n    var shippingAddress = {};\n    var recipientName = shippingData.name.split(' ');\n\n    shippingAddress.firstName = recipientName[0];\n    shippingAddress.lastName = recipientName[1];\n    shippingAddress.phone = shippingData.phoneNumber;\n    shippingAddress.countryCodeAlpha2 = shippingData.countryCode;\n    shippingAddress.streetAddress = shippingData.address1;\n    shippingAddress.extendedAddress = shippingData.address2;\n    shippingAddress.locality = shippingData.locality;\n    shippingAddress.region = shippingData.administrativeArea;\n    shippingAddress.postalCode = shippingData.postalCode;\n\n    return shippingAddress;\n}\n\n/*\n    Remove method was used and change appearance of googlepay tab\n**/\nfunction removeSessionNonce() {\n    var $gpAccount = document.querySelector('.form-group.braintree_used_googlepay_account');\n    $gpAccount.classList.remove('used-googlepay-account');\n    $gpAccount.classList.add('used-googlepay-account-hide');\n\n    var $sessionAccount = document.querySelector('#sessionGPAccount');\n    $sessionAccount.classList.add('used-googlepay-account-hide');\n    $sessionAccount.classList.remove('used-googlepay-account');\n    $sessionAccount.value = '';\n    $sessionAccount.text = '';\n    $sessionAccount.setAttribute('data-session-account', false);\n    $sessionAccount.setAttribute('data-save', false);\n\n    document.querySelector('#braintreeGooglePayNonce').value = '';\n    document.querySelector('#braintreeGooglePayBillingAddress').value = '';\n    document.querySelector('#braintreeGooglepayPaymentType').value = '';\n    document.querySelector('#braintreeGooglePayDeviceData').value = '';\n\n    document.querySelector('#newGPAccount').selected = true;\n    hideShowButtons();\n}\n\nmodule.exports = {\n    showGooglepayAccount,\n    createGooglepayBillingAddressData,\n    createGooglepayShippingAddressData,\n    removeSessionNonce,\n    hideShowButtons\n};\n","'use strict';\nvar googlepay = require('../braintreeGooglepay');\nvar { hideShowButtons, createGooglepayBillingAddressData, createGooglepayShippingAddressData, showGooglepayAccount } = require('./googlepayHelper');\nvar { removeActiveSessionPayment, createPaymentFormData, showCartErrorMsg, updateBillingFormValues } = require('../helper');\n\nvar $googlepayButton = document.querySelector('.js_braintree_googlepay_button');\nvar $btGooglepayAccountsList = document.querySelector('#braintreeGooglepayAccountsList');\nvar $googlepayOnCart = document.querySelector('.braintree-cart-google-button');\nvar $googlepayNonce = document.querySelector('#braintreeGooglePayNonce');\nvar $googlepayCardDescription = document.querySelector('#braintreeGooglePayCardDescription');\nvar $braintreeGooglepayPaymentType = document.querySelector('#braintreeGooglepayPaymentType');\nvar $googlePayBillingAddress = document.querySelector('#braintreeGooglePayBillingAddress');\n\nfunction makeGooglepayPayment(continueButton) {\n    var googlepayIns;\n    var config = JSON.parse($googlepayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($googlepayButton, 'not valid data-braintree-config');\n    }\n\n    if ($btGooglepayAccountsList) {\n        $btGooglepayAccountsList.addEventListener('change', function () {\n            hideShowButtons();\n        });\n        hideShowButtons();\n\n        if ($googlepayCardDescription.value === 'GooglePay') {\n            $googlepayCardDescription.value = $btGooglepayAccountsList.selectedOptions[0].label;\n        }\n    }\n\n    config.onTokenizePayment = function (data, result) {\n        var deviceData = document.querySelector('input[name=braintreeGooglePayDeviceDataInput]').value;\n        var googlepayNonce = result.nonce;\n        var googlepayPaymentType = result.type;\n        var googlepayCardDescription = result.details.cardType + ' ' + result.details.lastFour;\n\n        removeActiveSessionPayment();\n\n        if (data) {\n            var billingAddressData = createGooglepayBillingAddressData(data);\n\n            if ($googlepayOnCart) {\n                var $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n                var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n                var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n                var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n                var csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n                var shippingAddressData = createGooglepayShippingAddressData(data.shippingAddress);\n                var googlepayCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n                    firstName: billingAddressData.firstName,\n                    lastName: billingAddressData.lastName,\n                    address1: billingAddressData.streetAddress,\n                    address2: billingAddressData.extendedAddress || '',\n                    city: billingAddressData.locality,\n                    postalCode: billingAddressData.postalCode,\n                    stateCode: billingAddressData.stateCode,\n                    country: billingAddressData.countryCodeAlpha2,\n                    email: billingAddressData.email,\n                    phone: billingAddressData.phone,\n                    paymentMethod: config.paymentMethodName\n                });\n\n                googlepayCheckoutFormData.append(csrfToken.name, csrfToken.value);\n                googlepayCheckoutFormData.append('braintreeGooglePayNonce', googlepayNonce);\n                googlepayCheckoutFormData.append('braintreeGooglePayDeviceData', deviceData);\n                googlepayCheckoutFormData.append('braintreeGooglePayCardDescription', googlepayCardDescription);\n                googlepayCheckoutFormData.append('braintreeGooglepayPaymentType', googlepayPaymentType);\n                googlepayCheckoutFormData.append('braintreeSaveGooglepayAccount', true);\n                googlepayCheckoutFormData.append('braintreeGooglePayShippingAddress', JSON.stringify(shippingAddressData) || '{}');\n\n                $.ajax({\n                    type: 'POST',\n                    url: checkoutFromCartUrl,\n                    data: googlepayCheckoutFormData,\n                    contentType: false,\n                    processData: false,\n                    success: function (res) {\n                        if (res.error) {\n                            var errorMessage = '';\n                            if (res.fieldErrors.length) {\n                                res.fieldErrors.forEach(function (error, index) {\n                                    var keys = Object.keys(error);\n                                    if (keys.length) {\n                                        errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${res.fieldErrors[index][keys[index]]}. `;\n                                    }\n                                });\n                                showCartErrorMsg(errorMessage);\n                            }\n\n                            if (res.serverErrors.length) {\n                                res.serverErrors.forEach(function (error) {\n                                    errorMessage += `${error}. `;\n                                });\n                                showCartErrorMsg(errorMessage);\n                            }\n\n                            if (res.cartError) {\n                                window.location.href = res.redirectUrl;\n                            }\n                            return;\n                        }\n\n                        sessionStorage.setItem('pageState', 'cart');\n                        googlepayIns.loader.hide();\n                        window.location.href = placeOrderUrl;\n                    },\n                    error: function (err) {\n                        if (err && err.redirectUrl) {\n                            window.location.href = err.redirectUrl;\n                        }\n                    }\n                });\n\n                return;\n            }\n\n            $googlepayNonce.value = googlepayNonce;\n            $googlepayCardDescription.value = googlepayCardDescription;\n            $braintreeGooglepayPaymentType.value = googlepayPaymentType;\n\n            // Updating Storefront Billing Form data with GooglePay Billing\n            var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n            storeFrontBillingData.dwfrm_billing_addressFields_firstName = billingAddressData.firstName;\n            storeFrontBillingData.dwfrm_billing_addressFields_lastName = billingAddressData.lastName;\n            storeFrontBillingData.dwfrm_billing_addressFields_address1 = billingAddressData.streetAddress;\n            storeFrontBillingData.dwfrm_billing_addressFields_address2 = billingAddressData.extendedAddress || '';\n            storeFrontBillingData.dwfrm_billing_addressFields_city = billingAddressData.locality;\n            storeFrontBillingData.dwfrm_billing_addressFields_postalCode = billingAddressData.postalCode;\n            storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = billingAddressData.stateCode;\n            storeFrontBillingData.dwfrm_billing_addressFields_country = billingAddressData.countryCodeAlpha2;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_email = billingAddressData.email;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = billingAddressData.phone;\n\n            $googlePayBillingAddress.value = JSON.stringify(billingAddressData);\n\n            updateBillingFormValues(storeFrontBillingData);\n        }\n\n        // selector \"new GooglePay account\" in dropdown list\n        var newGPAccount = document.getElementById('newGPAccount');\n        var sessionGPAccount = document.querySelector('#sessionGPAccount');\n\n        // Selecting Google Pay Session Account\n        sessionGPAccount.text = $googlepayCardDescription.value;\n        newGPAccount.removeAttribute('selected');\n        sessionGPAccount.selected = true;\n        sessionGPAccount.setAttribute('data-session-account', 'true');\n\n        showGooglepayAccount();\n        continueButton.click();\n    };\n\n    googlepayIns = googlepay.init(config, $googlepayButton);\n    googlepayIns.createGooglepay();\n\n    function googlepayUpdateAmount() { // eslint-disable-line require-jsdoc\n        googlepayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                googlepayIns.loader.hide();\n                googlepayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', googlepayUpdateAmount);\n    $('body').on('braintree:updateCartTotals', googlepayUpdateAmount);\n    googlepayUpdateAmount();\n}\n\nmodule.exports = {\n    makeGooglepayPayment\n};\n","'use strict';\nvar $continueButton = document.querySelector('button.submit-payment');\n\nfunction initWathcherCartUpdate() {\n    var $grantTotal = document.querySelector('.grand-total');\n    if ($grantTotal) {\n        var currentGrantTotalValue = $grantTotal.textContent;\n        $('body').on('cart:update', function () {\n            var newGrantTotalValue = $grantTotal.textContent;\n            if (newGrantTotalValue !== '' && newGrantTotalValue !== currentGrantTotalValue) {\n                currentGrantTotalValue = newGrantTotalValue;\n                var updateCartTotals = document.createEvent('Event');\n                updateCartTotals.initEvent('updateCartTotals', true, true);\n                document.querySelector('body').addEventListener('updateCartTotals', function () {\n                    'braintree:updateCartTotals';\n                }, false);\n                document.querySelector('body').dispatchEvent(updateCartTotals);\n            }\n        });\n    }\n}\n\nfunction continueButtonToggle(flag) {\n    var stage = window.location.hash.substring(1);\n    if (stage === 'placeOrder' || stage === 'shipping' || stage === null || stage === '') {\n        return;\n    }\n    if (flag) {\n        $continueButton.style.display = 'none';\n    } else {\n        $continueButton.style.display = '';\n    }\n}\n\n\nfunction paymentMethodChangeHandle(currentTab) {\n    document.querySelectorAll('.payment-options[role=tablist] a[data-toggle=\"tab\"]').forEach(function (el) {\n        var $tabContent = document.querySelector(el.getAttribute('href'));\n\n        if (el === currentTab) {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.removeAttribute('disabled', 'disabled');\n            });\n            $tabContent.querySelectorAll('select.no-disable').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n            continueButtonToggle(JSON.parse($tabContent.getAttribute('data-paypal-is-hide-continue-button')));\n        } else {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n        }\n    });\n}\n\nfunction getPaymentMethodToLowerCase(paymentMethodName) {\n    var paymentMethod = paymentMethodName.split('_');\n    if (paymentMethod.length === 1) {\n        return paymentMethodName;\n    }\n    paymentMethod.forEach(function (element, index) {\n        paymentMethod[index] = element.charAt(0) + element.slice(1).toLocaleLowerCase();\n    });\n    return paymentMethod[1] ?\n        paymentMethod[0] + ' ' + paymentMethod[1] :\n        paymentMethod[0];\n}\n\nfunction updateCheckoutView(e, data) {\n    var $paymentSummary = document.querySelector('.summary-details .braintree-payment-details');\n    var htmlToAppend = '';\n    var order = data.order;\n\n    if (order.billing.payment && order.billing.payment.selectedPaymentInstruments\n        && order.billing.payment.selectedPaymentInstruments.length > 0) {\n        htmlToAppend += '<div>' + getPaymentMethodToLowerCase(order.billing.payment.selectedPaymentInstruments[0].paymentMethod) + '</div>';\n        if (order.billing.payment.selectedPaymentInstruments[0].maskedCreditCardNumber) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].maskedCreditCardNumber + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'PayPal') {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].braintreePaypalEmail + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'Venmo') {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].braintreeVenmoUserId + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].type) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].type + '</div>';\n        }\n        htmlToAppend += '<div>' + order.priceTotal.charAt(0) + order.billing.payment.selectedPaymentInstruments[0].amount + '</div>';\n    }\n\n    if ($paymentSummary) {\n        $paymentSummary.innerHTML = htmlToAppend;\n    }\n}\n\nfunction isValidInputField(field) {\n    if (!field.checkValidity()) {\n        if (!field.classList.contains('is-invalid')) {\n            field.classList.add('is-invalid');\n        }\n        return false;\n    }\n    if (field.checkValidity() && field.classList.contains('is-invalid')) {\n        field.classList.remove('is-invalid');\n    }\n    return true;\n}\n/*\n    Adding *active* line to the tab-content class in a case if it isn't already active\n    Use case: customer checkout from cart (page) and\n    (under the place Order page) hit the 'edit' button\n**/\nfunction updatePaymentMethodTab() {\n    let paymentMethodName = document.querySelectorAll('[data-braintree-payment-method]')[0].dataset.braintreePaymentMethod;\n    let content = document.querySelector(`.js_braintree_${paymentMethodName.toLowerCase()}Content`).classList.contains('active');\n    if (!content) {\n        document.querySelectorAll(`[data-method-id=${paymentMethodName}]`)[0].children[0].click();\n    }\n}\n\n/**\n * Gets Billing Address Form Values\n *\n * @returns {Object} with Billing Address\n */\nfunction getBillingAddressFormValues() {\n    return $('#dwfrm_billing').serialize().split('&')\n        .map(function (el) {\n            return el.split('=');\n        })\n        .reduce(function (accumulator, item) {\n            var elem = item[0].lastIndexOf('_');\n            if (elem < 0) {\n                accumulator[item[0]] = item[1];\n            } else {\n                elem = item[0].substring(elem + 1);\n                accumulator[elem] = item[1];\n            }\n            return accumulator;\n        }, {});\n}\n\n/**\n * Gets Nonce depending on payment method name\n *\n * @param {string} paymentMethodName - payment method name\n * @returns {boolean} nonce exist\n */\n\nfunction isNonceExist(paymentMethodName) {\n    var $nonce = document.querySelector(`#braintree${paymentMethodName}Nonce`);\n    if (!$nonce) return false;\n\n    var nonceValue = $nonce.value;\n    var $tab = document.querySelector(`.${paymentMethodName.toLowerCase()}-tab`);\n    var isActiveTab;\n    if ($tab) {\n        isActiveTab = $tab.classList.contains('active');\n    }\n\n    return !isActiveTab && nonceValue;\n}\n\nvar loaderInstance = require('./loaderHelper');\nvar accountsLoader;\n\nfunction removeBtPayment(e) {\n    let target = e.target;\n    var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n    accountsLoader = loaderInstance($loaderContainter);\n    accountsLoader.show();\n\n    $.get(target.getAttribute('data-url') + '?UUID=' + target.getAttribute('data-id'))\n        .then((data => {\n            $('#uuid-' + data.UUID).remove();\n            if (data.newDefaultAccount) {\n                document.querySelector('#uuid-' + data.newDefaultAccount + ' span').style.fontWeight = 'bold';\n                document.querySelector('#uuid-' + data.newDefaultAccount + ' button.braintree-make-default-card').style.display = 'none';\n            }\n            accountsLoader.hide();\n        }))\n        .fail(() => {\n            location.reload();\n            accountsLoader.hide();\n        });\n}\n\n/**\n * Create formData from fields data\n *\n * @param {Object} paymentFields - fields data values\n * @param {Object} fieldsData - fields data values\n * @returns {Object} cart billing form data\n */\nfunction createPaymentFormData(paymentFields, fieldsData) {\n    var paymentFieldsParsed = JSON.parse(paymentFields);\n\n    return Object.entries(paymentFieldsParsed).reduce(function (formData, entry) {\n        const [key, field] = entry;\n        if (typeof field === 'object') {\n            formData.append(field.name, fieldsData && fieldsData[key] !== null ? fieldsData[key] : field.value);\n        }\n        return formData;\n    }, new FormData());\n}\n\nfunction setDefaultProperty(params) {\n    return $.get(params.url + '?UUID=' + params.id + '&pmID=' + params.paymentMethodID)\n            .then((data) => {\n                document.querySelector('#uuid-' + data.newDefaultProperty + ' span').style.fontWeight = 'bold';\n                document.querySelector('.braintree-make-default-card.uuid-' + data.newDefaultProperty).style.display = 'none';\n                document.querySelector('#uuid-' + data.toRemoveDefaultProperty + ' span').style.fontWeight = 'normal';\n                document.querySelector('.braintree-make-default-card.uuid-' + data.toRemoveDefaultProperty).style.display = 'inline';\n                params.loader.hide();\n            })\n            .fail(() => {\n                params.loader.hide();\n            });\n}\n\nfunction initCardEvents() {\n    if (document.querySelector('.braintreeAddNewCard')) {\n        document.querySelector('.braintreeAddNewCard').addEventListener('click', function () {\n            document.querySelector('.braintreeAddNewCard').style.display = 'none';\n            document.querySelector('.braintreeAddNewCardBlock').style.display = 'block';\n        });\n    }\n    document.querySelector('.creditCard-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = 'CARD';\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\n/**\n * Checks authenticated customer, account list for default Payment Method\n *\n * @param {string} selector - querySelector\n * @returns {Object} default data attribute or null\n */\nfunction getOptionByDataDefault(selector) {\n    if (!document.querySelector(selector)) { return null; }\n\n    return Array.apply(null, document.querySelector(selector).options).find(function (el) {\n        return el.getAttribute('data-default') ? JSON.parse(el.getAttribute('data-default')) : null;\n    });\n}\n\n/**\n * Checks authenticated customer, account list for session Account\n *\n * @param {Object} params - querySelector + el.id\n * @returns {Object} session account object\n */\nfunction getSessionAccountOption(params) {\n    return Array.apply(null, document.querySelector(params.querySelector).options).find(function (el) {\n        return el.id === params.id && JSON.parse(el.getAttribute('data-session-account'));\n    });\n}\n\n/**\n * Remove Session Active Payment Method\n ** Use helpers to add more Payment Methods\n *\n * @returns {function}function call\n */\nfunction removeActiveSessionPayment() {\n    const activePaymentMethods = [];\n    document.querySelectorAll('.payment-options[role=tablist] li').forEach(function (el) {\n        if (el.dataset.methodId === 'CREDIT_CARD') {\n            el.dataset.methodId = 'CreditCard';\n        }\n        activePaymentMethods.push(el.dataset.methodId);\n    });\n    var helpers = {\n        PayPal: require('./paypal/paypalHelper'),\n        Venmo: require('./venmo/venmoHelper'),\n        GooglePay: require('./googlepay/googlepayHelper'),\n        CreditCard: require('./creditcard/creditcardHelper'),\n        SRC: require('./src/srcHelper'),\n        ApplePay: require('./applepay/applepayHelper')\n\n    };\n    var activePM = activePaymentMethods.find(function (el) {\n        return isNonceExist(el);\n    });\n    if (activePM) {\n        return helpers[activePM].removeSessionNonce();\n    }\n}\n\nfunction showCartErrorMsg(message) {\n    $('.checkout-btn').addClass('disabled');\n    $('.cart-error').append(\n        `<div class=\"alert alert-danger alert-dismissible valid-cart-error fade show cartError\" role=\"alert\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            ${message}\n        </div>`\n    );\n    window.scrollTo(0, 0);\n}\n\n/**\n * Update Checkout Billing form values\n *\n * @param {Object} billingData - fields data values\n */\nfunction updateBillingFormValues(billingData) {\n    var $billingFormFields = document.querySelectorAll('.billing-address select, .billing-address input, .contact-info-block input');\n\n    $billingFormFields.forEach(function (el) {\n        if (billingData[el.name]) {\n            el.value = billingData[el.name];\n        }\n    });\n}\n\nmodule.exports = {\n    initWathcherCartUpdate,\n    paymentMethodChangeHandle,\n    continueButtonToggle,\n    updateCheckoutView,\n    isValidInputField,\n    updatePaymentMethodTab,\n    getBillingAddressFormValues,\n    removeBtPayment,\n    createPaymentFormData,\n    initCardEvents,\n    isNonceExist,\n    setDefaultProperty,\n    getOptionByDataDefault,\n    removeActiveSessionPayment,\n    getSessionAccountOption,\n    showCartErrorMsg,\n    updateBillingFormValues\n};\n","\nmodule.exports = function (containerElement) {\n    if (!containerElement) {\n        // eslint-disable-next-line no-console\n        console.error('Braintree: No container for showing loaders');\n    }\n    function Constructor() {\n        this.containerEl = containerElement;\n    }\n    Constructor.prototype.show = function () {\n        this.containerEl.style.display = 'block';\n    };\n    Constructor.prototype.hide = function () {\n        this.containerEl.style.display = 'none';\n    };\n    return new Constructor();\n};\n","'use strict';\nvar braintreeLocal = require('../braintreeLocal');\nvar $lpmButton = document.querySelectorAll('.lpmButton');\n\n$lpmButton.forEach(function (el) {\n    var $btn = el;\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n    var localIns = braintreeLocal.init(config, $btn);\n    localIns.createLocalPayment();\n\n    function updateAmountData() { // eslint-disable-line require-jsdoc\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                localIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', updateAmountData);\n});\n","'use strict';\n\nvar paypalHelper = require('./paypalHelper');\nvar payPal = require('../braintreePaypal');\nvar paypalSavedAccountHandler = require('./paypalSavedAccountHandler');\nvar helper = require('../helper');\n\nvar $paypalMinicartButton;\n\nfunction miniCartButton() {\n    document.querySelectorAll('.js_braintree_paypal_cart_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n        $paypalMinicartButton = document.querySelector('.paypalMinicartButton');\n        if ($paypalMinicartButton && config.options.amount === 0) {\n            $paypalMinicartButton.style.display = 'none';\n        }\n        config.paypalConfig = config.paypalConfig || {};\n\n        config.onTokenizePayment = function (payload, btnInstance) {\n            var that = btnInstance;\n            var params = btnInstance.params;\n            var paypalCheckoutFormFields = document.querySelector('.braintree-cart-paypal-buttons-wrap').getAttribute('data-paypal-checkout-form-fields');\n            var details = payload.details;\n            if (!details.billingAddress) {\n                /*that.er.show('Merchant PayPal account does not support the Billing Address retrieving. Contact PayPal for details on eligibility and enabling this feature.');\n                return;*/\n                details.billingAddress = details.shippingAddress;\n            }\n            var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n            var paypalCheckoutFormData = helper.createPaymentFormData(paypalCheckoutFormFields, {\n                firstName: billingAddressData.firstName,\n                lastName: billingAddressData.lastName,\n                address1: billingAddressData.streetAddress,\n                address2: billingAddressData.extendedAddress || '',\n                city: billingAddressData.locality,\n                postalCode: billingAddressData.postalCode,\n                stateCode: billingAddressData.state,\n                country: billingAddressData.countryCodeAlpha2,\n                email: billingAddressData.email,\n                phone: billingAddressData.phone,\n                paymentMethod: params.paymentMethodName\n            });\n\n            var csrfToken = document.querySelector('.braintree-cart-paypal-buttons-wrap #csrf_token');\n            paypalCheckoutFormData.append(csrfToken.name, csrfToken.value);\n            paypalCheckoutFormData.append('braintreePaypalNonce', payload.nonce);\n            paypalCheckoutFormData.append('braintreePaypalRiskData', (params || {}).riskData);\n            paypalCheckoutFormData.append('braintreeSavePaypalAccount', true);\n            paypalCheckoutFormData.append('braintreePaypalShippingAddress',\n                details.shippingAddress ?\n                    paypalHelper.createShippingAddressData(details.shippingAddress, details) :\n                    '{}'\n            );\n            paypalCheckoutFormData.append('braintreePaypalBillingAddress', JSON.stringify(billingAddressData));\n\n            $.ajax({\n                type: 'POST',\n                url: params.paypalHandle,\n                data: paypalCheckoutFormData,\n                contentType: false,\n                processData: false,\n                success: function (data) {\n                    if (data.error) {\n                        var errorMessage = '';\n                        if (data.fieldErrors.length) {\n                            data.fieldErrors.forEach(function (error, index) {\n                                var keys = Object.keys(error);\n                                if (keys.length) {\n                                    errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                                }\n                            });\n                            helper.showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.serverErrors.length) {\n                            data.serverErrors.forEach(function (error) {\n                                errorMessage += `${error}. `;\n                            });\n                            helper.showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.cartError) {\n                            window.location.href = data.redirectUrl;\n                        }\n                        return;\n                    }\n\n                    window.location.href = params.redirectUrl;\n                },\n                error: function (err) {\n                    if (err && err.redirectUrl) {\n                        window.location.href = err.redirectUrl;\n                    }\n                }\n            });\n        };\n\n        var paypalIns = payPal.init(config, $btn);\n\n        function updateCartPaypalAmount() { // eslint-disable-line require-jsdoc\n            paypalIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    paypalIns.loader.hide();\n                    paypalIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n        }\n        $('body').on('cart:update', function () {\n            $paypalMinicartButton = document.querySelector('.paypalMinicartButton');\n            var $totalPrice = document.querySelector('.sub-total');\n            if ($paypalMinicartButton && $totalPrice) {\n                var isZeroAmount = $totalPrice.innerHTML.substring(1) === '0.00';\n                $paypalMinicartButton.style.display = isZeroAmount ? 'none' : '';\n            }\n        });\n\n        $('body').on('braintree:updateCartTotals', updateCartPaypalAmount);\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nvar observer = new MutationObserver(function (mutations) {\n    mutations.forEach(function (mutation) {\n        if (mutation.addedNodes.length < 2) {\n            return;\n        }\n        miniCartButton();\n        var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n        if ($staticPaypalButton) {\n            $staticPaypalButton.addEventListener('click', paypalSavedAccountHandler.staticImageHandler);\n        }\n    });\n});\nwindow.miniCartButton = miniCartButton;\nmodule.exports = {\n    miniCartButton,\n    observer\n};\n","'use strict';\nvar payPal = require('../braintreePaypal');\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar loaderInstance = require('../loaderHelper');\nvar accountsLoader;\n\nfunction initAddPaypalAccount() {\n    var $btn = document.querySelector('.js_braintree_accountPaypalButton');\n    var $paypalErrorContainer = document.querySelector('#paypalAccountErrorContainer');\n    var $paypalLoader = document.querySelector('#braintreePayPalAccLoader');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n\n    config.$loaderContainer = $paypalLoader;\n    config.$errorContainer = $paypalErrorContainer;\n    config.onTokenizePayment = function (data) {\n        let accountPaypalButton = document.querySelector('.js_braintree_accountPaypalButton');\n        let paypalAddAccountHandler = accountPaypalButton.getAttribute('data-paypal-add-account-handler');\n        let paypalAccountFormFields = accountPaypalButton.getAttribute('data-paypal-account-form-fields');\n        let paypalBillingAddressData = paypalHelper.createBillingAddressData(data.details.billingAddress, data.details);\n        let paypalAccountFormData = helper.createPaymentFormData(paypalAccountFormFields, {\n            nonce: data.nonce,\n            email: data.details.email,\n            addresses: JSON.stringify(paypalBillingAddressData),\n            shippingAddress: JSON.stringify(data.details.shippingAddress)\n        });\n        let csrfToken = document.querySelector('.js_braintree_accountPaypalButton_wrapper #csrf_token');\n        paypalAccountFormData.append(csrfToken.name, csrfToken.value);\n\n        let $loaderContainter = document.querySelector('#paypalAccountBtLoader');\n        accountsLoader = loaderInstance($loaderContainter);\n        accountsLoader.show();\n        return $.ajax({\n            type: 'POST',\n            url: paypalAddAccountHandler,\n            data: paypalAccountFormData,\n            contentType: false,\n            processData: false\n        })\n            .then((paymentData) => {\n                paypalHelper.hidePaypalAccountBtn();\n                $paypalLoader.style.display = 'none';\n                $paypalErrorContainer.textContent = '';\n                $paypalErrorContainer.style.display = 'none';\n\n                $.get(paymentData.renderAccountsUrl)\n                    .then((tplData => {\n                        accountsLoader.hide();\n                        document.querySelector('.paypal-accounts').innerHTML = tplData;\n                        document.querySelectorAll('.paypal-accounts .remove-bt-payment').forEach(function (el) {\n                            el.addEventListener('click', helper.removeBtPayment);\n                        });\n                    }));\n            })\n            .fail(({ responseJSON }) => {\n                accountsLoader.hide();\n                $paypalLoader.style.display = 'none';\n                $paypalErrorContainer.style.display = 'block';\n                $paypalErrorContainer.textContent = responseJSON.error;\n            });\n    };\n\n    payPal.init(config, $btn);\n    $btn.setAttribute('data-is-inited', true);\n}\n\nfunction initPayPalEvents() {\n    document.querySelector('.add-paypal-account').addEventListener('click', function () {\n        paypalHelper.showPaypalAccountBtn();\n        initAddPaypalAccount();\n    });\n}\n\nfunction initPaypalButtonsEvents() {\n    document.querySelector('.paypal-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            helper.removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = document.querySelector('.paypal-accounts').getAttribute('data-payment-method-id');\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            helper.setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\nmodule.exports = {\n    initPayPalEvents,\n    initAddPaypalAccount,\n    initPaypalButtonsEvents\n};\n","'use strict';\nvar helper = require('../helper');\n\nvar $addPaypalAccountBtn = document.querySelector('.add-paypal-account');\nvar $paypalAccountWrapper = document.querySelector('.js_braintree_accountPaypalButton_wrapper');\nvar $savePaypalAccountCountainer = document.querySelector('#braintreeSavePaypalAccountContainer');\nvar $savePaypalAccountCheckbox = document.querySelector('#braintreeSavePaypalAccount');\nvar $braintreePayPalNonce = document.querySelector('#braintreePayPalNonce');\nvar $continueButton = document.querySelector('.submit-payment');\n\nvar formValidationConrol = function (validateActions) {\n    var isFormValid = true;\n    if (isFormValid) {\n        validateActions.enable();\n    } else {\n        validateActions.disable();\n    }\n};\n\nfunction getOptionByEmail() {\n    var sessionEmail = document.getElementById('braintreePaypalAccount').value || null;\n    return Array.apply(null, document.querySelector('#braintreePaypalAccountsList').options).find(function (el) {\n        return el.getAttribute('data-id') && sessionEmail && sessionEmail === el.text;\n    });\n}\n\nfunction setSessionAccountOptionDefault() {\n    var savedDefaultOption = helper.getOptionByDataDefault('#braintreePaypalAccountsList');\n    if (!savedDefaultOption) return;\n\n    savedDefaultOption.selected = '';\n    helper.getSessionAccountOption({\n        querySelector: '#braintreePaypalAccountsList',\n        id: 'braintreePaypalAccount'\n    }).selected = 'selected';\n}\n\n/*\n    Check if paypal method was used and change appearance of paypal tab\n**/\nfunction removeSessionNonce() {\n    var sessionOption = helper.getSessionAccountOption({\n        querySelector: '#braintreePaypalAccountsList',\n        id: 'braintreePaypalAccount'\n    });\n    if (sessionOption) {\n        var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n        document.querySelector('#braintreePayPalNonce').value = '';\n        document.querySelector('#braintreePaypalAccount').selected = false;\n        sessionOption.classList.add('used-paypal-account-hide');\n        sessionOption.classList.remove('used-paypal-account');\n        sessionOption.value = '';\n        sessionOption.text = '';\n        sessionOption.setAttribute('data-session-account', false);\n        sessionOption.setAttribute('data-save', false);\n\n        var defaultOption = helper.getOptionByDataDefault('#braintreePaypalAccountsList');\n        if (defaultOption) {\n            defaultOption.selected = true;\n            document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            document.querySelector('.js_braintree_paypal_billing_button').style.display = 'block';\n            var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n            paypalAccount.classList.remove('used-paypal-account');\n            paypalAccount.classList.add('used-paypal-account-hide');\n        }\n\n        [].forEach.call(document.querySelector('#braintreePaypalAccountsList'), function (el) {\n            if (el.style.display === 'none') el.style.display = 'block';\n        });\n    }\n}\n\nfunction initAccountListAndSaveFunctionality() {\n    var $accountsList = document.querySelector('#braintreePaypalAccountsList');\n    var $alertInfo = document.getElementById('paypal-content').querySelectorAll('.alert-info')[0];\n\n    function accountsListChange() { // eslint-disable-line require-jsdoc\n        var isSameSessionAccount = getOptionByEmail();\n        $continueButton.removeEventListener('click', removeSessionNonce);\n\n        if ($accountsList.value === 'newaccount') {\n            $alertInfo.style.display = 'block';\n            if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCountainer.style.display = 'block';\n                $savePaypalAccountCheckbox.checked = true;\n            }\n        } else if ($accountsList.selectedOptions[0].id === 'braintreePaypalAccount') {\n            // Case when Session Email already saved under account\n            $braintreePayPalNonce.value = $accountsList.selectedOptions[0].getAttribute('data-nonce');\n            if (isSameSessionAccount) {\n                $savePaypalAccountCountainer.style.display = 'none';\n                $savePaypalAccountCheckbox.checked = false;\n            } else if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCountainer.style.display = 'block';\n                $savePaypalAccountCheckbox.checked = JSON.parse(document.querySelector('#braintreePaypalAccount').getAttribute('data-save'));\n            }\n        } else {\n            $continueButton.addEventListener('click', removeSessionNonce);\n            $braintreePayPalNonce.value = '';\n            $alertInfo.style.display = 'none';\n            if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCheckbox.checked = false;\n                $savePaypalAccountCountainer.style.display = 'none';\n            }\n        }\n    }\n\n    if ($accountsList) {\n        $accountsList.addEventListener('change', accountsListChange);\n        accountsListChange();\n    }\n}\n\nfunction createShippingAddressData(inpShippingAddress, details) {\n    var shippingAddress = inpShippingAddress;\n    if (!shippingAddress.recipientName) {\n        shippingAddress.firstName = details.firstName;\n        shippingAddress.lastName = details.lastName;\n        shippingAddress.recipientName = details.firstName + ' ' + details.lastName;\n    }\n    shippingAddress.email = details.email;\n    shippingAddress.phone = details.phone;\n    shippingAddress.countryCodeAlpha2 = shippingAddress.countryCode;\n    shippingAddress.streetAddress = shippingAddress.line1;\n    shippingAddress.extendedAddress = shippingAddress.line2;\n    shippingAddress.locality = shippingAddress.city;\n    shippingAddress.region = shippingAddress.state;\n    shippingAddress.postalCode = shippingAddress.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\nfunction createBillingAddressData(inpBillingAddress, details) {\n    var billingAddress = inpBillingAddress;\n    billingAddress.firstName = details.firstName;\n    billingAddress.lastName = details.lastName;\n    billingAddress.email = details.email;\n    billingAddress.phone = details.phone;\n    billingAddress.countryCodeAlpha2 = billingAddress.countryCode;\n    billingAddress.streetAddress = billingAddress.line1;\n    billingAddress.extendedAddress = billingAddress.line2;\n    billingAddress.locality = billingAddress.city;\n    billingAddress.region = billingAddress.state;\n    return billingAddress;\n}\n\nfunction appendToUrl(url, param) {\n    var newUrl = url;\n    newUrl += (newUrl.indexOf('?') !== -1 ? '&' : '?') + Object.keys(param).map(function (key) {\n        return key + '=' + encodeURIComponent(param[key]);\n    }).join('&');\n\n    return newUrl;\n}\n\nfunction showPayPalAccount(braintreePaypalEmail, braintreePaypalNonce) {\n    var braintreePaypalAccount = document.getElementById('braintreePaypalAccount');\n    var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $braintreePaypalAccountsList = document.getElementById('braintreePaypalAccountsList');\n    var customerAuthenticated = JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated);\n\n    if (customerAuthenticated || (braintreePaypalEmail && braintreePaypalAccount.text !== 'PayPal')) {\n        if (braintreePaypalNonce && $braintreePaypalAccountsList) {\n            return true;\n        }\n\n        document.querySelectorAll('.js_braintree_paypalContent .custom-checkbox').forEach((el) => { el.style.display = 'none'; });\n    }\n\n    braintreePaypalAccount.text = braintreePaypalEmail;\n    if (!paypalAccount.classList.contains('used-paypal-account')) {\n        paypalAccount.classList.remove('used-paypal-account-hide');\n        paypalAccount.classList.add('used-paypal-account');\n    }\n\n    document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n    $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n}\n\nfunction showCheckoutErrorMsg(message) {\n    document.querySelector('.error-message-text').textContent = '';\n    document.querySelector('.error-message').style.display = 'block';\n    document.querySelector('.error-message-text').append(message);\n    window.scrollTo(0, 0);\n}\n\nfunction showPDPButton($braintreePDPButton) {\n    $braintreePDPButton.style.display = '';\n}\n\nfunction hidePDPButton($braintreePDPButton) {\n    $braintreePDPButton.style.display = 'none';\n}\n\nfunction showPaypalAccountBtn() {\n    $addPaypalAccountBtn.style.display = 'none';\n    $paypalAccountWrapper.style.display = 'block';\n}\nfunction hidePaypalAccountBtn() {\n    $addPaypalAccountBtn.style.display = 'block';\n    $paypalAccountWrapper.style.display = 'none';\n}\n\nmodule.exports = {\n    formValidationConrol,\n    initAccountListAndSaveFunctionality,\n    createShippingAddressData,\n    createBillingAddressData,\n    appendToUrl,\n    showPayPalAccount,\n    showCheckoutErrorMsg,\n    showPDPButton,\n    hidePDPButton,\n    getOptionByEmail,\n    removeSessionNonce,\n    setSessionAccountOptionDefault,\n    showPaypalAccountBtn,\n    hidePaypalAccountBtn\n};\n","'use strict';\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar payPal = require('../braintreePaypal');\n\nvar $paypalContent = document.querySelector('.js_braintree_paypalContent');\nvar $paypalButton = document.querySelector('.js_braintree_paypal_billing_button');\nvar $braintreePaypalAccountsList = document.querySelector('#braintreePaypalAccountsList');\nvar $braintreePaypalNonceInput = document.querySelector('input[name=braintreePaypalNonce]');\nvar $braintreePaypalEmail = document.querySelector('#braintreePaypalEmail');\nvar $braintreePaypalNonce = document.querySelector('#braintreePayPalNonce');\nvar $braintreePaypalBillingAddressInput = document.querySelector('input[name=braintreePaypalBillingAddress]');\n\nfunction makePaypalPayment(continueButton) {\n    var config = JSON.parse($paypalButton.getAttribute('data-braintree-config'));\n    var isSessionAccount = helper.getSessionAccountOption({\n        querySelector: '#braintreePaypalAccountsList',\n        id: 'braintreePaypalAccount'\n    });\n    var isSameSessionAccount = paypalHelper.getOptionByEmail();\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($paypalButton, 'not valid data-braintree-config');\n    }\n\n    function hideShowButtons() {\n        if ($braintreePaypalAccountsList.value === 'newaccount') {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            continueButton.style.display = 'none';\n            $paypalButton.style.display = '';\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            continueButton.style.display = '';\n            $paypalButton.style.display = 'none';\n        }\n    }\n\n    if ($braintreePaypalAccountsList) {\n        $braintreePaypalAccountsList.addEventListener('change', function () {\n            hideShowButtons();\n        });\n    }\n\n    // Getting same email option as session email, if any found\n    if (JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated) && isSessionAccount) {\n        if (isSameSessionAccount) {\n            isSameSessionAccount.style.display = 'none';\n            if (isSessionAccount.classList.contains('used-paypal-account-hide')) {\n                isSessionAccount.classList.add('used-paypal-account');\n                isSessionAccount.classList.remove('used-paypal-account-hide');\n            }\n        }\n\n        paypalHelper.setSessionAccountOptionDefault();\n    }\n\n    paypalHelper.initAccountListAndSaveFunctionality();\n\n    config.onTokenizePayment = function (data) {\n        helper.removeActiveSessionPayment();\n        if ($braintreePaypalNonceInput) {\n            $braintreePaypalNonceInput.value = data.nonce;\n        }\n        $braintreePaypalNonce.value = data.nonce;\n        document.querySelector('#braintreePaypalAccount').setAttribute('data-session-account', 'true');\n        document.querySelector('#braintreePaypalAccount').setAttribute('data-nonce', data.nonce);\n\n        if (data.details) {\n            var details = data.details;\n            $braintreePaypalEmail.value = data.details.email;\n            document.querySelector('#braintreePaypalAccount').value = data.details.email;\n            document.querySelector('#braintreePaypalAccount').text = data.details.email;\n            helper.continueButtonToggle(false);\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n\n            if (details.billingAddress) {\n                // Updating Storefront Billing Form data with PayPal Billing\n                var paypalBillingData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n                storeFrontBillingData.dwfrm_billing_addressFields_firstName = paypalBillingData.firstName;\n                storeFrontBillingData.dwfrm_billing_addressFields_lastName = paypalBillingData.lastName;\n                storeFrontBillingData.dwfrm_billing_addressFields_address1 = paypalBillingData.streetAddress;\n                storeFrontBillingData.dwfrm_billing_addressFields_address2 = paypalBillingData.extendedAddress || '';\n                storeFrontBillingData.dwfrm_billing_addressFields_city = paypalBillingData.locality;\n                storeFrontBillingData.dwfrm_billing_addressFields_postalCode = paypalBillingData.postalCode;\n                storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = paypalBillingData.state;\n                storeFrontBillingData.dwfrm_billing_addressFields_country = paypalBillingData.countryCodeAlpha2;\n                storeFrontBillingData.dwfrm_billing_contactInfoFields_email = paypalBillingData.email;\n                storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = paypalBillingData.phone;\n\n                $braintreePaypalBillingAddressInput.value = JSON.stringify(paypalBillingData);\n                helper.updateBillingFormValues(storeFrontBillingData);\n            }\n\n            if ($braintreePaypalAccountsList && $braintreePaypalAccountsList.value === 'newaccount') {\n                document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n                var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n                var sessionAccount = document.querySelector('#braintreePaypalAccount');\n                if (!paypalAccount.classList.contains('used-paypal-account')) {\n                    paypalAccount.classList.remove('used-paypal-account-hide');\n                    paypalAccount.classList.add('used-paypal-account');\n                    sessionAccount.classList.remove('used-paypal-account-hide');\n                    sessionAccount.classList.add('used-paypal-account');\n                } else {\n                    sessionAccount.classList.remove('used-paypal-account-hide');\n                    sessionAccount.classList.add('used-paypal-account');\n                }\n            }\n        }\n\n        var newPPAccount = document.getElementById('newPPAccount');\n        if (newPPAccount.selected) {\n            newPPAccount.removeAttribute('selected');\n            document.querySelector('#braintreePaypalAccount').selected = true;\n        }\n\n        // Getting same email option as session email, if any found\n        if (JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated) && helper.getSessionAccountOption({\n            querySelector: '#braintreePaypalAccountsList',\n            id: 'braintreePaypalAccount'\n        })) {\n            isSameSessionAccount = paypalHelper.getOptionByEmail();\n            paypalHelper.setSessionAccountOptionDefault();\n\n            if (isSameSessionAccount) {\n                isSameSessionAccount.style.display = 'none';\n                document.getElementById('braintreeSavePaypalAccount').value = false;\n                document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            } else {\n                [].forEach.call(document.querySelector('#braintreePaypalAccountsList'), function (el) {\n                    if (el.style.display === 'none') el.style.display = 'block';\n                });\n            }\n        }\n\n        paypalHelper.showPayPalAccount(data.details.email, data.nonce);\n        continueButton.click();\n    };\n\n    config.paypalConfig = config.paypalConfig || {};\n    config.paypalConfig.validate = function (validateActions) {\n        paypalHelper.formValidationConrol(validateActions, true);\n    };\n\n    var paypalIns = payPal.init(config, $paypalButton);\n    if (document.querySelector('.braintree_used_paypal_account').classList.contains('used-paypal-account')) {\n        paypalHelper.showPayPalAccount(document.querySelector('#braintreePaypalEmail').value);\n    }\n    function updateAmountAndShippingData() { // eslint-disable-line require-jsdoc\n        paypalIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                var $paypalAddress = document.querySelector('input[name=braintreePaypalShippingAddress]') !== '';\n                paypalIns.loader.hide();\n                paypalIns.updateAmount(data.amount);\n                paypalIns.updateShippingAddress(data.shippingAddress);\n                if ($paypalAddress.value) {\n                    var newPayPalAddress = $.extend({}, JSON.parse($paypalAddress.value), data.shippingAddress);\n                    $paypalAddress.value = JSON.stringify(newPayPalAddress);\n                }\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', updateAmountAndShippingData);\n    updateAmountAndShippingData();\n}\n\nmodule.exports = {\n    makePaypalPayment\n};\n","'use strict';\n\nvar braintreeUtils = require('../braintreeUtils');\nvar loaderInstance = require('../loaderHelper');\nvar {\n    showPDPButton,\n    hidePDPButton,\n    showCartErrorMsg } = require('./paypalHelper');\nvar { createPaymentFormData } = require('../helper');\n\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\n\nfunction staticImageHandler() {\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var loader = loaderInstance($loaderContainter);\n    var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n    var checkoutFromCartUrl = $staticPaypalButton.getAttribute('data-checkout-from-cart-url');\n    var placeOrderUrl = $staticPaypalButton.getAttribute('data-paypal-placeorder-url');\n\n    var ppAccountData = JSON.parse($staticPaypalButton.getAttribute('data-paypal-account-data'));\n    var ppAccountAddressData = JSON.parse(ppAccountData.address);\n    var paypalCheckoutFormFields = document.querySelector('.braintree-cart-paypal-buttons-wrap').getAttribute('data-paypal-checkout-form-fields');\n    var paypalCheckoutFormData = createPaymentFormData(paypalCheckoutFormFields, {\n        firstName: ppAccountAddressData.firstName,\n        lastName: ppAccountAddressData.lastName,\n        address1: ppAccountAddressData.streetAddress,\n        address2: ppAccountAddressData.extendedAddress || '',\n        city: ppAccountAddressData.locality,\n        postalCode: ppAccountAddressData.postalCode,\n        stateCode: ppAccountAddressData.state,\n        country: ppAccountAddressData.countryCodeAlpha2,\n        email: ppAccountData.email,\n        phone: ppAccountAddressData.phone.replace('-', ''),\n        paymentMethod: ppAccountData.paymentMethod\n    });\n    paypalCheckoutFormData.append('braintreeSavePaypalAccount', true);\n    paypalCheckoutFormData.append('paymentMethodUUID', ppAccountData.uuid);\n    var csrfToken = document.querySelector('.braintree-cart-paypal-buttons-wrap #csrf_token');\n    paypalCheckoutFormData.append(csrfToken.name, csrfToken.value);\n\n    loader.show();\n    if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n        var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n        if (res.error) {\n            loader.hide();\n            // eslint-disable-next-line no-unused-expressions\n            window.location.reload;\n            return;\n        }\n    }\n\n    return $.ajax({\n        url: checkoutFromCartUrl,\n        type: 'POST',\n        data: paypalCheckoutFormData,\n        contentType: false,\n        processData: false,\n        success: function (data) {\n            loader.hide();\n            if (data.error) {\n                var errorMessage = '';\n                if (data.fieldErrors.length) {\n                    data.fieldErrors.forEach(function (error, index) {\n                        var keys = Object.keys(error);\n                        if (keys.length) {\n                            errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                        }\n                    });\n                    showCartErrorMsg(errorMessage);\n                }\n\n                if (data.serverErrors.length) {\n                    data.serverErrors.forEach(function (error) {\n                        errorMessage += `${error}. `;\n                    });\n                    showCartErrorMsg(errorMessage);\n                }\n\n                if (data.cartError) {\n                    window.location.href = data.redirectUrl;\n                }\n                return;\n            }\n\n            sessionStorage.setItem('pageState', 'cart');\n            window.location.href = placeOrderUrl;\n        },\n        error: function (err) {\n            loader.hide();\n            if (err && err.redirectUrl) {\n                window.location.href = err.redirectUrl;\n            }\n        }\n    });\n}\n\nfunction paypalStaticPdpButtonHandler() {\n    if ($braintreePDPButton) {\n        var $price = document.querySelector('.price .sales .value');\n        var isZeroAmount = false;\n        var $miniCartQuantity = document.querySelector('.minicart-quantity');\n        var $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\n\n        // Check minicart quantity and hide PDPbutton if it is not empty\n        if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\n            || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\n            hidePDPButton($braintreePDPButton);\n        }\n\n        if ($addToCartButton.disabled) {\n            hidePDPButton($braintreePDPButton);\n        }\n\n        $('body').on('product:afterAddToCart', function () {\n            hidePDPButton($braintreePDPButton);\n        });\n\n        $('body').on('cart:update', function () {\n            $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n            if ($addToCartButton.disabled) {\n                hidePDPButton($braintreePDPButton);\n            }\n            if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                showPDPButton($braintreePDPButton);\n            }\n        });\n\n        $('body').on('product:statusUpdate', function () {\n            $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n            $price = document.querySelector('.price .sales .value');\n            isZeroAmount = false;\n            if ($price) {\n                isZeroAmount = $price.getAttribute('content') === '0.00';\n            }\n\n            if ($miniCartQuantity === 0) {\n                if ($addToCartButton.disabled || isZeroAmount) {\n                    hidePDPButton($braintreePDPButton);\n                }\n                if (!$addToCartButton.disabled && !isZeroAmount) {\n                    showPDPButton($braintreePDPButton);\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = {\n    staticImageHandler,\n    paypalStaticPdpButtonHandler\n};\n","var src = require('../braintreeSrc');\nvar loaderInstance = require('../loaderHelper');\n\nfunction submitAddSrcAccountForm() {\n    $('.js_braintree_addSrcAccountForm').submit(function () {\n        var $form = $(this);\n        var $btSrcFormErrorContainer = document.querySelector('#braintreeSrcFormErrorContainer');\n        $form.spinner().start();\n\n        $.post($form.attr('action'), $form.serialize())\n            .done(function (data) {\n                $form.spinner().stop();\n                if (!data.success) {\n                    $btSrcFormErrorContainer.style.display = 'block';\n                    $btSrcFormErrorContainer.textContent = data.error;\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            })\n            .fail(function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $form.spinner().stop();\n            });\n        return false;\n    });\n}\n\nfunction initAddSrcAccount() {\n    var srcIns;\n    var $btn = document.querySelector('.js_braintree_src_account_button');\n    var $srcNonce = document.querySelector('#braintreeSrcNonce');\n    var $btSrcFormErrorContainer = document.querySelector('#braintreeSrcFormErrorContainer');\n    var $btSrcLoader = document.querySelector('.braintreeSrcLoader');\n    var loader = loaderInstance($btSrcLoader);\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n    loader.show();\n\n    config.onTokenizePayment = function (data) {\n        if ($btSrcFormErrorContainer.style.display === 'block') {\n            $btSrcFormErrorContainer.style.display = 'none';\n            $btSrcFormErrorContainer.textContent = '';\n        }\n        $srcNonce.value = data.nonce;\n        document.querySelector('.braintreeSrcBtn').click();\n    };\n\n    srcIns = src.init(config, $btn);\n    srcIns.loadSrcButton();\n\n    $btn.setAttribute('data-is-inited', true);\n    submitAddSrcAccountForm();\n}\n\nmodule.exports = {\n    initAddSrcAccount\n};\n","var $srcContent = document.querySelector('.js_braintree_srcContent');\nvar $srcSessionAccount = document.querySelector('#sessionSrcAccount');\nvar $srcAccountList = document.querySelector('#braintreeSrcAccountsList');\nvar $srcButton = document.querySelector('.js_braintree_src_button');\nvar $accoutnListBlock = document.querySelector('.braintree_used_src_account');\nvar $alertInfo = document.getElementById('src-content') && document.getElementById('src-content').querySelectorAll('.alert-info')[0];\nvar helper = require('../helper');\nvar $saveSRCAccountCheckbox = document.querySelector('#braintreeSaveSRCAccount');\n\n\nfunction srcUpdateAmount(srcIns, config) { // eslint-disable-line require-jsdoc\n    srcIns.loader.show();\n    $.ajax({\n        url: config.getOrderInfoUrl,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            srcIns.loader.hide();\n            srcIns.updateAmount(data.amount);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction setSessionAccountData(cardDescrition) {\n    $srcSessionAccount.value = cardDescrition;\n    $srcSessionAccount.text = cardDescrition;\n    $srcSessionAccount.selected = true;\n    $accoutnListBlock.style.display = 'block';\n    $srcButton.style.display = 'none';\n    $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    helper.continueButtonToggle(false);\n}\n\nfunction updateSessionAccountDropdown() {\n    if ($srcAccountList.value === 'newaccount') {\n        $srcButton.style.display = 'block';\n        $alertInfo.style.display = 'block';\n        helper.continueButtonToggle(true);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', true);\n\n        if ($saveSRCAccountCheckbox) {\n            $saveSRCAccountCheckbox.checked = true;\n        }\n    } else {\n        $srcButton.style.display = 'none';\n        $alertInfo.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n\n        if ($saveSRCAccountCheckbox) {\n            $saveSRCAccountCheckbox.checked = JSON.parse($srcSessionAccount.getAttribute('data-save'));\n        }\n    }\n}\n\nfunction initSessionAccountDropdownState() {\n    if ($srcAccountList.value === 'newaccount') {\n        $alertInfo.style.display = 'block';\n        $accoutnListBlock.style.display = 'none';\n    } else {\n        helper.continueButtonToggle(false);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        $srcButton.style.display = 'none';\n        $alertInfo.style.display = 'none';\n    }\n}\n\n/*\n    Remove method was used and change appearance of googlepay tab\n**/\nfunction removeSessionNonce() {\n    var $sessionAccount = document.querySelector('#sessionSrcAccount');\n    $sessionAccount.value = '';\n    $sessionAccount.text = '';\n    $sessionAccount.setAttribute('data-save', false);\n    $accoutnListBlock.style.display = 'none';\n\n    document.querySelector('#braintreeSRCNonce').value = '';\n    document.querySelector('#braintreeSrcBillingAddress').value = '';\n    document.querySelector('#braintreeSrcCardDescription').value = '';\n\n    document.querySelector('#newSrcAccount').selected = true;\n    updateSessionAccountDropdown();\n}\n\nfunction createSrcShippingAddressData(shippingData) {\n    var shippingAddress = {};\n    shippingAddress.recipientName = shippingData.firstName + ' ' + shippingData.lastName;\n    shippingAddress.phone = shippingData.phoneNumber;\n    shippingAddress.countryCodeAlpha2 = shippingData.countryCode;\n    shippingAddress.streetAddress = shippingData.streetAddress;\n    shippingAddress.extendedAddress = shippingData.extendedAddress;\n    shippingAddress.locality = shippingData.locality;\n    shippingAddress.region = shippingData.region;\n    shippingAddress.postalCode = shippingData.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\nmodule.exports = {\n    srcUpdateAmount,\n    setSessionAccountData,\n    updateSessionAccountDropdown,\n    initSessionAccountDropdownState,\n    removeSessionNonce,\n    createSrcShippingAddressData\n};\n","'use strict';\nvar src = require('../braintreeSrc');\nvar srcHelper = require('./srcHelper');\n\nvar {\n    createPaymentFormData,\n    showCartErrorMsg,\n    updateBillingFormValues\n} = require('./../helper');\n\nvar $srcButton = document.querySelector('.js_braintree_src_button');\nvar $srcNonce = document.querySelector('#braintreeSRCNonce');\nvar $srcCardDescription = document.querySelector('#braintreeSrcCardDescription');\nvar $srcBillingAddress = document.querySelector('#braintreeSrcBillingAddress');\nvar $srcAccountList = document.querySelector('#braintreeSrcAccountsList');\nvar $srcOnCart = document.querySelector('.braintree-cart-src-button');\n\nfunction initSrcButton(continueButton) {\n    var srcIns;\n    var config = JSON.parse($srcButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($srcButton, 'not valid data-braintree-config');\n    }\n\n    if ($srcAccountList) {\n        srcHelper.initSessionAccountDropdownState();\n        $srcAccountList.addEventListener('change', srcHelper.updateSessionAccountDropdown);\n    }\n\n    config.onTokenizePayment = function (response) {\n        require('../helper').removeActiveSessionPayment();\n        var cardDescription = response.details.cardType + ' ' + response.description;\n        var deviceData = document.querySelector('input[name=braintreeSrcDeviceDataInput]').value;\n\n        // Billing Checkout\n        if (!$srcOnCart) {\n            $srcNonce.value = response.nonce;\n            $srcCardDescription.value = cardDescription;\n            srcHelper.setSessionAccountData(cardDescription);\n\n            // Updating Storefront Billing Form data with SRC Billing\n            var scrPayBillingData = response.billingAddress;\n            var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n            storeFrontBillingData.dwfrm_billing_addressFields_firstName = scrPayBillingData.firstName;\n            storeFrontBillingData.dwfrm_billing_addressFields_lastName = scrPayBillingData.lastName;\n            storeFrontBillingData.dwfrm_billing_addressFields_address1 = scrPayBillingData.streetAddress;\n            storeFrontBillingData.dwfrm_billing_addressFields_address2 = scrPayBillingData.extendedAddress || '';\n            storeFrontBillingData.dwfrm_billing_addressFields_city = scrPayBillingData.locality;\n            storeFrontBillingData.dwfrm_billing_addressFields_postalCode = scrPayBillingData.postalCode;\n            storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = scrPayBillingData.region;\n            storeFrontBillingData.dwfrm_billing_addressFields_country = scrPayBillingData.countryCode;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_email = response.userData.userEmail;\n            storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = scrPayBillingData.phoneNumber;\n\n            scrPayBillingData.email = response.userData.userEmail;\n            $srcBillingAddress.value = JSON.stringify(scrPayBillingData);\n\n            updateBillingFormValues(storeFrontBillingData);\n\n            continueButton.click();\n            return;\n        }\n\n        // Cart Checkout\n        var shippingAddressData = srcHelper.createSrcShippingAddressData(response.shippingAddress);\n        var paymentMethodName = JSON.parse($srcButton.getAttribute('data-braintree-config')).paymentMethodName;\n        var $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n        var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n        var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n        var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n        var srcCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n            firstName: response.userData.userFirstName,\n            lastName: response.userData.userLastName,\n            address1: response.billingAddress.streetAddress,\n            address2: response.billingAddress.extendedAddress || '',\n            city: response.billingAddress.locality,\n            postalCode: response.billingAddress.postalCode,\n            stateCode: response.billingAddress.region,\n            country: response.billingAddress.countryCode,\n            email: response.userData.userEmail,\n            phone: response.billingAddress.phoneNumber,\n            paymentMethod: paymentMethodName\n        });\n\n        var csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n        srcCheckoutFormData.append(csrfToken.name, csrfToken.value);\n        srcCheckoutFormData.append('braintreeSrcNonce', response.nonce);\n        srcCheckoutFormData.append('braintreeSrcDeviceDataInput', deviceData);\n        srcCheckoutFormData.append('braintreeSaveSRCAccount', true);\n        srcCheckoutFormData.append('braintreeSrcShippingAddress',\n            shippingAddressData || '{}'\n        );\n        srcCheckoutFormData.append('braintreeSrcCardDescription', cardDescription);\n\n        $.ajax({\n            type: 'POST',\n            url: checkoutFromCartUrl,\n            data: srcCheckoutFormData,\n            contentType: false,\n            processData: false,\n            success: function (data) {\n                if (data.error) {\n                    var errorMessage = '';\n                    if (data.fieldErrors.length) {\n                        data.fieldErrors.forEach(function (error, index) {\n                            var keys = Object.keys(error);\n                            if (keys.length) {\n                                errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                            }\n                        });\n                        showCartErrorMsg(errorMessage);\n                    }\n\n                    if (data.serverErrors.length) {\n                        data.serverErrors.forEach(function (error) {\n                            errorMessage += `${error}. `;\n                        });\n                        showCartErrorMsg(errorMessage);\n                    }\n\n                    if (data.cartError) {\n                        window.location.href = data.redirectUrl;\n                    }\n                    return;\n                }\n\n                sessionStorage.setItem('pageState', 'cart');\n                srcIns.loader.hide();\n                window.location.href = placeOrderUrl;\n            },\n            error: function (err) {\n                if (err && err.redirectUrl) {\n                    window.location.href = err.redirectUrl;\n                }\n            }\n        });\n    };\n\n    srcIns = src.init(config, $srcButton);\n    srcIns.loadSrcButton();\n\n    $('body').on('checkout:updateCheckoutView', srcHelper.srcUpdateAmount.bind(null, srcIns, config));\n    $('body').on('braintree:updateCartTotals', srcHelper.srcUpdateAmount.bind(null, srcIns, config));\n    srcHelper.srcUpdateAmount(srcIns, config);\n}\n\nmodule.exports = {\n    initSrcButton\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar helper = require('../helper');\nvar loaderInstance = require('../loaderHelper');\nvar accountsLoader;\n\nfunction initAddVenmoAccount() {\n    var $btn = document.querySelector('.js_braintree_accountVenmoButton');\n    var $venmoErrorContainer = document.querySelector('#venmoAccountErrorContainer');\n    var $venmoLoader = document.querySelector('#braintreeVenmoAccLoader');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n\n    config.$loaderContainer = $venmoLoader;\n    config.$errorContainer = $venmoErrorContainer;\n    config.deviceNotSupportVenmo = function () {\n        venmoHelper.showVenmoAccountError();\n        $venmoErrorContainer.textContent = config.messages.VENMO_BROWSER_NOT_SUPPORTED;\n    };\n    config.onTokenizePayment = function (data) {\n        let accountVenmoButton = document.querySelector('.js_braintree_accountVenmoButton');\n        let venmoAddAccountHandler = accountVenmoButton.getAttribute('data-venmo-add-account-handler');\n        let venmoAccountFormFields = accountVenmoButton.getAttribute('data-venmo-account-form-fields');\n        let venmoAccountFormData = helper.createPaymentFormData(venmoAccountFormFields, {\n            nonce: data.nonce\n        });\n        let csrfToken = document.querySelector('.js_braintree_accountVenmoButton_wrapper #csrf_token');\n        venmoAccountFormData.append(csrfToken.name, csrfToken.value);\n\n        let $loaderContainter = document.querySelector('#venmoAccountBtLoader');\n        accountsLoader = loaderInstance($loaderContainter);\n        accountsLoader.show();\n        return $.ajax({\n            type: 'POST',\n            url: venmoAddAccountHandler,\n            data: venmoAccountFormData,\n            contentType: false,\n            processData: false\n        })\n            .then((paymentData) => {\n                venmoHelper.hideVenmoAccountBtn();\n                $venmoLoader.style.display = 'none';\n                $venmoErrorContainer.textContent = '';\n                $venmoErrorContainer.style.display = 'none';\n\n                $.get(paymentData.renderAccountsUrl)\n                    .then((tplData => {\n                        accountsLoader.hide();\n                        document.querySelector('.venmo-accounts').innerHTML = tplData;\n                        document.querySelectorAll('.venmo-accounts .remove-bt-payment').forEach(function (el) {\n                            el.addEventListener('click', helper.removeBtPayment);\n                        });\n                    }));\n            })\n            .fail(({ responseJSON }) => {\n                accountsLoader.hide();\n                $venmoLoader.style.display = 'none';\n                $venmoErrorContainer.style.display = 'block';\n                $venmoErrorContainer.textContent = responseJSON.error;\n            });\n    };\n\n    braintreeVenmo.init(config, $btn);\n    $btn.setAttribute('isInited', true);\n}\n\nfunction initVenmoEvents() {\n    let $addVenmoAccountBtn = document.querySelector('.add-venmo-account');\n    $addVenmoAccountBtn.addEventListener('click', function () {\n        venmoHelper.showVenmoAccountBtn();\n        initAddVenmoAccount();\n    });\n}\n\nfunction initVenmoButtonsEvents() {\n    document.querySelector('.venmo-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            helper.removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = document.querySelector('.venmo-accounts').getAttribute('data-payment-method-id');\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            helper.setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\nmodule.exports = {\n    initVenmoEvents,\n    initAddVenmoAccount,\n    initVenmoButtonsEvents\n};\n","'use strict';\nvar helper = require('../helper');\n\nvar $accountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $saveVenmoAccountCountainerEl = document.querySelector('#braintreeSaveVenmoAccountContainer');\nvar $saveVenmoAccountEl = document.querySelector('#braintreeSaveVenmoAccount');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $braintreeVenmoAccount = document.getElementById('braintreeVenmoAccount');\nvar $venmoAccount = document.querySelector('.js_braintree_used_venmo_account');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\n\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nvar $addVenmoAccountBtn = document.querySelector('.add-venmo-account');\nvar $venmoAccountWrapper = document.querySelector('.js_braintree_accountVenmoButton_wrapper');\n\nfunction showVenmoAccount() {\n    if (!$accountsList) {\n        $venmoAccount.classList.remove('used-venmo-account-hide');\n        $braintreeVenmoAccount.options[0].text = $braintreeVenmoUserId.value;\n    }\n\n    $venmoButton.style.display = 'none';\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($accountsList.value === 'newaccount') {\n        $venmoButton.style.display = 'block';\n        helper.continueButtonToggle(true);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', true);\n    } else {\n        $venmoButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        if ($saveVenmoAccountCountainerEl) {\n            $saveVenmoAccountEl.checked = false;\n            $saveVenmoAccountCountainerEl.style.display = 'none';\n        }\n    }\n}\n\nfunction createLoaderContainter($target) {\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'venmo-braintree-loader';\n    helper.continueButtonToggle(true);\n\n    return $target.parentNode.insertBefore($loaderContainter, $target);\n}\n\nfunction hideVenmoButton() {\n    $venmoButton.parentElement.firstElementChild.style.display = 'none';\n    document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"Venmo\"]').style.display = 'none'; // Remove the venmo select payment method radiobutton\n}\n\n/**\n * updates the billing address form values within saved billing\n * @param {Object} billingAddress - the billing Address\n */\nfunction updateBillingAddressFormValues(billingAddress) {\n    var form = $('form[name=dwfrm_billing]');\n    var inputNames = ['firstName', 'lastName', 'address1', 'address2', 'city', 'postalCode', 'country'];\n    if (!form) return;\n\n    $.each(inputNames, function (index, value) {\n        $(`input[name$=_${value}]`, form).val(decodeURIComponent(billingAddress[value]));\n    });\n    $('select[name$=_stateCode],input[name$=_stateCode]', form)\n        .val(billingAddress.stateCode);\n}\n\nfunction showVenmoAccountBtn() {\n    $addVenmoAccountBtn.style.display = 'none';\n    $venmoAccountWrapper.style.display = 'block';\n}\nfunction hideVenmoAccountBtn() {\n    $addVenmoAccountBtn.style.display = 'block';\n    $venmoAccountWrapper.style.display = 'none';\n}\nfunction showVenmoAccountError() {\n    $addVenmoAccountBtn.style.display = 'none';\n    $venmoAccountWrapper.style.display = 'block';\n    [].slice.call($venmoAccountWrapper.children).forEach(function (item) {\n        if (!item.classList.contains('error')) {\n            item.style.display = 'none';\n        }\n    });\n}\n\n/*\n    Remove method was used and change appearance of venmo tab\n**/\nfunction removeSessionNonce() {\n    var defaultOption = helper.getOptionByDataDefault('#braintreeVenmoAccountsList');\n    document.querySelector('#braintreeVenmoNonce').value = '';\n    document.querySelector('#braintreeVenmoBilling').value = '';\n    if (defaultOption) {\n        defaultOption.selected = true;\n        hideShowButtons();\n    } else {\n        $venmoAccount.classList.remove('used-venmo-account');\n        $venmoAccount.classList.add('used-venmo-account-hide');\n        $venmoButton.style.display = 'block';\n    }\n}\n\nmodule.exports = {\n    showVenmoAccount,\n    hideShowButtons,\n    createLoaderContainter,\n    hideVenmoButton,\n    updateBillingAddressFormValues,\n    showVenmoAccountBtn,\n    hideVenmoAccountBtn,\n    showVenmoAccountError,\n    removeSessionNonce\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar loaderInstance = require('../loaderHelper');\nvar helper = require('../helper');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $btVermoAccountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $braintreeVenmoNonce = document.querySelector('#braintreeVenmoNonce');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\nvar $submitShippingBtn = document.querySelector('.button, .submit-shipping');\nvar $contactEmail = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $hideVenmoButton = document.querySelector('.braintree-venmo-pay-button');\nvar $billingForm = document.querySelector('.card-body [id=dwfrm_billing]');\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nfunction makeVenmoPayment(continueButton) {\n    var config = JSON.parse($venmoButton.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($venmoButton, 'not valid data-braintree-config');\n    }\n\n    if (JSON.parse($hideVenmoButton.getAttribute('data-is-hide-venmo-button')) && $btVermoAccountsList !== 'newaccount') {\n        $venmoButton.style.display = 'none';\n    }\n\n    if ($btVermoAccountsList) {\n        $btVermoAccountsList.addEventListener('change', function () {\n            venmoHelper.hideShowButtons();\n        });\n        venmoHelper.hideShowButtons();\n    }\n\n    config.onClick = function () {\n        if ($billingForm.checkValidity()) {\n            /**\n                * Setting current customer Billing address to form\n                *  For the case when SFCC redirects customer from payment stage to shipping stage\n                *  after successful Venmo app response\n            */\n            document.querySelector('#braintreeVenmoBilling').value = JSON.stringify(helper.getBillingAddressFormValues());\n\n            return true;\n        }\n        $contactEmail.classList.add('is-invalid');\n        return false;\n    };\n    config.deviceNotSupportVenmo = function () {\n        venmoHelper.hideVenmoButton();\n    };\n    config.onTokenizePayment = function (data) {\n        var $loaderContainer = venmoHelper.createLoaderContainter(document.querySelector('.page'));\n        loaderInstance($loaderContainer).show();\n        helper.removeActiveSessionPayment();\n\n        $braintreeVenmoNonce.value = data.nonce;\n        $braintreeVenmoUserId.value = data.details.username;\n\n        if (window.history.state !== 'shipping') {\n            continueButton.click();\n            document.querySelector('.venmo-braintree-loader').remove();\n            return true;\n        }\n\n        venmoHelper.updateBillingAddressFormValues(JSON.parse(document.querySelector('#braintreeVenmoBilling').value));\n\n        // move to stage payment\n        $submitShippingBtn.click();\n        $venmoButton.setAttribute('data-is-valid-stage', true);\n        $venmoButton.setAttribute('data-user-email', $contactEmail.value);\n        document.querySelector('.venmo-braintree-loader').remove();\n    };\n\n    /**\n        *  Init Venmo app with correct URL fragment (hash) to prevent Browser from opening the URL in a new tab.\n        *  Braintree JS SDK is preserving the URL in its entirety and modifies the URL fragment (hash)\n        *  to send back the results from Venmo (e.g. nonce, error message, etc.)\n        *\n    */\n    var hashChange = new MutationObserver(function (mutations) {\n        var correlationId = document.querySelector('#braintreeVenmoDeviceData').value || null;\n        var mutation = mutations.find(function (element) {\n            return element.attributeName === 'data-checkout-stage' && element.target.dataset.checkoutStage === 'payment';\n        });\n\n        if (!mutation) {\n            return false;\n        }\n        if (!correlationId) {\n            braintreeVenmo.init(config, $venmoButton);\n            return true;\n        }\n\n        if ($braintreeVenmoNonce.value && JSON.parse($venmoButton.getAttribute('data-is-valid-stage'))) {\n            $contactEmail.value = $venmoButton.getAttribute('data-user-email') || '';\n            $venmoButton.setAttribute('data-is-valid-stage', false);\n            continueButton.click();\n\n            return true;\n        }\n        if ($venmoContent.classList.contains('active') && mutation.oldValue === 'placeOrder') {\n            venmoHelper.showVenmoAccount();\n            $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            $hideVenmoButton.setAttribute('data-is-hide-venmo-button', true);\n        }\n    });\n\n    hashChange.observe(document.querySelector('#checkout-main'), { attributeOldValue: true });\n}\n\nmodule.exports = {\n    makeVenmoPayment\n};\n","'use strict';\n\nmodule.exports = function (element) {\n    var position = element && element.length ? element.offset().top : 0;\n    $('html, body').animate({\n        scrollTop: position\n    }, 500);\n    if (!element) {\n        $('.logo-home').focus();\n    }\n};\n","'use strict';\nvar applePay = require('braintree_base/braintree/braintreeApplepay');\nvar {\n    isValidInputField,\n    removeActiveSessionPayment,\n    createPaymentFormData,\n    showCartErrorMsg,\n    updateBillingFormValues\n} = require('braintree_base/braintree/helper');\n\n\nvar $applePayButton = document.querySelector('.js_braintree_applepay_button');\nvar $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\nvar $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\nvar $emailField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $phoneField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]');\n\nfunction makeApplePayButtonDisabled() {\n    $applePayButton.classList.add('js_braintree_applepay_button_disabled');\n}\n\nfunction hideApplePayButton() {\n    var $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\n    var $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\n    $applepayButtonsWrap.style.display = 'none'; // Remove the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'none';\n    }\n}\n\nfunction showApplePayButton() {\n    var $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\n    var $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\n    $applepayButtonsWrap.style.display = 'block'; // Show the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'block';\n    }\n}\n\nfunction initApplepayButton() {\n    console.log('apple pay init called --- ');\n    document.querySelectorAll('.js_braintree_applepay_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        $btn.addEventListener('braintree:deviceNotSupportApplePay', function () {\n            hideApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:deviceSupportApplePay', function () {\n            showApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n            makeApplePayButtonDisabled();\n        }, false);\n\n        config.isRequiredBillingContactFields = true;\n        config.isRequiredShippingContactFields = true;\n        var applePayIns = applePay.init(config, $btn);\n\n        $btn.addEventListener('click', function () {\n            applePayIns.startPayment();\n        });\n\n        function updateCartApplepayAmount() {\n            if (!applePayIns) {\n                return;\n            }\n            applePayIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    applePayIns.loader.hide();\n                    applePayIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n            return;\n        }\n        $('body').on('braintree:updateCartTotals', updateCartApplepayAmount);\n\n        $btn.addEventListener('braintree:ApplePayPaymentAuthorized', function (e) {\n            applePayIns.loader.show();\n            var responseData = e.detail.data;\n            var billingAddressData = responseData.billingAddress;\n            var $applePayButton = document.querySelector('.js_braintree_applepay_button');\n\n            var paymentMethodName = JSON.parse($applePayButton.getAttribute('data-braintree-config')).paymentMethodName;\n            var $braintreeCartButtons;\n\n            //custom logic for minicart, the checkout URL's will be fetched from minicart container\n            if(document.querySelectorAll('.braintree-minicart-buttons-wrap').length > 0) {\n                $braintreeCartButtons = document.querySelector('.braintree-minicart-buttons-wrap');\n            } else if(document.querySelectorAll('.braintree-cart-buttons-wrap').length > 0) {\n                $braintreeCartButtons = document.querySelector('.braintree-cart-buttons-wrap');\n            }\n\n            var placeOrderUrl = $braintreeCartButtons.getAttribute('data-checkout-placeorder-url');\n            var checkoutFromCartUrl = $braintreeCartButtons.getAttribute('data-checkout-from-cart-url');\n            var checkoutFormFields = $braintreeCartButtons.getAttribute('data-checkout-form-fields');\n            var applePayCheckoutFormData = createPaymentFormData(checkoutFormFields, {\n                firstName: billingAddressData.firstName,\n                lastName: billingAddressData.lastName,\n                address1: billingAddressData.streetAddress,\n                address2: billingAddressData.extendedAddress || '',\n                city: billingAddressData.locality,\n                postalCode: billingAddressData.postalCode,\n                stateCode: billingAddressData.state,\n                country: billingAddressData.countryCodeAlpha2,\n                email: billingAddressData.email,\n                phone: billingAddressData.phone,\n                paymentMethod: paymentMethodName\n            });\n\n            var csrfToken;\n\n            if(document.querySelectorAll('.braintree-minicart-buttons-wrap').length > 0) {\n                csrfToken = document.querySelector('.braintree-minicart-buttons-wrap  #csrf_token');\n            } else if(document.querySelectorAll('.braintree-cart-buttons-wrap').length > 0) {\n                csrfToken = document.querySelector('.braintree-cart-buttons-wrap  #csrf_token');\n            }\n\n            applePayCheckoutFormData.append(csrfToken.name, csrfToken.value);\n            applePayCheckoutFormData.append('braintreeApplePayNonce', responseData.nonce);\n            applePayCheckoutFormData.append('braintreeApplePayDeviceDataInput', responseData.deviceData);\n            applePayCheckoutFormData.append('braintreeApplePayShippingAddress',\n                JSON.stringify(responseData.shippingAddress) || '{}'\n            );\n\n            $.ajax({\n                type: 'POST',\n                url: checkoutFromCartUrl,\n                data: applePayCheckoutFormData,\n                contentType: false,\n                processData: false,\n                success: function (data) {\n                    if (data.error) {\n                        var errorMessage = '';\n                        if (data.fieldErrors.length) {\n                            data.fieldErrors.forEach(function (error, index) {\n                                var keys = Object.keys(error);\n                                if (keys.length) {\n                                    errorMessage += `${keys[index].replace('dwfrm_billing_', '').replace('_', ' ')} ${data.fieldErrors[index][keys[index]]}. `;\n                                }\n                            });\n                            showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.serverErrors.length) {\n                            data.serverErrors.forEach(function (error) {\n                                errorMessage += `${error}. `;\n                            });\n                            showCartErrorMsg(errorMessage);\n                        }\n\n                        if (data.cartError) {\n                            window.location.href = data.redirectUrl;\n                        }\n                        return;\n                    }\n\n                    window.location.href = placeOrderUrl;\n                },\n                error: function (err) {\n                    if (err && err.redirectUrl) {\n                        window.location.href = err.redirectUrl;\n                    }\n                }\n            });\n        }, false);\n\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nfunction applepayPayment(continueButton) {\n    var $applePayButton = document.querySelector('.js_braintree_applepay_button');\n    var config = JSON.parse($applePayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($applePayButton, 'not valid data-braintree-config');\n    }\n    var applepayButton = $('.js_braintree_applepay_button');\n    applepayButton.on('braintree:deviceNotSupportApplePay', function () {\n        hideApplePayButton();\n    });\n    applepayButton.on('braintree:deviceSupportApplePay', function () {\n        showApplePayButton();\n    });\n    applepayButton.on('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n        makeApplePayButtonDisabled();\n    });\n\n    config.isRequiredBillingContactFields = true;\n    var applePayIns = applePay.init(config, $applePayButton);\n\n    function authorizedApplePayPayment(e) {\n        removeActiveSessionPayment();\n        applePayIns.loader.show();\n        document.querySelector(('#braintreeApplePayNonce')).value = e.detail.data.nonce;\n\n        // Updating Storefront Billing Form data with ApplePay Billing\n        var applePayBillingData = e.detail.data.billingAddress;\n        var storeFrontBillingData = JSON.parse(document.querySelector('.braintree-billing-payment-wrap').getAttribute('data-billing-form-fields-names'));\n        storeFrontBillingData.dwfrm_billing_addressFields_firstName = applePayBillingData.firstName;\n        storeFrontBillingData.dwfrm_billing_addressFields_lastName = applePayBillingData.lastName;\n        storeFrontBillingData.dwfrm_billing_addressFields_address1 = applePayBillingData.streetAddress;\n        storeFrontBillingData.dwfrm_billing_addressFields_address2 = applePayBillingData.extendedAddress || '';\n        storeFrontBillingData.dwfrm_billing_addressFields_city = applePayBillingData.locality;\n        storeFrontBillingData.dwfrm_billing_addressFields_postalCode = applePayBillingData.postalCode;\n        storeFrontBillingData.dwfrm_billing_addressFields_states_stateCode = applePayBillingData.state;\n        storeFrontBillingData.dwfrm_billing_addressFields_country = applePayBillingData.countryCodeAlpha2;\n        storeFrontBillingData.dwfrm_billing_contactInfoFields_email = applePayBillingData.email;\n        storeFrontBillingData.dwfrm_billing_contactInfoFields_phone = applePayBillingData.phone;\n\n        updateBillingFormValues(storeFrontBillingData);\n        continueButton.click();\n    }\n\n    if (!applePayIns) return;\n    $applePayButton.addEventListener('click', function () {\n        if (isValidInputField($emailField) && isValidInputField($phoneField)) {\n            return applePayIns.startPayment();\n        }\n    });\n\n    applepayButton.on('braintree:ApplePayPaymentAuthorized', authorizedApplePayPayment);\n\n    function appleUpdateAmountData() { // eslint-disable-line no-inner-declarations\n        applePayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                applePayIns.loader.hide();\n                applePayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n    $('body').on('checkout:updateCheckoutView', appleUpdateAmountData);\n    appleUpdateAmountData();\n}\n\n/*\n    Remove method was used and change appearance of applepay tab\n**/\nfunction removeSessionNonce() {\n    document.querySelector('#braintreeApplePayNonce').value = '';\n    document.querySelector('#braintreeApplePayDeviceData').value = '';\n}\nwindow.initApplepayButton = initApplepayButton;\nmodule.exports = {\n    initApplepayButton,\n    applepayPayment,\n    removeSessionNonce\n};\n","/* eslint-disable block-scoped-var */\n'use strict';\nvar braintreeUtils = require('braintree_base/braintree/braintreeUtils');\nvar loaderInstance = require('braintree_base/braintree/loaderHelper');\nvar creditcardHelper = require('./creditcard/creditcardHelper');\n\n/* global braintreeUtils braintree $ */\n\nvar bu = braintreeUtils;\nvar er = null;\nvar loader;\nvar params;\nvar formId;\n\nfunction createHostedFields() {\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            kount: true,\n            paypal: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                return;\n            }\n            document.querySelector('#braintreeDeviceData').value = data.deviceData;\n        });\n    }\n    loader.show();\n\n    braintree.hostedFields.create({\n        authorization: bu.clientToken,\n        styles: params.hostedFieldsStyles,\n        fields: params.hostedFieldsConfig\n    }, function (error, hostedFieldsInstance) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            return;\n        }\n        params.hostedFieldsInstance = hostedFieldsInstance;\n        hostedFieldsInstance.on('validityChange', function () {\n            if (params.continueButton && JSON.parse(params.continueButton.getAttribute('data-is-allow-submit-form'))) {\n                params.continueButton.setAttribute('data-is-allow-submit-form', false);\n            }\n        });\n    });\n}\n\nfunction isFormValid() {\n    if (params.data && params.data.amount === 0) {\n        er.show('Order total 0 is not allowed for Credit Card');\n        return false;\n    }\n    var $cardOwnerEl = document.querySelector('#braintreeCardOwner');\n    if ($cardOwnerEl.value.length === 0) {\n        $cardOwnerEl.parentNode.classList.add('braintree-hosted-fields-invalid');\n        er.show(params.messages.validation);\n        return false;\n    }\n    $cardOwnerEl.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    er.hide();\n\n    return true;\n}\n\nfunction clearHostedFields() {\n    params.hostedFieldsInstance.clear('number');\n    params.hostedFieldsInstance.clear('cvv');\n    params.hostedFieldsInstance.clear('expirationDate');\n}\n\nfunction check3dSecureAndSubmit(response, startTokenizeCb) {\n    if (!response.nonce || response.nonce === 'null') {\n        document.querySelector('#braintreeCreditCardNonce').value = 'null';\n        startTokenizeCb({\n            error: true,\n            errorCode: 'nonce_is_null'\n        });\n        return;\n    }\n    if (!params.is3dSecureEnabled) {\n        document.querySelector('#braintreeCreditCardNonce').value = response.nonce;\n        startTokenizeCb({\n            error: false,\n            errorCode: 'ok'\n        });\n        return;\n    }\n\n    loader.show();\n\n    var billingData = require('./helper').getBillingAddressFormValues();\n\n    braintree.threeDSecure.create({\n        authorization: bu.clientToken,\n        version: 2\n    }, function (error, threeDSecure) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            startTokenizeCb({\n                error: true,\n                errorCode: 'bt_3dsecure_create_error',\n                btError: error\n            });\n            return;\n        }\n        bu.threeDSecure = threeDSecure;\n        loader.show();\n        threeDSecure.verifyCard({\n            amount: params.data.amount,\n            nonce: response.nonce,\n            bin: response.details ? response.details.bin : '',\n            email: document.querySelector('#email').value,\n            billingAddress: {\n                givenName: billingData.firstName,\n                surname: billingData.lastName,\n                phoneNumber: billingData.phone,\n                streetAddress: billingData.address1,\n                extendedAddress: billingData.address2,\n                locality: billingData.city,\n                region: billingData.stateCode,\n                postalCode: billingData.postalCode,\n                countryCodeAlpha2: billingData.country\n            },\n            additionalInformation: params.data.shippingAdditionalInfo,\n            onLookupComplete: function (data, next) {\n                next();\n            }\n        }, function (err, data) {\n            loader.hide();\n            if (err) {\n                er.show(err);\n                startTokenizeCb({\n                    error: true,\n                    errorCode: 'bt_3dsecure_verify_error',\n                    btError: err\n                });\n                return;\n            }\n            if (data.liabilityShifted || params.isSkip3dSecureLiabilityResult) {\n                document.querySelector('#braintreeIs3dSecureRequired').value = 'true';\n                document.querySelector('#braintreeCreditCardNonce').value = data.nonce;\n                startTokenizeCb({\n                    error: false,\n                    result: 'ok'\n                });\n                return;\n            }\n            er.show(params.messages.secure3DFailed);\n            startTokenizeCb({\n                error: true,\n                result: 'secure3DFailed'\n            });\n            return;\n        });\n    });\n}\n/**\n * Creates tokenization options for 'tokenize' function.\n * @returns {Object} Object with tokenization options.\n */\nfunction createTokenizationOptions() {\n    var billingData = require('./helper').getBillingAddressFormValues();\n    return {\n        billingAddress: {\n            firstName: billingData.firstName,\n            lastName: billingData.lastName,\n            streetAddress: billingData.address1.split('%20').join(' '),\n            extendedAddress: billingData.address2 ? billingData.address2.split('%20').join(' ') : billingData.address2,\n            locality: billingData.city.includes('%20') ? billingData.city.split('%20').join(' ') : billingData.city,\n            region: billingData.stateCode,\n            postalCode: billingData.postalCode,\n            countryCodeAlpha2: billingData.country.includes('$20') ? billingData.country.split('%20').join(' ') : billingData.country\n        }\n    };\n}\n\nfunction startTokenize(cb, response) {\n    var tokenizationOptions;\n    if (response && response.nonce) {\n        check3dSecureAndSubmit(response, cb);\n        return;\n    }\n    if (!isFormValid()) {\n        cb({\n            error: true,\n            errorCode: 'fields_not_valid'\n        });\n        return;\n    }\n    loader.show();\n\n    tokenizationOptions = createTokenizationOptions();\n\n    params.hostedFieldsInstance.tokenize(tokenizationOptions, function (error, data) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            cb({\n                error: true,\n                errorCode: 'bt_tokenize_error',\n                btError: error\n            });\n            return;\n        }\n        if (data.type === 'CreditCard') {\n            document.querySelector('#braintreeCardType').value = creditcardHelper.convertCardTypeToDwFormat(data.details.cardType);\n            document.querySelector('#braintreeCardMaskNumber').value = '************' + data.details.lastFour;\n            document.querySelector('#braintreeCardExpirationMonth').value = data.details.expirationMonth;\n            document.querySelector('#braintreeCardExpirationYear').value = data.details.expirationYear.substr(2);\n            if ($('#addCreditCardFormAccount') && $('#addCreditCardFormAccount').length > 0) {\n                formId = 'addCreditCardFormAccount';\n          }else {\n            formId = 'dwfrm_billing';\n        }\n          \n            var creditCardFieldsCardNumber = document.querySelector('#'+formId+' ' +'#braintreeCardMaskNumber');\n            if (creditCardFieldsCardNumber) {\n                creditCardFieldsCardNumber.value = '************' + data.details.lastFour;\n            }\n            if($('#braintreeCreditCardMakeDefault') && $('#braintreeCreditCardMakeDefault').length > 0) {\n                if ($('#braintreeCreditCardMakeDefault').is(':checked')) {\n                    $('#braintreeDefaultCard').val(true);\n                } else {\n                    $('#braintreeDefaultCard').val(false);\n                }\n        \t}\n            if (document.querySelector('.form-group.braintree_used_creditcard_account')) {\n                var $cardOwner = document.querySelector('#braintreeCardOwner').getAttribute('data-new-cart-value');\n                document.querySelector('#braintreeCardOwnerPh').textContent = $cardOwner;\n                document.querySelector('#braintreeCardNumberPh').textContent = '************' + data.details.lastFour;\n                document.querySelector('#braintreeCvvPh').textContent = '***';\n                document.querySelector('#braintreeExpirationPh').textContent = data.details.expirationMonth + '/' + data.details.expirationYear.substr(2);\n\n                var selectedCard = document.querySelector('#braintreeSessionCreditAccount');\n                selectedCard.classList.remove('used-creditcard-account-hide');\n                selectedCard.setAttribute('data-number', '************' + data.details.lastFour);\n                selectedCard.setAttribute('data-expiration', data.details.expirationMonth + '/' + data.details.expirationYear.substr(2));\n                selectedCard.setAttribute('data-type', creditcardHelper.convertCardTypeToDwFormat(data.details.cardType));\n                selectedCard.setAttribute('data-owner', $cardOwner);\n                selectedCard.setAttribute('data-nonce', data.nonce);\n            }\n        }\n        check3dSecureAndSubmit(data, cb);\n    });\n}\n\nfunction init(initParams) {\n    params = initParams;\n    bu.clientToken = params.clientToken;\n}\n\nfunction initFields(initParams, $container) {\n    params = initParams;\n    params.$container = $container;\n\n    er = bu.createErrorInstance(document.querySelector('#braintreeCreditCardErrorContainer'), creditcardHelper.creditcardErrorContainer);\n    loader = loaderInstance(document.querySelector('#braintreeCreditCardLoader'));\n    bu.clientToken = params.clientToken;\n    $.extend(bu.messages, params.messages);\n\n    creditcardHelper.cardOwnerEvents();\n\n    function getHostedFieldsStyles() {\n        return {\n            input: {\n                'font-size': '12px',\n                color: '#b7802a'\n            },\n            ':focus': {\n                color: 'blue'\n            },\n            '.valid': {\n                color: 'green'\n            },\n            '.invalid': {\n                color: 'red'\n            }\n        };\n    }\n\n    function getHostedFieldsConfig() {\n        return {\n            number: {\n                selector: '#braintreeCardNumber'\n            },\n            cvv: {\n                selector: '#braintreeCvv'\n            },\n            expirationDate: {\n                selector: '#braintreeExpirationDate'\n            }\n        };\n    }\n\n    if (!params.hostedFieldsStyles) {\n        params.hostedFieldsStyles = getHostedFieldsStyles();\n    }\n\n    params.hostedFieldsConfig = getHostedFieldsConfig();\n\n    $.extend(params.hostedFieldsConfig, params.hostedFieldsAdvancedOptions);\n\n    createHostedFields();\n}\n\nmodule.exports = {\n    init,\n    initFields,\n    startTokenize,\n    isFormValid,\n    getHostedFieldInstance: function () {\n        return params ? params.hostedFieldsInstance : null;\n    },\n    updateData: function (data) {\n        params.data = data;\n    },\n    clearHostedFields\n};\n","'use strict';\n\nmodule.exports = function () {\n    /* global braintreeUtils braintree $ */\n    var helper = require('./helper');\n    var applepayHelper = require('./applepay/applepayHelper');\n    var creditcardHelper = require('./creditcard/creditcardHelper');\n    var creditcardPayment = require('./creditcard/creditcardPayment');\n    var creditCardFields = require('./creditcard/creditcardFields');\n    var creditCard = require('./braintreeCreditCard');\n    var creditCardAccount = require('./creditcard/creditcardAccount');\n    var minicartHelper = require('braintree_base/braintree/paypal/minicartHelper');\n    var paypalAccount = require('braintree_base/braintree/paypal/paypalAccount');\n    var paypalPayment = require('braintree_base/braintree/paypal/paypalPayment');\n    var paypalSavedAccountHandler = require('braintree_base/braintree/paypal/paypalSavedAccountHandler');\n    var local = require('braintree_base/braintree/local/localPayment'); // eslint-disable-line no-unused-vars\n    var orderStage = document.getElementById('checkout-main');\n    var pageState = sessionStorage.getItem('pageState');\n\n    var $form = document.querySelector('#dwfrm_billing'); // eslint-disable-line no-unused-vars\n    var $cartPage = document.querySelectorAll('.cart-page');\n    var $continueButton = document.querySelector('button.submit-payment');\n    var $summaryDetails = document.querySelector('.summary-details .payment-details');\n    var $addCreditCardForm = document.querySelector('.js_braintree_addCreditCardForm');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $creditCardContent = document.querySelector('.js_braintree_creditCardContent');\n    var $creditCardContentModal = document.querySelector('#addCardModal .js_braintree_creditCardContent');\n    var $applepayContent = document.querySelector('.js_braintree_applepayContent');\n    var $braintreePaypalNonce = document.querySelector('#braintreePayPalNonce');\n    var $minicartPopover = document.querySelector('.minicart .popover');\n    var $creditCardList = document.querySelector('#braintreeCreditCardList');\n    var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n\n    var venmoAccount = require('braintree_base/braintree/venmo/venmoAccount');\n    var venmoPayment = require('braintree_base/braintree/venmo/venmoPayment');\n    var $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\n    var googlePayAccount = require('braintree_base/braintree/googlepay/googlepayAccount');\n    var googlepayPayment = require('braintree_base/braintree/googlepay/googlepayPayment');\n    var $googlepayContent = document.querySelector('.js_braintree_googlepayContent');\n    var $googlepayOnCart = document.querySelector('.braintree-cart-google-button');\n    var $addGooglePayAccountForm = document.querySelector('.js_braintree_addGooglePayAccountForm');\n    var $braintreeGooglePayNonce = document.querySelector('#braintreeGooglePayNonce');\n\n    var braintreeSrc = require('braintree_base/braintree/src/srcPayment');\n    var srcAccount = require('braintree_base/braintree/src/srcAccount');\n    var $addSrcAccountForm = document.querySelector('.js_braintree_addSrcAccountForm');\n    var $srcContent = document.querySelector('.js_braintree_srcContent');\n    var $braintreeSrcNonce = document.querySelector('#braintreeSRCNonce');\n    var $srcOnCart = document.querySelector('.braintree-cart-src-button');\n\n    if (window.NodeList && !NodeList.prototype.forEach) {\n        NodeList.prototype.forEach = Array.prototype.forEach;\n    }\n\n    (function () {\n        if (typeof window.CustomEvent === 'function') return false; // If not IE\n\n        function CustomEvent(event, params) {\n            // eslint-disable-next-line no-param-reassign\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n    }());\n\n    if ($cartPage) {\n        helper.initWathcherCartUpdate();\n    }\n\n    if ($addCreditCardForm) {\n        creditCardAccount.initAccountAddCreditCard();\n    }\n\n    if ($addGooglePayAccountForm) {\n        googlePayAccount.initAddGooglePayAccount();\n    }\n    if ($addSrcAccountForm) {\n        srcAccount.initAddSrcAccount();\n    }\n\n    document.addEventListener('DOMContentLoaded', function () {\n        minicartHelper.miniCartButton();\n    });\n\n    if ($minicartPopover) {\n        minicartHelper.observer.observe($minicartPopover, { childList: true });\n    }\n\n    helper.paymentMethodChangeHandle(document.querySelector('.payment-options[role=tablist] a.active[data-toggle=\"tab\"]'));\n\n    if ($cartPage.length) {\n        applepayHelper.initApplepayButton();\n    }\n\n    if ($paypalContent) {\n        paypalPayment.makePaypalPayment($continueButton);\n    }\n\n    if ($creditCardContent) {\n        creditCardFields.initCreditCardFields(); \n        creditcardHelper.initCardListAndSaveFunctionality();\n        $('body').on('checkout:updateCheckoutView', creditCardFields.updateData);\n\n        creditCardFields.updateData();\n\n        if ($creditCardList) {\n            $creditCardList.addEventListener('change', function () {\n                creditcardPayment.doNotAllowSubmitForm();\n            });\n        }\n        $('body').on('braintree:3dSecure_content_shown', function () {\n            helper.continueButtonToggle(false);\n        });\n\n        $('body').on('braintree:3dSecure_content_removed', function () {\n            setTimeout(function () {\n                creditcardPayment.hide3DSecureContainer();\n            }, 2000);\n        });\n\n        $continueButton.addEventListener('click', function (event) {\n            if (!event.isTrusted) {\n                return;\n            }\n\n            helper.removeActiveSessionPayment();\n            creditcardPayment.makeCreditCardPayment(event);\n        });\n    }\n\n    $('#addNewCardModal').on('click', function () {\n        $('.saved-credit-card-list-item').removeAttr('checked');\n        $('.checkout-add-card-modal').addClass('opened');\n        $('#braintreeCreditCardList').val('newcard');\n        var event = new Event('change');\n        var element = document.getElementById(\"braintreeCreditCardList\");\n        element.dispatchEvent(event);\n        $('#checkout-main #addCardModal').modal('show');\n        if ($('.spc-billing-same-as-shipping-modal:checkbox:checked').length > 0) {\n            if (!$('#addCardModal .billing-address').hasClass('d-none')) {\n                $('#addCardModal .billing-address').addClass('d-none');\n            }\n        }\n        $('#addCreditCardForm .invalid-feedback').addClass('d-none');\n        $('#addCreditCardForm .braintree-hosted-fields-iframe-container').removeClass('error-text');\n        $('#addCreditCardForm .braintree-text-input').removeClass('error-text');\n        $('.submit-payment').removeAttr('data-is-allow-submit-form');\n    });\n\n    $('.checkout-add-card-modal .close, .checkout-add-card-modal .cancel-card').on('click', function () {\n        var preCard = $('.selected-icon').parent().attr('data-val');\n        $('#braintreeCreditCardList').val(preCard);\n        var event = new Event('change');\n        var element = document.getElementById(\"braintreeCreditCardList\");\n        element.dispatchEvent(event);\n    });\n\n    $('#addCardModal .billingZipCode').on('keyup', function () {\n        if ($(this).val() &&  $(this).val().length > 1) {\n            var formatedVal = $(this).val().replace(/(\\w)\\s+(\\w)/, '$1-$2');\n            $(this).val(formatedVal);\n        }\n    });\n\n   $('.checkout-add-card-modal').on('click', '.submit-newcard', function(e) {\n        e.preventDefault();\n        var addCreditCardForm = $(this).closest('form');\n        creditCard.startTokenize(function (result) {\n            if (result.error) {\n                e.preventDefault();\n                return;\n            }\n            if ($('.spc-billing-same-as-shipping-modal:checkbox:checked').length === 0) {\n                updateBillingForm();\n            }\n            $.spinner( $('.checkout-add-card-modal')).start();\n            $.ajax({\n                url: addCreditCardForm.attr('action'),\n                type: 'post',\n                dataType: 'json',\n                data: addCreditCardForm.serialize(),\n                success: function (data) {\n                    $.spinner( $('.checkout-add-card-modal')).stop();\n                    if (!data.success) {\n                        document.querySelector('#braintreeCreditCardErrorContainer').textContent = data.error;\n                    } else {\n                        location.reload();\n                    }\n                },\n                error: function (err) {\n                    if (err.responseJSON.redirectUrl) {\n                        window.location.href = err.responseJSON.redirectUrl;\n                    }\n                    $.spinner( $('.checkout-add-card-modal')).stop();\n                }\n            });\n        });\n   });\n\n   function updateBillingForm() {\n       $('.billing-address-block .billing-address').find('.billingFirstName').val($('#addCardModal .billingFirstName').val());\n       $('.billing-address-block .billing-address').find('.billingLastName').val($('#addCardModal .billingLastName').val());\n       $('.billing-address-block .billing-address').find('.billingZipCode').val($('#addCardModal .billingZipCode').val());\n       $('.billing-address-block .billing-address').find('.billingState').val($('#addCardModal .billingState').val());\n       $('.billing-address-block .billing-address').find('.billingAddressCity').val($('#addCardModal .billingAddressCity').val());\n       $('.billing-address-block .billing-address').find('.billingAddressOne').val($('#addCardModal .billingAddressOne').val());\n       $('.billing-address-block .billing-address').find('.phone').val($('#addCardModal .phone').val());\n   }\n\n    if ($applepayContent) {\n        applepayHelper.applepayPayment($continueButton);\n    }\n\n    if ($venmoContent) {\n        venmoPayment.makeVenmoPayment($continueButton);\n    }\n\n    if ($googlepayContent || $googlepayOnCart) {\n        googlepayPayment.makeGooglepayPayment($continueButton);\n    }\n\n    if ($srcContent || $srcOnCart) {\n        braintreeSrc.initSrcButton($continueButton);\n    }\n\n    $('.payment-options[role=tablist] a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n        helper.paymentMethodChangeHandle(e.target);\n        const cardList = document.getElementById('braintreeCreditCardList');\n        const paypalList = document.getElementById('braintreePaypalAccountsList');\n        var changeEvent;\n\n        if (e.target.hash === '#creditcard-content' && cardList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                cardList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            cardList.dispatchEvent(changeEvent);\n        } else if (e.target.hash === '#paypal-content' && paypalList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                paypalList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            paypalList.dispatchEvent(changeEvent);\n        }\n    });\n\n    $('#paymentAccordion').on('click', '.braintreeradios', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        $('.list-unstyled.card-list').find('.selected-icon').remove();\n        $(this).parent().find('.braintreeradios').removeClass('selected');\n        $(this).addClass('selected');\n        $(this).find('.saved-card-title').append('<span class=\"selected-icon float-right\"><i class=\"fal fa-check-circle\"></i></span>');\n        $('#paymentAccordion #braintreeCreditCardList').val($(this).attr('data-val'));\n        $('#paymentAccordion .saved-credit-card-list-item').prop('checked', false);\n        $(this).parent().find('.saved-credit-card-list-item').prop('checked', true);\n        var curVal = $(this).attr('data-val');\n        var event = new Event('change');\n        var element = document.getElementById(\"braintreeCreditCardList\");\n        element.dispatchEvent(event);\n        $('#braintreeCreditCardList').find('#'+curVal).attr('selected','selected');\n    });\n\n\n    if ($summaryDetails) {\n        $summaryDetails.classList.add('braintree-payment-details');\n        //$summaryDetails.classList.remove('payment-details');\n    }\n\n   // $('body').on('checkout:updateCheckoutView', helper.updateCheckoutView);\n\n    if ((pageState && pageState === 'cart') &&\n        orderStage && orderStage.getAttribute('data-checkout-stage') === 'placeOrder') {\n        helper.updatePaymentMethodTab();\n        sessionStorage.removeItem('pageState');\n    }\n\n    if ($braintreePaypalNonce && $braintreePaypalNonce.value !== '') {\n        document.querySelector('.paypal-tab').click();\n    }\n\n    if ($braintreeGooglePayNonce && $braintreeGooglePayNonce.value !== '') {\n        document.querySelector('.googlepay-tab').click();\n    }\n\n    if ($braintreeSrcNonce && $braintreeSrcNonce.value !== '') {\n        document.querySelector('.src-tab').click();\n    }\n\n    if ($staticPaypalButton) {\n        paypalSavedAccountHandler.paypalStaticPdpButtonHandler();\n        $staticPaypalButton.addEventListener('click', paypalSavedAccountHandler.staticImageHandler);\n    }\n\n    // My account page\n    if (document.querySelector('.add-paypal-account')) {\n        paypalAccount.initPayPalEvents();\n    }\n    if (document.querySelector('.add-venmo-account')) {\n        venmoAccount.initVenmoEvents();\n    }\n    if (document.querySelector('.creditCard-accounts')) {\n        helper.initCardEvents();\n    }\n\n    if (document.querySelector('.paypal-accounts')) {\n        paypalAccount.initPaypalButtonsEvents();\n    }\n    if (document.querySelector('.venmo-accounts')) {\n        venmoAccount.initVenmoButtonsEvents();\n    }\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\nvar creditCardFields = require('./creditcardFields');\n\nfunction submitCreditCardForm() {\n    $('.js_braintree_addCreditCardForm').submit(function (e) {\n        var addCreditCardForm = $(this);\n        creditCard.startTokenize(function (result) {\n            if (result.error) {\n                e.preventDefault();\n                return;\n            }\n            addCreditCardForm.spinner().start();\n            $.ajax({\n                url: addCreditCardForm.attr('action'),\n                type: 'post',\n                dataType: 'json',\n                data: addCreditCardForm.serialize(),\n                success: function (data) {\n                    addCreditCardForm.spinner().stop();\n                    if (!data.success) {\n                        document.querySelector('#braintreeCreditCardErrorContainer').textContent = data.error;\n                    } else {\n                        location.href = data.redirectUrl;\n                    }\n                },\n                error: function (err) {\n                    if (err.responseJSON.redirectUrl) {\n                        window.location.href = err.responseJSON.redirectUrl;\n                    }\n                    addCreditCardForm.spinner().stop();\n                }\n            });\n        });\n        return false;\n    });\n}\n\nfunction initAccountAddCreditCard() {\n    creditCardFields.initCreditCardFields();\n    submitCreditCardForm();\n}\n\nmodule.exports = {\n    initAccountAddCreditCard\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\n\nvar $continueButton = document.querySelector('button.submit-payment');\n\n/**\n * Gets required Additional shipping info for 3ds\n *\n * @param {Object} orderAddress - User's shipping address\n * @returns {Object} an object with required fields\n */\n\nfunction getShippingAdditionalInfo(orderAddress) {\n    return {\n        workPhoneNumber: orderAddress.phone,\n        shippingGivenName: orderAddress.recipientName.split(' ').slice(0, -1).join(' '),\n        shippingSurname: orderAddress.recipientName.split(' ').slice(-1).join(' '),\n        shippingPhone: orderAddress.phone,\n        shippingAddress: {\n            streetAddress: orderAddress.line1,\n            extendedAddress: orderAddress.line2,\n            locality: orderAddress.city,\n            region: orderAddress.state,\n            postalCode: orderAddress.postalCode,\n            countryCodeAlpha2: orderAddress.countryCode\n        }\n    };\n}\n\nfunction updateData() {\n    $.ajax({\n        url: document.querySelector('.js_braintree_getOrderInfoUrl').value,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            data.shippingAdditionalInfo = data.shippingAddress ? getShippingAdditionalInfo(data.shippingAddress) : null;\n            creditCard.updateData(data);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction initCreditCardFields() {\n    document.querySelectorAll('.js_braintree_creditCardFields').forEach(function (el) {\n        var $container = el;\n        if (JSON.parse($container.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($container.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, '.js_braintree_creditCardFields has not valid data-braintree-config');\n            return;\n        }\n        config.continueButton = $continueButton;\n        creditCard.initFields(config, $container);\n        $container.setAttribute('data-is-inited', true);\n    });\n}\n\nmodule.exports = {\n    initCreditCardFields,\n    getShippingAdditionalInfo,\n    updateData\n};\n","'use strict';\nvar braintreeUtils = require('braintree_base/braintree/braintreeUtils');\nvar bu = braintreeUtils;\nvar helper = require('../helper');\n\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\nvar $saveCreditCard = document.querySelector('#braintreeSaveCreditCard');\nvar $cardOwner = document.querySelector('#braintreeCardOwner');\n\nfunction creditcardErrorContainer(errorIns, errorData) {\n    var error = errorData;\n    if (error.details && error.details.invalidFieldKeys) {\n        for (var i = 0; i < error.details.invalidFieldKeys.length; i++) {\n            var key = error.details.invalidFieldKeys[i];\n            if (key === 'number') {\n                document.querySelector('#braintreeCardNumber').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'cvv') {\n                document.querySelector('#braintreeCvv').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'expirationDate') {\n                document.querySelector('#braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n            }\n        }\n    }\n    if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n        document.querySelector('#braintreeCardNumber, #braintreeCvv, #braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction convertCardTypeToDwFormat(braintreeType) {\n    switch (braintreeType) {\n        case 'American Express':\n            return 'Amex';\n        case 'MasterCard':\n            return 'Master';\n        default:\n            return braintreeType;\n    }\n}\n\nfunction cardOwnerUpdateClasses() {\n    var value = $cardOwner.value;\n    if (value.length <= parseInt($cardOwner.getAttribute('maxlength'), 10) && value.length !== 0) {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-valid');\n    } else {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-valid');\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction setCardFields(selectedCard, cacheCardFields) {\n    cacheCardFields.cardNumbeberPh.innerHTML = selectedCard['data-number'].value;\n    cacheCardFields.cardCvvPh.innerHTML = '***';\n    cacheCardFields.cardExpirationPh.innerHTML = selectedCard['data-expiration'].value;\n    cacheCardFields.cardOwnerPh.innerHTML = selectedCard['data-owner'].value;\n    $cardOwner.value = selectedCard['data-owner'].value;\n    document.querySelector('#braintreeCardType').value = selectedCard['data-type'].value;\n    document.querySelector('#braintreeCardMaskNumber').value = selectedCard['data-number'].value;\n}\n\nfunction showCardElements(cardFields) {\n    cardFields.forEach(function (el) {\n        el.style.display = '';\n    });\n}\n\nfunction hideCardElements(cardFields) {\n    cardFields.forEach(function (el) {\n        el.style.display = 'none';\n    });\n}\n\nfunction getCardFieldsPH() {\n    return [\n        document.querySelector('#braintreeCardOwnerPh'),\n        document.querySelector('#braintreeCardNumberPh'),\n        document.querySelector('#braintreeExpirationPh'),\n        document.querySelector('#braintreeCvvPh')\n    ];\n}\n\nfunction getCardFields() {\n    return [\n        document.querySelector('#braintreeCardOwner'),\n        document.querySelector('#braintreeExpirationDate'),\n        document.querySelector('#braintreeCardNumber'),\n        document.querySelector('#braintreeCvv')\n    ];\n}\n\nfunction cardListChange() {\n    var $cardOwnerPh = document.querySelector('#braintreeCardOwnerPh');\n    var $cardNumbeber = document.querySelector('#braintreeCardNumber');\n    var $cardNumbeberPh = document.querySelector('#braintreeCardNumberPh');\n    var $cardCvv = document.querySelector('#braintreeCvv');\n    var $cardCvvPh = document.querySelector('#braintreeCvvPh');\n    var $cardExpiration = document.querySelector('#braintreeExpirationDate');\n    var $cardExpirationPh = document.querySelector('#braintreeExpirationPh');\n    var $braintreeSaveCardContainer = document.querySelector('#braintreeSaveCardContainer');\n    var $creditCardFieldsContainer = document.querySelector('#braintreeCreditCardFieldsContainer');\n    var $braintree3DSecureContainer = document.querySelector('#braintree3DSecureContainer');\n    var changeCardOwnerInput;\n    var selectedCard;\n    var isSaveCard;\n    var cacheCardFields = {\n        cardNumbeberPh: $cardNumbeberPh,\n        cardCvvPh: $cardCvvPh,\n        cardExpirationPh: $cardExpirationPh,\n        cardOwnerPh: $cardOwnerPh\n    };\n    var nonce;\n    if ($cardOwner) {\n        if (typeof (Event) === 'function') {\n            changeCardOwnerInput = new Event('changeCardOwnerInput');\n            $cardOwner.addEventListener('changeCardOwnerInput', function () {\n                'change';\n            }, false);\n        } else {\n            changeCardOwnerInput = document.createEvent('Event');\n            changeCardOwnerInput.initEvent('changeCardOwnerInput', true, true);\n        }\n    }\n\n    if ($creditCardFieldsContainer) {\n        $creditCardFieldsContainer.style.display = '';\n    }\n    if ($braintree3DSecureContainer) {\n        $braintree3DSecureContainer.style.display = 'none';\n    }\n\n    document.querySelector('#braintreeCreditCardErrorContainer').textContent = '';\n\n    if ($creditCardList.value === 'newcard') {\n        hideCardElements(getCardFieldsPH());\n        $cardOwner.value = $cardOwner.getAttribute('data-new-cart-value');\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardNumbeber.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardCvv.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardExpiration.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardOwner.disabled = false;\n        showCardElements(getCardFields());\n        cardOwnerUpdateClasses();\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'block';\n            $saveCreditCard.checked = true;\n        }\n\n        document.querySelector('#braintreeCreditCardNonce').value = '';\n        document.querySelector('#braintreeCardPaymentMethod').value = $creditCardList[0].getAttribute('data-payment-method');\n    } else if ($creditCardList.selectedOptions[0].id === 'braintreeSessionCreditAccount') {\n        selectedCard = bu.getSelectedData($creditCardList);\n        nonce = selectedCard['data-nonce'].value;\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'block';\n            isSaveCard = JSON.parse(selectedCard['data-save-card'].value);\n            $braintreeSaveCardContainer.checked = isSaveCard;\n            $saveCreditCard.checked = isSaveCard;\n        }\n\n        if (nonce) {\n            document.querySelector('#braintreeCreditCardNonce').value = nonce;\n        }\n\n        setCardFields(selectedCard, cacheCardFields);\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.style.display = 'none';\n        showCardElements(getCardFieldsPH());\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    } else {\n        // case for saved card\n        selectedCard = bu.getSelectedData($creditCardList);\n        setCardFields(selectedCard, cacheCardFields);\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        showCardElements(getCardFieldsPH());\n        hideCardElements(getCardFields());\n        $cardOwner.disabled = true;\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = 'none';\n            $saveCreditCard.checked = false;\n        }\n\n        document.querySelector('#braintreeCreditCardNonce').value = '';\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    }\n}\n\nfunction initCardListAndSaveFunctionality() {\n    if ($creditCardList) {\n        $creditCardList.addEventListener('change', function () {\n            cardListChange();\n        });\n    }\n    cardListChange();\n}\n\nfunction cardOwnerEvents() {\n    $cardOwner.addEventListener('focus', function () {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('blur', function () {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('keyup', function () {\n        document.querySelector('#braintreeCardOwner').setAttribute('data-new-cart-value', $cardOwner.value);\n        cardOwnerUpdateClasses();\n    });\n    $cardOwner.addEventListener('change', function () {\n        cardOwnerUpdateClasses();\n    });\n}\n\n/*\n    Update Session account\n**/\nfunction updateSessionAccount() {\n    var sessionOption = helper.getSessionAccountOption({\n        querySelector: '#braintreeCreditCardList',\n        id: 'braintreeSessionCreditAccount'\n    });\n    if (!sessionOption) { return; }\n\n    sessionOption.selected = false;\n    sessionOption.classList.add('used-creditcard-account-hide');\n    sessionOption.classList.remove('used-creditcard-account');\n    sessionOption.text = '';\n    sessionOption.setAttribute('data-session-account', false);\n    sessionOption.setAttribute('data-owner', false);\n    sessionOption.setAttribute('data-expiration', false);\n    sessionOption.setAttribute('data-number', false);\n    sessionOption.setAttribute('data-nonce', false);\n    sessionOption.setAttribute('data-type', false);\n    sessionOption.setAttribute('data-save-card', false);\n}\n\n/*\n    Check if creditcard method was used and change appearance of creditcard tab\n**/\nfunction removeSessionNonce() {\n    updateSessionAccount();\n    document.querySelector('#braintreeCreditCardNonce').value = '';\n    document.querySelector('#cardNumber').value = '';\n    document.querySelector('#braintreeCardMaskNumber').value = '';\n    document.querySelector('#braintreeCardExpirationYear').value = '';\n    document.querySelector('#braintreeCardExpirationMonth').value = '';\n\n    var defaultOption = helper.getOptionByDataDefault('#braintreeCreditCardList');\n    if (defaultOption) {\n        defaultOption.selected = true;\n        var selectedCard = bu.getSelectedData($creditCardList);\n        var cardFieldsPH = {\n            cardNumbeberPh: document.querySelector('#braintreeCardNumberPh'),\n            cardCvvPh: document.querySelector('#braintreeCvvPh'),\n            cardExpirationPh: document.querySelector('#braintreeExpirationPh'),\n            cardOwnerPh: document.querySelector('#braintreeCardOwnerPh')\n        };\n        setCardFields(selectedCard, cardFieldsPH);\n        $cardOwner.disabled = true;\n        $saveCreditCard.checked = false;\n        document.querySelector('#braintreeSaveCardContainer').style.display = 'none';\n    } else {\n        hideCardElements(getCardFieldsPH());\n        showCardElements(getCardFields());\n        var ccAccount = document.querySelector('.form-group.braintree_used_creditcard_account');\n        ccAccount.classList.remove('used-creditcard-account');\n        ccAccount.classList.add('used-creditcard-account-hide');\n    }\n\n    [].forEach.call(document.querySelector('#braintreeCreditCardList'), function (el) {\n        if (el.style.display === 'none') el.style.display = 'block';\n    });\n}\n\nmodule.exports = {\n    creditcardErrorContainer,\n    convertCardTypeToDwFormat,\n    cardOwnerEvents,\n    initCardListAndSaveFunctionality,\n    removeSessionNonce,\n    showCardElements,\n    hideCardElements,\n    setCardFields,\n    getCardFieldsPH,\n    getCardFields,\n    updateSessionAccount\n};\n","'use strict';\n\nvar braintreeUtils = require('braintree_base/braintree/braintreeUtils');\nvar creditCard = require('../braintreeCreditCard');\nvar helper = require('../helper');\nvar creditcardHelper = require('../creditcard/creditcardHelper');\n\nvar $continueButton = document.querySelector('button.submit-payment');\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\n\nfunction doNotAllowSubmitForm() {\n    helper.continueButtonToggle(false);\n    $continueButton.setAttribute('data-is-allow-submit-form', false);\n}\n\nfunction hide3DSecureContainer() {\n    document.querySelector('#braintreeCreditCardFieldsContainer').style.display = '';\n    document.querySelector('#braintreeSaveCardContainer').style.display = '';\n    document.querySelector('#braintree3DSecureContainer').style.display = 'none';\n    doNotAllowSubmitForm();\n}\n\nfunction updateAccountsList() {\n    var sessionAccount = document.querySelector('#braintreeSessionCreditAccount');\n    var defaultOption = helper.getOptionByDataDefault('#braintreeCreditCardList');\n    if ($creditCardList && $creditCardList.value !== 'newcard') {\n        if (!sessionAccount.selected) {\n            creditcardHelper.updateSessionAccount();\n        }\n        return;\n    }\n\n    var creditCardAccount = document.querySelector('.form-group.braintree_used_creditcard_account');\n    var newCCAccount = document.getElementById('newCardAccount');\n    if (!creditCardAccount.classList.contains('used-creditcard-account')) {\n        creditCardAccount.classList.remove('used-creditcard-account-hide');\n        creditCardAccount.classList.add('used-creditcard-account');\n        sessionAccount.classList.remove('used-creditcard-account-hide');\n        sessionAccount.classList.add('used-creditcard-account');\n    } else {\n        sessionAccount.classList.remove('used-creditcard-account-hide');\n        sessionAccount.classList.add('used-creditcard-account');\n    }\n\n    if (newCCAccount.selected) {\n        var isSavedCard = document.querySelector('#braintreeSaveCreditCard') ? document.querySelector('#braintreeSaveCreditCard').checked : false;\n        sessionAccount.setAttribute('data-session-account', true);\n        sessionAccount.setAttribute('data-save-card', isSavedCard);\n        sessionAccount.textContent = sessionAccount.getAttribute('data-type') + ' ' +\n            sessionAccount.getAttribute('data-number') + ' ' +\n            sessionAccount.getAttribute('data-expiration') + ' ' +\n            document.querySelector('#braintreeCardOwner').getAttribute('data-new-cart-value');\n        sessionAccount.setAttribute('data-nonce', document.querySelector('#braintreeCreditCardNonce').value);\n\n        newCCAccount.removeAttribute('selected');\n        sessionAccount.selected = true;\n    }\n\n    if (!defaultOption) {\n        var selectedCard = braintreeUtils.getSelectedData($creditCardList);\n        var cardFieldsPH = {\n            cardOwnerPh: document.querySelector('#braintreeCardOwnerPh'),\n            cardNumbeberPh: document.querySelector('#braintreeCardNumberPh'),\n            cardCvvPh: document.querySelector('#braintreeCvvPh'),\n            cardExpirationPh: document.querySelector('#braintreeExpirationPh')\n        };\n        creditcardHelper.setCardFields(selectedCard, cardFieldsPH);\n    }\n\n    creditCard.clearHostedFields();\n    creditcardHelper.showCardElements(creditcardHelper.getCardFieldsPH());\n    creditcardHelper.hideCardElements(creditcardHelper.getCardFields());\n    helper.continueButtonToggle(false);\n}\n\nfunction allowSubmitForm(event) {\n    $continueButton.setAttribute('data-is-allow-submit-form', true);\n    updateAccountsList();\n    event.target.click();\n}\n\nfunction isActiveCreditCardTab() {\n    return document\n        .querySelector('.payment-options[role=tablist] a[data-toggle=\"tab\"][href=\"#creditcard-content\"]')\n        .classList\n        .contains('active');\n}\n\nfunction makeCreditCardPayment(event) {\n    if (!isActiveCreditCardTab()) {\n        return;\n    }\n\n    if (JSON.parse($continueButton.getAttribute('data-is-allow-submit-form')) && creditCard.isFormValid()) {\n        return;\n    }\n\n    if ($creditCardList) {\n        var is3dSecureEnabled = JSON.parse(document.querySelector('.js_braintree_creditCardFields').getAttribute('data-braintree-config')).is3dSecureEnabled;\n        if ($creditCardList && $creditCardList.value !== 'newcard') {\n            if (!is3dSecureEnabled) {\n                allowSubmitForm(event);\n                return;\n            }\n\n            if ($creditCardList.value === 'sessioncard') {\n                allowSubmitForm(event);\n                return;\n            }\n\n            var selectedCard = braintreeUtils.getSelectedData($creditCardList);\n            var getNonceUrl = $creditCardList.getAttribute('data-get-payment-nonce-url');\n            var cardUUID = selectedCard['data-id'].value;\n            $.get(`${getNonceUrl}?id=${cardUUID}`, function (response) {\n                creditCard.startTokenize(function (result) {\n                    if (!result.error) {\n                        allowSubmitForm(event);\n                    }\n                }, response);\n            });\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n        }\n    }\n    creditCard.startTokenize(function (result) {\n        if (!result.error) allowSubmitForm(event);\n    });\n    event.preventDefault();\n    event.stopPropagation();\n}\n\nmodule.exports = {\n    doNotAllowSubmitForm,\n    hide3DSecureContainer,\n    makeCreditCardPayment\n};\n","'use strict';\nvar $continueButton = document.querySelector('button.submit-payment');\n\nfunction initWathcherCartUpdate() {\n    var $grantTotal = document.querySelector('.grand-total');\n    if ($grantTotal) {\n        var currentGrantTotalValue = $grantTotal.textContent;\n        $('body').on('cart:update', function () {\n            var newGrantTotalValue = $grantTotal.textContent;\n            if (newGrantTotalValue !== '' && newGrantTotalValue !== currentGrantTotalValue) {\n                currentGrantTotalValue = newGrantTotalValue;\n                var updateCartTotals = document.createEvent('Event');\n                updateCartTotals.initEvent('updateCartTotals', true, true);\n                document.querySelector('body').addEventListener('updateCartTotals', function () {\n                    'braintree:updateCartTotals';\n                }, false);\n                document.querySelector('body').dispatchEvent(updateCartTotals);\n            }\n        });\n    }\n}\n\nfunction continueButtonToggle(flag) {\n    var stage = window.location.hash.substring(1);\n    if (stage === 'placeOrder' || stage === 'shipping' || stage === null || stage === '') {\n        return;\n    }\n    if (flag) {\n        $continueButton.style.display = 'none';\n    } else {\n        $continueButton.style.display = '';\n    }\n}\n\n\nfunction paymentMethodChangeHandle(currentTab) {\n    document.querySelectorAll('.payment-options[role=tablist] a[data-toggle=\"tab\"]').forEach(function (el) {\n        var $tabContent = document.querySelector(el.getAttribute('href'));\n\n        if (el === currentTab) {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.removeAttribute('disabled', 'disabled');\n            });\n            $tabContent.querySelectorAll('select.no-disable').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n            continueButtonToggle(JSON.parse($tabContent.getAttribute('data-paypal-is-hide-continue-button')));\n        } else {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n        }\n    });\n}\n\nfunction getPaymentMethodToLowerCase(paymentMethodName) {\n    var paymentMethod = paymentMethodName.split('_');\n    if (paymentMethod.length === 1) {\n        return paymentMethodName;\n    }\n    paymentMethod.forEach(function (element, index) {\n        paymentMethod[index] = element.charAt(0) + element.slice(1).toLocaleLowerCase();\n    });\n    return paymentMethod[1] ?\n        paymentMethod[0] + ' ' + paymentMethod[1] :\n        paymentMethod[0];\n}\n\nfunction updateCheckoutView(e, data) {\n    var $paymentSummary = document.querySelector('.summary-details .braintree-payment-details');\n    var htmlToAppend = '';\n    var order = data.order;\n\n    if (order.billing.payment && order.billing.payment.selectedPaymentInstruments\n        && order.billing.payment.selectedPaymentInstruments.length > 0) {\n        htmlToAppend += '<div>' + getPaymentMethodToLowerCase(order.billing.payment.selectedPaymentInstruments[0].paymentMethod) + '</div>';\n        if (order.billing.payment.selectedPaymentInstruments[0].maskedCreditCardNumber) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].maskedCreditCardNumber + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'PayPal') {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].braintreePaypalEmail + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'Venmo') {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].braintreeVenmoUserId + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].type) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].type + '</div>';\n        }\n        htmlToAppend += '<div>' + order.priceTotal.charAt(0) + order.billing.payment.selectedPaymentInstruments[0].amount + '</div>';\n    }\n\n    if ($paymentSummary) {\n        $paymentSummary.innerHTML = htmlToAppend;\n    }\n}\n\nfunction isValidInputField(field) {\n    if (!field.checkValidity()) {\n        if (!field.classList.contains('is-invalid')) {\n            field.classList.add('is-invalid');\n        }\n        return false;\n    }\n    if (field.checkValidity() && field.classList.contains('is-invalid')) {\n        field.classList.remove('is-invalid');\n    }\n    return true;\n}\n/*\n    Adding *active* line to the tab-content class in a case if it isn't already active\n    Use case: customer checkout from cart (page) and\n    (under the place Order page) hit the 'edit' button\n**/\nfunction updatePaymentMethodTab() {\n    let paymentMethodName = document.querySelectorAll('[data-braintree-payment-method]')[0].dataset.braintreePaymentMethod;\n    let content = document.querySelector(`.js_braintree_${paymentMethodName.toLowerCase()}Content`).classList.contains('active');\n    if (!content) {\n        document.querySelectorAll(`[data-method-id=${paymentMethodName}]`)[0].children[0].click();\n    }\n}\n\n/**\n * Gets Billing Address Form Values\n *\n * @returns {Object} with Billing Address\n */\nfunction getBillingAddressFormValues() {\n\t var $curDiv = $('#dwfrm_billing');\n     if ($('#addCreditCardFormAccount') && $('#addCreditCardFormAccount').length > 0) {\n           $curDiv = $('#addCreditCardFormAccount');\n     }\n    return $curDiv.serialize().split('&')\n        .map(function (el) {\n            return el.split('=');\n        })\n        .reduce(function (accumulator, item) {\n            var elem = item[0].lastIndexOf('_');\n            if (elem < 0) {\n                accumulator[item[0]] = item[1];\n            } else {\n                elem = item[0].substring(elem + 1);\n                accumulator[elem] = item[1];\n            }\n            return accumulator;\n        }, {});\n}\n\n/**\n * Gets Nonce depending on payment method name\n *\n * @param {string} paymentMethodName - payment method name\n * @returns {boolean} nonce exist\n */\n\nfunction isNonceExist(paymentMethodName) {\n    var $nonce = document.querySelector(`#braintree${paymentMethodName}Nonce`);\n    if (!$nonce) return false;\n\n    var nonceValue = $nonce.value;\n    var $tab = document.querySelector(`.${paymentMethodName.toLowerCase()}-tab`);\n    var isActiveTab;\n    if ($tab) {\n        isActiveTab = $tab.classList.contains('active');\n    }\n\n    return !isActiveTab && nonceValue;\n}\n\nvar loaderInstance = require('braintree_base/braintree/loaderHelper');\nvar accountsLoader;\n\nfunction removeBtPayment(e) {\n    let target = e.target;\n    var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n    accountsLoader = loaderInstance($loaderContainter);\n    accountsLoader.show();\n\n    $.get(target.getAttribute('data-url') + '?UUID=' + target.getAttribute('data-id'))\n        .then((data => {\n            $('#uuid-' + data.UUID).remove();\n            if (data.newDefaultAccount) {\n                document.querySelector('#uuid-' + data.newDefaultAccount + ' span').style.fontWeight = 'bold';\n                document.querySelector('#uuid-' + data.newDefaultAccount + ' button.braintree-make-default-card').style.display = 'none';\n            }\n            accountsLoader.hide();\n        }))\n        .fail(() => {\n            location.reload();\n            accountsLoader.hide();\n        });\n}\n\n/**\n * Create formData from fields data\n *\n * @param {Object} paymentFields - fields data values\n * @param {Object} fieldsData - fields data values\n * @returns {Object} cart billing form data\n */\nfunction createPaymentFormData(paymentFields, fieldsData) {\n    var paymentFieldsParsed = JSON.parse(paymentFields);\n\n    return Object.entries(paymentFieldsParsed).reduce(function (formData, entry) {\n        const [key, field] = entry;\n        if (typeof field === 'object') {\n            formData.append(field.name, fieldsData && fieldsData[key] !== null ? fieldsData[key] : field.value);\n        }\n        return formData;\n    }, new FormData());\n}\n\nfunction setDefaultProperty(params) {\n    return $.get(params.url + '?UUID=' + params.id + '&pmID=' + params.paymentMethodID)\n            .then((data) => {\n                document.querySelector('#uuid-' + data.newDefaultProperty + ' span').style.fontWeight = 'bold';\n                document.querySelector('.braintree-make-default-card.uuid-' + data.newDefaultProperty).style.display = 'none';\n                document.querySelector('#uuid-' + data.toRemoveDefaultProperty + ' span').style.fontWeight = 'normal';\n                document.querySelector('.braintree-make-default-card.uuid-' + data.toRemoveDefaultProperty).style.display = 'inline';\n                params.loader.hide();\n            })\n            .fail(() => {\n                params.loader.hide();\n            });\n}\n\nfunction initCardEvents() {\n    if (document.querySelector('.braintreeAddNewCard')) {\n        document.querySelector('.braintreeAddNewCard').addEventListener('click', function () {\n            document.querySelector('.braintreeAddNewCard').style.display = 'none';\n            document.querySelector('.braintreeAddNewCardBlock').style.display = 'block';\n        });\n    }\n    document.querySelector('.creditCard-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var paymentMethodID = 'CARD';\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n            setDefaultProperty({\n                url: url,\n                id: id,\n                paymentMethodID: paymentMethodID,\n                loader: loader\n            });\n        }\n    };\n}\n\n/**\n * Checks authenticated customer, account list for default Payment Method\n *\n * @param {string} selector - querySelector\n * @returns {Object} default data attribute or null\n */\nfunction getOptionByDataDefault(selector) {\n    if (!document.querySelector(selector)) { return null; }\n\n    return Array.apply(null, document.querySelector(selector).options).find(function (el) {\n        return el.getAttribute('data-default') ? JSON.parse(el.getAttribute('data-default')) : null;\n    });\n}\n\n/**\n * Checks authenticated customer, account list for session Account\n *\n * @param {Object} params - querySelector + el.id\n * @returns {Object} session account object\n */\nfunction getSessionAccountOption(params) {\n    return Array.apply(null, document.querySelector(params.querySelector).options).find(function (el) {\n        return el.id === params.id && JSON.parse(el.getAttribute('data-session-account'));\n    });\n}\n\n/**\n * Remove Session Active Payment Method\n ** Use helpers to add more Payment Methods\n *\n * @returns {function}function call\n */\nfunction removeActiveSessionPayment() {\n    const activePaymentMethods = [];\n    document.querySelectorAll('.payment-options[role=tablist] li').forEach(function (el) {\n        if (el.dataset.methodId === 'CREDIT_CARD') {\n            el.dataset.methodId = 'CreditCard';\n        }\n        activePaymentMethods.push(el.dataset.methodId);\n    });\n    var helpers = {\n        PayPal: require('braintree_base/braintree/paypal/paypalHelper'),\n        Venmo: require('braintree_base/braintree/venmo/venmoHelper'),\n        GooglePay: require('braintree_base/braintree/googlepay/googlepayHelper'),\n        CreditCard: require('braintree_base/braintree/creditcard/creditcardHelper'),\n        SRC: require('braintree_base/braintree/src/srcHelper'),\n        ApplePay: require('braintree_base/braintree/applepay/applepayHelper')\n\n    };\n    var activePM = activePaymentMethods.find(function (el) {\n        return isNonceExist(el);\n    });\n    if (activePM) {\n        return helpers[activePM].removeSessionNonce();\n    }\n}\n\nfunction showCartErrorMsg(message) {\n    $('.checkout-btn').addClass('disabled');\n    $('.cart-error').append(\n        `<div class=\"alert alert-danger alert-dismissible valid-cart-error fade show cartError\" role=\"alert\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            ${message}\n        </div>`\n    );\n    window.scrollTo(0, 0);\n}\n\n/**\n * Update Checkout Billing form values\n *\n * @param {Object} billingData - fields data values\n */\nfunction updateBillingFormValues(billingData) {\n    var $billingFormFields = document.querySelectorAll('.billing-address select, .billing-address input, .contact-info-block input');\n\n    $billingFormFields.forEach(function (el) {\n        if (billingData[el.name]) {\n            el.value = billingData[el.name];\n        }\n    });\n}\n\nmodule.exports = {\n    initWathcherCartUpdate,\n    paymentMethodChangeHandle,\n    continueButtonToggle,\n    updateCheckoutView,\n    isValidInputField,\n    updatePaymentMethodTab,\n    getBillingAddressFormValues,\n    removeBtPayment,\n    createPaymentFormData,\n    initCardEvents,\n    isNonceExist,\n    setDefaultProperty,\n    getOptionByDataDefault,\n    removeActiveSessionPayment,\n    getSessionAccountOption,\n    showCartErrorMsg,\n    updateBillingFormValues\n};\n","require('./braintree/braintreeCustomMFRA')();\n"],"sourceRoot":""}